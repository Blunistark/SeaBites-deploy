var Pl=Object.defineProperty;var Tl=(s,t,a)=>t in s?Pl(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var vs=(s,t,a)=>Tl(s,typeof t!="symbol"?t+"":t,a);import{j as e,V as kr,R as Pr,A as Tr,C as Er,T as Dr,D as Ar,P as El,c as ut,a as Bt,u as ze,b as Ir,d as _e,e as me,f as Rr,g as Mr,h as Lr,S as Or,i as Dl,k as $r,l as _a,m as Al,n as Ds,o as Il,p as Rl,q as Ml,F as Ll,r as Ca,s as Ol,t as $l,v as zl,w as Ul,x as Et,y as ql,z as zr,O as Sa,B as Fa,E as ka,G as Pa,H as Ta,I as Ur,J as qr,K as Br,L as Vr,M as Hr,N as Gr,Q as Bl,U as Kr,W as Vl,X as Wr,Y as Qr,Z as Hl,_ as Yr,$ as Zr,a0 as Jr,a1 as Xr,a2 as en,a3 as sn,a4 as tn,a5 as Gl,a6 as Kl}from"./ui-vendor-TU2IyRCr.js";import{a as Ea,r as m,R as O,G as Wl,L as pe,u as xt,d as an,e as Ql,f as rn,h as Me,N as bs,B as Yl}from"./react-vendor-sq9uaOau.js";import{c as nn,t as Zl}from"./utils-vendor-C4xBKWBT.js";import{X as os,U as dr,P as be,T as _s,A as ln,a as Ue,b as As,M as ht,c as on,L as Da,E as et,d as cs,C as Aa,e as cn,f as Vt,g as Ee,H as Ia,B as dn,h as Ce,I as ds,S as Be,i as Ra,G as Ma,j as Ts,k as Ks,l as Te,m as mn,Z as un,n as Pe,o as Is,F as La,p as Oa,q as Dt,r as lt,s as Ne,D as zs,t as ms,u as xn,R as hn,v as Jl,w as Ws,x as At,y as Xl,z as gn,J as pn,K as Ns,N as It,O as js,Q as ot,V as Qs,W as eo,Y as fn,_ as vn,$ as jn,a0 as so,a1 as yn,a2 as Ht,a3 as to,a4 as ao,a5 as ro,a6 as mr,a7 as no,a8 as $a,a9 as Rt,aa as Mt,ab as ys,ac as xa,ad as Oe,ae as bn,af as Gt,ag as io,ah as Kt,ai as ct,aj as lo,ak as kt,al as oo}from"./icons-vendor-gCGGpR0S.js";import{u as rs,a as Cs,b as xe,Q as co,c as mo}from"./query-vendor-ByRSt4fD.js";import{c as uo}from"./supabase-vendor-Bd-mN0b_.js";import{f as ur,a as xo}from"./date-vendor-B7ZGHPEE.js";import{o as ho,r as go,a as po,u as fo,F as vo,C as jo,z as R,b as gt}from"./form-vendor-CIFk181A.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();var Nn,xr=Ea;Nn=xr.createRoot,xr.hydrateRoot;const yo=1,bo=1e6;let da=0;function No(){return da=(da+1)%Number.MAX_SAFE_INTEGER,da.toString()}const ma=new Map,hr=s=>{if(ma.has(s))return;const t=setTimeout(()=>{ma.delete(s),it({type:"REMOVE_TOAST",toastId:s})},bo);ma.set(s,t)},wo=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,yo)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=t;return a?hr(a):s.toasts.forEach(r=>{hr(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(a=>a.id!==t.toastId)}}},Pt=[];let Tt={toasts:[]};function it(s){Tt=wo(Tt,s),Pt.forEach(t=>{t(Tt)})}function ee({...s}){const t=No(),a=n=>it({type:"UPDATE_TOAST",toast:{...n,id:t}}),r=()=>it({type:"DISMISS_TOAST",toastId:t});return it({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:n=>{n||r()}}}),{id:t,dismiss:r,update:a}}function Qe(){const[s,t]=m.useState(Tt);return m.useEffect(()=>(Pt.push(t),()=>{const a=Pt.indexOf(t);a>-1&&Pt.splice(a,1)}),[s]),{...s,toast:ee,dismiss:a=>it({type:"DISMISS_TOAST",toastId:a})}}const gr=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,pr=nn,pt=(s,t)=>a=>{var r;if((t==null?void 0:t.variants)==null)return pr(s,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:n,defaultVariants:l}=t,i=Object.keys(n).map(d=>{const g=a==null?void 0:a[d],v=l==null?void 0:l[d];if(g===null)return null;const x=gr(g)||gr(v);return n[d][x]}),o=a&&Object.entries(a).reduce((d,g)=>{let[v,x]=g;return x===void 0||(d[v]=x),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,g)=>{let{class:v,className:x,...h}=g;return Object.entries(h).every(b=>{let[u,j]=b;return Array.isArray(j)?j.includes({...l,...o}[u]):{...l,...o}[u]===j})?[...d,v,x]:d},[]);return pr(s,i,c,a==null?void 0:a.class,a==null?void 0:a.className)};function z(...s){return Zl(nn(s))}const _o=El,wn=m.forwardRef(({className:s,...t},a)=>e.jsx(kr,{ref:a,className:z("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));wn.displayName=kr.displayName;const Co=pt("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_n=m.forwardRef(({className:s,variant:t,...a},r)=>e.jsx(Pr,{ref:r,className:z(Co({variant:t}),s),...a}));_n.displayName=Pr.displayName;const So=m.forwardRef(({className:s,...t},a)=>e.jsx(Tr,{ref:a,className:z("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));So.displayName=Tr.displayName;const Cn=m.forwardRef(({className:s,...t},a)=>e.jsx(Er,{ref:a,className:z("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx(os,{className:"h-4 w-4"})}));Cn.displayName=Er.displayName;const Sn=m.forwardRef(({className:s,...t},a)=>e.jsx(Dr,{ref:a,className:z("text-sm font-semibold",s),...t}));Sn.displayName=Dr.displayName;const Fn=m.forwardRef(({className:s,...t},a)=>e.jsx(Ar,{ref:a,className:z("text-sm opacity-90",s),...t}));Fn.displayName=Ar.displayName;function Fo(){const{toasts:s}=Qe();return e.jsxs(_o,{children:[s.map(function({id:t,title:a,description:r,action:n,...l}){return e.jsxs(_n,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(Sn,{children:a}),r&&e.jsx(Fn,{children:r})]}),n,e.jsx(Cn,{})]},t)}),e.jsx(wn,{})]})}var fr=["light","dark"],ko="(prefers-color-scheme: dark)",Po=m.createContext(void 0),To={setTheme:s=>{},themes:[]},Eo=()=>{var s;return(s=m.useContext(Po))!=null?s:To};m.memo(({forcedTheme:s,storageKey:t,attribute:a,enableSystem:r,enableColorScheme:n,defaultTheme:l,value:i,attrs:o,nonce:c})=>{let d=l==="system",g=a==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${a}',s='setAttribute';`,v=n?fr.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(b,u=!1,j=!0)=>{let f=i?i[b]:b,y=u?b+"|| ''":`'${f}'`,p="";return n&&j&&!u&&fr.includes(b)&&(p+=`d.style.colorScheme = '${b}';`),a==="class"?u||f?p+=`c.add(${y})`:p+="null":f&&(p+=`d[s](n,${y})`),p},h=s?`!function(){${g}${x(s)}}()`:r?`!function(){try{${g}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${ko}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${x(i?"x[e]":"e",!0)}}${d?"":"else{"+x(l,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${g}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${x(i?"x[e]":"e",!0)}}else{${x(l,!1,!1)};}${v}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})});var Do=s=>{switch(s){case"success":return Ro;case"info":return Lo;case"warning":return Mo;case"error":return Oo;default:return null}},Ao=Array(12).fill(0),Io=({visible:s})=>O.createElement("div",{className:"sonner-loading-wrapper","data-visible":s},O.createElement("div",{className:"sonner-spinner"},Ao.map((t,a)=>O.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),Ro=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Mo=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Lo=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Oo=O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},O.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$o=()=>{let[s,t]=O.useState(document.hidden);return O.useEffect(()=>{let a=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",a),()=>window.removeEventListener("visibilitychange",a)},[]),s},ha=1,zo=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let t=this.subscribers.indexOf(s);this.subscribers.splice(t,1)}),this.publish=s=>{this.subscribers.forEach(t=>t(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var t;let{message:a,...r}=s,n=typeof(s==null?void 0:s.id)=="number"||((t=s.id)==null?void 0:t.length)>0?s.id:ha++,l=this.toasts.find(o=>o.id===n),i=s.dismissible===void 0?!0:s.dismissible;return l?this.toasts=this.toasts.map(o=>o.id===n?(this.publish({...o,...s,id:n,title:a}),{...o,...s,id:n,dismissible:i,title:a}):o):this.addToast({title:a,...r,dismissible:i,id:n}),n},this.dismiss=s=>(s||this.toasts.forEach(t=>{this.subscribers.forEach(a=>a({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:s,dismiss:!0})),s),this.message=(s,t)=>this.create({...t,message:s}),this.error=(s,t)=>this.create({...t,message:s,type:"error"}),this.success=(s,t)=>this.create({...t,type:"success",message:s}),this.info=(s,t)=>this.create({...t,type:"info",message:s}),this.warning=(s,t)=>this.create({...t,type:"warning",message:s}),this.loading=(s,t)=>this.create({...t,type:"loading",message:s}),this.promise=(s,t)=>{if(!t)return;let a;t.loading!==void 0&&(a=this.create({...t,promise:s,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=s instanceof Promise?s:s(),n=a!==void 0;return r.then(async l=>{if(qo(l)&&!l.ok){n=!1;let i=typeof t.error=="function"?await t.error(`HTTP error! status: ${l.status}`):t.error,o=typeof t.description=="function"?await t.description(`HTTP error! status: ${l.status}`):t.description;this.create({id:a,type:"error",message:i,description:o})}else if(t.success!==void 0){n=!1;let i=typeof t.success=="function"?await t.success(l):t.success,o=typeof t.description=="function"?await t.description(l):t.description;this.create({id:a,type:"success",message:i,description:o})}}).catch(async l=>{if(t.error!==void 0){n=!1;let i=typeof t.error=="function"?await t.error(l):t.error,o=typeof t.description=="function"?await t.description(l):t.description;this.create({id:a,type:"error",message:i,description:o})}}).finally(()=>{var l;n&&(this.dismiss(a),a=void 0),(l=t.finally)==null||l.call(t)}),a},this.custom=(s,t)=>{let a=(t==null?void 0:t.id)||ha++;return this.create({jsx:s(a),id:a,...t}),a},this.subscribers=[],this.toasts=[]}},Ze=new zo,Uo=(s,t)=>{let a=(t==null?void 0:t.id)||ha++;return Ze.addToast({title:s,...t,id:a}),a},qo=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",Bo=Uo,Vo=()=>Ze.toasts,ge=Object.assign(Bo,{success:Ze.success,info:Ze.info,warning:Ze.warning,error:Ze.error,custom:Ze.custom,message:Ze.message,promise:Ze.promise,dismiss:Ze.dismiss,loading:Ze.loading},{getHistory:Vo});function Ho(s,{insertAt:t}={}){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=s:r.appendChild(document.createTextNode(s))}Ho(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ct(s){return s.label!==void 0}var Go=3,Ko="32px",Wo=4e3,Qo=356,Yo=14,Zo=20,Jo=200;function Xo(...s){return s.filter(Boolean).join(" ")}var ec=s=>{var t,a,r,n,l,i,o,c,d,g;let{invert:v,toast:x,unstyled:h,interacting:b,setHeights:u,visibleToasts:j,heights:f,index:y,toasts:p,expanded:_,removeToast:E,defaultRichColors:C,closeButton:D,style:F,cancelButtonStyle:P,actionButtonStyle:L,className:q="",descriptionClassName:se="",duration:$,position:K,gap:Q,loadingIcon:U,expandByDefault:A,classNames:w,icons:S,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:Y,cn:re}=s,[ne,fe]=O.useState(!1),[ve,de]=O.useState(!1),[Z,ie]=O.useState(!1),[we,le]=O.useState(!1),[ce,oe]=O.useState(0),[ns,Ye]=O.useState(0),Fs=O.useRef(null),Xe=O.useRef(null),Ls=y===0,na=y+1<=j,He=x.type,ps=x.dismissible!==!1,ia=x.className||"",la=x.descriptionClassName||"",Bs=O.useMemo(()=>f.findIndex(te=>te.toastId===x.id)||0,[f,x.id]),oa=O.useMemo(()=>{var te;return(te=x.closeButton)!=null?te:D},[x.closeButton,D]),bt=O.useMemo(()=>x.duration||$||Wo,[x.duration,$]),Vs=O.useRef(0),X=O.useRef(0),ae=O.useRef(0),$e=O.useRef(null),[Hs,Nt]=K.split("-"),rt=O.useMemo(()=>f.reduce((te,he,ue)=>ue>=Bs?te:te+he.height,0),[f,Bs]),fs=$o(),wt=x.invert||v,ca=He==="loading";X.current=O.useMemo(()=>Bs*Q+rt,[Bs,rt]),O.useEffect(()=>{fe(!0)},[]),O.useLayoutEffect(()=>{if(!ne)return;let te=Xe.current,he=te.style.height;te.style.height="auto";let ue=te.getBoundingClientRect().height;te.style.height=he,Ye(ue),u(us=>us.find(xs=>xs.toastId===x.id)?us.map(xs=>xs.toastId===x.id?{...xs,height:ue}:xs):[{toastId:x.id,height:ue,position:x.position},...us])},[ne,x.title,x.description,u,x.id]);let ks=O.useCallback(()=>{de(!0),oe(X.current),u(te=>te.filter(he=>he.toastId!==x.id)),setTimeout(()=>{E(x)},Jo)},[x,E,u,X]);O.useEffect(()=>{if(x.promise&&He==="loading"||x.duration===1/0||x.type==="loading")return;let te,he=bt;return _||b||Y&&fs?(()=>{if(ae.current<Vs.current){let ue=new Date().getTime()-Vs.current;he=he-ue}ae.current=new Date().getTime()})():he!==1/0&&(Vs.current=new Date().getTime(),te=setTimeout(()=>{var ue;(ue=x.onAutoClose)==null||ue.call(x,x),ks()},he)),()=>clearTimeout(te)},[_,b,A,x,bt,ks,x.promise,He,Y,fs]),O.useEffect(()=>{let te=Xe.current;if(te){let he=te.getBoundingClientRect().height;return Ye(he),u(ue=>[{toastId:x.id,height:he,position:x.position},...ue]),()=>u(ue=>ue.filter(us=>us.toastId!==x.id))}},[u,x.id]),O.useEffect(()=>{x.delete&&ks()},[ks,x.delete]);function Fl(){return S!=null&&S.loading?O.createElement("div",{className:"sonner-loader","data-visible":He==="loading"},S.loading):U?O.createElement("div",{className:"sonner-loader","data-visible":He==="loading"},U):O.createElement(Io,{visible:He==="loading"})}return O.createElement("li",{"aria-live":x.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Xe,className:re(q,ia,w==null?void 0:w.toast,(t=x==null?void 0:x.classNames)==null?void 0:t.toast,w==null?void 0:w.default,w==null?void 0:w[He],(a=x==null?void 0:x.classNames)==null?void 0:a[He]),"data-sonner-toast":"","data-rich-colors":(r=x.richColors)!=null?r:C,"data-styled":!(x.jsx||x.unstyled||h),"data-mounted":ne,"data-promise":!!x.promise,"data-removed":ve,"data-visible":na,"data-y-position":Hs,"data-x-position":Nt,"data-index":y,"data-front":Ls,"data-swiping":Z,"data-dismissible":ps,"data-type":He,"data-invert":wt,"data-swipe-out":we,"data-expanded":!!(_||A&&ne),style:{"--index":y,"--toasts-before":y,"--z-index":p.length-y,"--offset":`${ve?ce:X.current}px`,"--initial-height":A?"auto":`${ns}px`,...F,...x.style},onPointerDown:te=>{ca||!ps||(Fs.current=new Date,oe(X.current),te.target.setPointerCapture(te.pointerId),te.target.tagName!=="BUTTON"&&(ie(!0),$e.current={x:te.clientX,y:te.clientY}))},onPointerUp:()=>{var te,he,ue,us;if(we||!ps)return;$e.current=null;let xs=Number(((te=Xe.current)==null?void 0:te.style.getPropertyValue("--swipe-amount").replace("px",""))||0),_t=new Date().getTime()-((he=Fs.current)==null?void 0:he.getTime()),kl=Math.abs(xs)/_t;if(Math.abs(xs)>=Zo||kl>.11){oe(X.current),(ue=x.onDismiss)==null||ue.call(x,x),ks(),le(!0);return}(us=Xe.current)==null||us.style.setProperty("--swipe-amount","0px"),ie(!1)},onPointerMove:te=>{var he;if(!$e.current||!ps)return;let ue=te.clientY-$e.current.y,us=te.clientX-$e.current.x,xs=(Hs==="top"?Math.min:Math.max)(0,ue),_t=te.pointerType==="touch"?10:2;Math.abs(xs)>_t?(he=Xe.current)==null||he.style.setProperty("--swipe-amount",`${ue}px`):Math.abs(us)>_t&&($e.current=null)}},oa&&!x.jsx?O.createElement("button",{"aria-label":J,"data-disabled":ca,"data-close-button":!0,onClick:ca||!ps?()=>{}:()=>{var te;ks(),(te=x.onDismiss)==null||te.call(x,x)},className:re(w==null?void 0:w.closeButton,(n=x==null?void 0:x.classNames)==null?void 0:n.closeButton)},O.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},O.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),O.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,x.jsx||O.isValidElement(x.title)?x.jsx||x.title:O.createElement(O.Fragment,null,He||x.icon||x.promise?O.createElement("div",{"data-icon":"",className:re(w==null?void 0:w.icon,(l=x==null?void 0:x.classNames)==null?void 0:l.icon)},x.promise||x.type==="loading"&&!x.icon?x.icon||Fl():null,x.type!=="loading"?x.icon||(S==null?void 0:S[He])||Do(He):null):null,O.createElement("div",{"data-content":"",className:re(w==null?void 0:w.content,(i=x==null?void 0:x.classNames)==null?void 0:i.content)},O.createElement("div",{"data-title":"",className:re(w==null?void 0:w.title,(o=x==null?void 0:x.classNames)==null?void 0:o.title)},x.title),x.description?O.createElement("div",{"data-description":"",className:re(se,la,w==null?void 0:w.description,(c=x==null?void 0:x.classNames)==null?void 0:c.description)},x.description):null),O.isValidElement(x.cancel)?x.cancel:x.cancel&&Ct(x.cancel)?O.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||P,onClick:te=>{var he,ue;Ct(x.cancel)&&ps&&((ue=(he=x.cancel).onClick)==null||ue.call(he,te),ks())},className:re(w==null?void 0:w.cancelButton,(d=x==null?void 0:x.classNames)==null?void 0:d.cancelButton)},x.cancel.label):null,O.isValidElement(x.action)?x.action:x.action&&Ct(x.action)?O.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||L,onClick:te=>{var he,ue;Ct(x.action)&&(te.defaultPrevented||((ue=(he=x.action).onClick)==null||ue.call(he,te),ks()))},className:re(w==null?void 0:w.actionButton,(g=x==null?void 0:x.classNames)==null?void 0:g.actionButton)},x.action.label):null))};function vr(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}var sc=s=>{let{invert:t,position:a="bottom-right",hotkey:r=["altKey","KeyT"],expand:n,closeButton:l,className:i,offset:o,theme:c="light",richColors:d,duration:g,style:v,visibleToasts:x=Go,toastOptions:h,dir:b=vr(),gap:u=Yo,loadingIcon:j,icons:f,containerAriaLabel:y="Notifications",pauseWhenPageIsHidden:p,cn:_=Xo}=s,[E,C]=O.useState([]),D=O.useMemo(()=>Array.from(new Set([a].concat(E.filter(Y=>Y.position).map(Y=>Y.position)))),[E,a]),[F,P]=O.useState([]),[L,q]=O.useState(!1),[se,$]=O.useState(!1),[K,Q]=O.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=O.useRef(null),A=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=O.useRef(null),S=O.useRef(!1),J=O.useCallback(Y=>{var re;(re=E.find(ne=>ne.id===Y.id))!=null&&re.delete||Ze.dismiss(Y.id),C(ne=>ne.filter(({id:fe})=>fe!==Y.id))},[E]);return O.useEffect(()=>Ze.subscribe(Y=>{if(Y.dismiss){C(re=>re.map(ne=>ne.id===Y.id?{...ne,delete:!0}:ne));return}setTimeout(()=>{Wl.flushSync(()=>{C(re=>{let ne=re.findIndex(fe=>fe.id===Y.id);return ne!==-1?[...re.slice(0,ne),{...re[ne],...Y},...re.slice(ne+1)]:[Y,...re]})})})}),[]),O.useEffect(()=>{if(c!=="system"){Q(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Y})=>{Q(Y?"dark":"light")})},[c]),O.useEffect(()=>{E.length<=1&&q(!1)},[E]),O.useEffect(()=>{let Y=re=>{var ne,fe;r.every(ve=>re[ve]||re.code===ve)&&(q(!0),(ne=U.current)==null||ne.focus()),re.code==="Escape"&&(document.activeElement===U.current||(fe=U.current)!=null&&fe.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[r]),O.useEffect(()=>{if(U.current)return()=>{w.current&&(w.current.focus({preventScroll:!0}),w.current=null,S.current=!1)}},[U.current]),E.length?O.createElement("section",{"aria-label":`${y} ${A}`,tabIndex:-1},D.map((Y,re)=>{var ne;let[fe,ve]=Y.split("-");return O.createElement("ol",{key:Y,dir:b==="auto"?vr():b,tabIndex:-1,ref:U,className:i,"data-sonner-toaster":!0,"data-theme":K,"data-y-position":fe,"data-x-position":ve,style:{"--front-toast-height":`${((ne=F[0])==null?void 0:ne.height)||0}px`,"--offset":typeof o=="number"?`${o}px`:o||Ko,"--width":`${Qo}px`,"--gap":`${u}px`,...v},onBlur:de=>{S.current&&!de.currentTarget.contains(de.relatedTarget)&&(S.current=!1,w.current&&(w.current.focus({preventScroll:!0}),w.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||S.current||(S.current=!0,w.current=de.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{se||q(!1)},onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},E.filter(de=>!de.position&&re===0||de.position===Y).map((de,Z)=>{var ie,we;return O.createElement(ec,{key:de.id,icons:f,index:Z,toast:de,defaultRichColors:d,duration:(ie=h==null?void 0:h.duration)!=null?ie:g,className:h==null?void 0:h.className,descriptionClassName:h==null?void 0:h.descriptionClassName,invert:t,visibleToasts:x,closeButton:(we=h==null?void 0:h.closeButton)!=null?we:l,interacting:se,position:Y,style:h==null?void 0:h.style,unstyled:h==null?void 0:h.unstyled,classNames:h==null?void 0:h.classNames,cancelButtonStyle:h==null?void 0:h.cancelButtonStyle,actionButtonStyle:h==null?void 0:h.actionButtonStyle,removeToast:J,toasts:E.filter(le=>le.position==de.position),heights:F.filter(le=>le.position==de.position),setHeights:P,expandByDefault:n,gap:u,loadingIcon:j,expanded:L,pauseWhenPageIsHidden:p,cn:_})}))})):null};const tc=({...s})=>{const{theme:t="system"}=Eo();return e.jsx(sc,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};var[Wt,zu]=ut("Tooltip",[Bt]),za=Bt(),kn="TooltipProvider",ac=700,jr="tooltip.open",[rc,Pn]=Wt(kn),Tn=s=>{const{__scopeTooltip:t,delayDuration:a=ac,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:l}=s,[i,o]=m.useState(!0),c=m.useRef(!1),d=m.useRef(0);return m.useEffect(()=>{const g=d.current;return()=>window.clearTimeout(g)},[]),e.jsx(rc,{scope:t,isOpenDelayed:i,delayDuration:a,onOpen:m.useCallback(()=>{window.clearTimeout(d.current),o(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:m.useCallback(g=>{c.current=g},[]),disableHoverableContent:n,children:l})};Tn.displayName=kn;var En="Tooltip",[Uu,Qt]=Wt(En),ga="TooltipTrigger",nc=m.forwardRef((s,t)=>{const{__scopeTooltip:a,...r}=s,n=Qt(ga,a),l=Pn(ga,a),i=za(a),o=m.useRef(null),c=ze(t,o,n.onTriggerChange),d=m.useRef(!1),g=m.useRef(!1),v=m.useCallback(()=>d.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),e.jsx(Ir,{asChild:!0,...i,children:e.jsx(_e.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:c,onPointerMove:me(s.onPointerMove,x=>{x.pointerType!=="touch"&&!g.current&&!l.isPointerInTransitRef.current&&(n.onTriggerEnter(),g.current=!0)}),onPointerLeave:me(s.onPointerLeave,()=>{n.onTriggerLeave(),g.current=!1}),onPointerDown:me(s.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:me(s.onFocus,()=>{d.current||n.onOpen()}),onBlur:me(s.onBlur,n.onClose),onClick:me(s.onClick,n.onClose)})})});nc.displayName=ga;var ic="TooltipPortal",[qu,lc]=Wt(ic,{forceMount:void 0}),Ys="TooltipContent",Dn=m.forwardRef((s,t)=>{const a=lc(Ys,s.__scopeTooltip),{forceMount:r=a.forceMount,side:n="top",...l}=s,i=Qt(Ys,s.__scopeTooltip);return e.jsx(Rr,{present:r||i.open,children:i.disableHoverableContent?e.jsx(An,{side:n,...l,ref:t}):e.jsx(oc,{side:n,...l,ref:t})})}),oc=m.forwardRef((s,t)=>{const a=Qt(Ys,s.__scopeTooltip),r=Pn(Ys,s.__scopeTooltip),n=m.useRef(null),l=ze(t,n),[i,o]=m.useState(null),{trigger:c,onClose:d}=a,g=n.current,{onPointerInTransitChange:v}=r,x=m.useCallback(()=>{o(null),v(!1)},[v]),h=m.useCallback((b,u)=>{const j=b.currentTarget,f={x:b.clientX,y:b.clientY},y=uc(f,j.getBoundingClientRect()),p=xc(f,y),_=hc(u.getBoundingClientRect()),E=pc([...p,..._]);o(E),v(!0)},[v]);return m.useEffect(()=>()=>x(),[x]),m.useEffect(()=>{if(c&&g){const b=j=>h(j,g),u=j=>h(j,c);return c.addEventListener("pointerleave",b),g.addEventListener("pointerleave",u),()=>{c.removeEventListener("pointerleave",b),g.removeEventListener("pointerleave",u)}}},[c,g,h,x]),m.useEffect(()=>{if(i){const b=u=>{const j=u.target,f={x:u.clientX,y:u.clientY},y=(c==null?void 0:c.contains(j))||(g==null?void 0:g.contains(j)),p=!gc(f,i);y?x():p&&(x(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,g,i,d,x]),e.jsx(An,{...s,ref:l})}),[cc,dc]=Wt(En,{isInside:!1}),An=m.forwardRef((s,t)=>{const{__scopeTooltip:a,children:r,"aria-label":n,onEscapeKeyDown:l,onPointerDownOutside:i,...o}=s,c=Qt(Ys,a),d=za(a),{onClose:g}=c;return m.useEffect(()=>(document.addEventListener(jr,g),()=>document.removeEventListener(jr,g)),[g]),m.useEffect(()=>{if(c.trigger){const v=x=>{const h=x.target;h!=null&&h.contains(c.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[c.trigger,g]),e.jsx(Mr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:i,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:e.jsxs(Lr,{"data-state":c.stateAttribute,...d,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Or,{children:r}),e.jsx(cc,{scope:a,isInside:!0,children:e.jsx(Dl,{id:c.contentId,role:"tooltip",children:n||r})})]})})});Dn.displayName=Ys;var In="TooltipArrow",mc=m.forwardRef((s,t)=>{const{__scopeTooltip:a,...r}=s,n=za(a);return dc(In,a).isInside?null:e.jsx($r,{...n,...r,ref:t})});mc.displayName=In;function uc(s,t){const a=Math.abs(t.top-s.y),r=Math.abs(t.bottom-s.y),n=Math.abs(t.right-s.x),l=Math.abs(t.left-s.x);switch(Math.min(a,r,n,l)){case l:return"left";case n:return"right";case a:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function xc(s,t,a=5){const r=[];switch(t){case"top":r.push({x:s.x-a,y:s.y+a},{x:s.x+a,y:s.y+a});break;case"bottom":r.push({x:s.x-a,y:s.y-a},{x:s.x+a,y:s.y-a});break;case"left":r.push({x:s.x+a,y:s.y-a},{x:s.x+a,y:s.y+a});break;case"right":r.push({x:s.x-a,y:s.y-a},{x:s.x-a,y:s.y+a});break}return r}function hc(s){const{top:t,right:a,bottom:r,left:n}=s;return[{x:n,y:t},{x:a,y:t},{x:a,y:r},{x:n,y:r}]}function gc(s,t){const{x:a,y:r}=s;let n=!1;for(let l=0,i=t.length-1;l<t.length;i=l++){const o=t[l].x,c=t[l].y,d=t[i].x,g=t[i].y;c>r!=g>r&&a<(d-o)*(r-c)/(g-c)+o&&(n=!n)}return n}function pc(s){const t=s.slice();return t.sort((a,r)=>a.x<r.x?-1:a.x>r.x?1:a.y<r.y?-1:a.y>r.y?1:0),fc(t)}function fc(s){if(s.length<=1)return s.slice();const t=[];for(let r=0;r<s.length;r++){const n=s[r];for(;t.length>=2;){const l=t[t.length-1],i=t[t.length-2];if((l.x-i.x)*(n.y-i.y)>=(l.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}t.pop();const a=[];for(let r=s.length-1;r>=0;r--){const n=s[r];for(;a.length>=2;){const l=a[a.length-1],i=a[a.length-2];if((l.x-i.x)*(n.y-i.y)>=(l.y-i.y)*(n.x-i.x))a.pop();else break}a.push(n)}return a.pop(),t.length===1&&a.length===1&&t[0].x===a[0].x&&t[0].y===a[0].y?t:t.concat(a)}var vc=Tn,Rn=Dn;const jc=vc,yc=m.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(Rn,{ref:r,sideOffset:t,className:z("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));yc.displayName=Rn.displayName;const bc="https://jdkocduogrvcoxxdgrkl.supabase.co",Nc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impka29jZHVvZ3J2Y294eGRncmtsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3MDY5MjMsImV4cCI6MjA2NDI4MjkyM30.sZKvPCTdx2h0p92Jhp8DDjdbAL6rhZ75fO49z8N8sFw",M=uo(bc,Nc),Mn=m.createContext(void 0),wc=({children:s})=>{const[t,a]=m.useState(null),[r,n]=m.useState(!0),[l,i]=m.useState(!1),o=async()=>{if(!t)return!1;try{const{data:h,error:b}=await M.from("profiles").select("role").eq("id",t.id).single();if(b)return console.error("Error checking admin role:",b),!1;const u=(h==null?void 0:h.role)==="admin";return i(u),u}catch(h){return console.error("Error in checkAdminRole:",h),!1}};m.useEffect(()=>{M.auth.getSession().then(({data:{session:b}})=>{a((b==null?void 0:b.user)??null),n(!1)});const{data:{subscription:h}}=M.auth.onAuthStateChange(async(b,u)=>{a((u==null?void 0:u.user)??null),u!=null&&u.user?await o():i(!1),n(!1)});return()=>h.unsubscribe()},[]),m.useEffect(()=>{t?o():i(!1)},[t]);const x={user:t,loading:r,isAdmin:l,signUp:async(h,b,u)=>{const{error:j}=await M.auth.signUp({email:h,password:b,options:{data:{first_name:u.firstName,last_name:u.lastName}}});if(j)throw j},signIn:async(h,b)=>{const{error:u}=await M.auth.signInWithPassword({email:h,password:b});if(u)throw u},signInAdmin:async(h,b)=>{var f;const{error:u}=await M.auth.signInWithPassword({email:h,password:b});if(u)throw u;const{data:j}=await M.auth.getSession();if((f=j==null?void 0:j.session)!=null&&f.user){const{data:y,error:p}=await M.from("profiles").select("role").eq("id",j.session.user.id).single();if(p||(y==null?void 0:y.role)!=="admin")throw await M.auth.signOut(),new Error("Access denied. Admin privileges required.")}},signOut:async()=>{const{error:h}=await M.auth.signOut();if(h)throw h;i(!1)},checkAdminRole:o};return e.jsx(Mn.Provider,{value:x,children:s})},Ve=()=>{const s=m.useContext(Mn);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Ln=m.createContext(void 0),On="seabites_cart",_c=()=>{try{if(typeof window<"u"){const s=localStorage.getItem(On);if(s)return JSON.parse(s)}}catch(s){console.error("Error loading cart from localStorage:",s)}return[]},Cc=s=>{try{typeof window<"u"&&localStorage.setItem(On,JSON.stringify(s))}catch(t){console.error("Error saving cart to localStorage:",t)}},Sc=({children:s})=>{const[t,a]=m.useState([]),[r,n]=m.useState(!1),{toast:l}=Qe();m.useEffect(()=>{const h=_c();a(h),n(!0)},[]),m.useEffect(()=>{r&&Cc(t)},[t,r]);const i=h=>{a(b=>b.find(j=>j.id===h.id)?b.map(j=>j.id===h.id?{...j,quantity:j.quantity+1}:j):[...b,{...h,quantity:1}]),l({title:"Added to cart",description:`${h.name} has been added to your cart.`})},o=h=>{a(b=>b.filter(u=>u.id!==h)),l({title:"Item removed",description:"Item has been removed from your cart."})},x={cartItems:t,addToCart:i,removeFromCart:o,updateQuantity:(h,b)=>{if(b===0){o(h);return}a(u=>u.map(j=>j.id===h?{...j,quantity:b}:j))},clearCart:()=>{a([]),l({title:"Cart cleared",description:"All items have been removed from your cart."})},getTotalItems:()=>t.reduce((h,b)=>h+b.quantity,0),getTotalPrice:()=>t.reduce((h,b)=>h+b.price*b.quantity,0)};return e.jsx(Ln.Provider,{value:x,children:s})},st=()=>{const s=m.useContext(Ln);if(s===void 0)throw new Error("useCart must be used within a CartProvider");return s},$n=m.createContext(void 0),Fc=({children:s})=>{const[t,a]=m.useState([]);m.useEffect(()=>{const x=localStorage.getItem("seabites-favorites");if(x)try{const h=JSON.parse(x);a(h)}catch(h){console.error("Error loading favorites from localStorage:",h)}},[]),m.useEffect(()=>{localStorage.setItem("seabites-favorites",JSON.stringify(t))},[t]);const r=t.map(x=>x.id),n=x=>{a(h=>h.find(u=>u.id===x.id)?h:[...h,x])},l=x=>{a(h=>h.filter(b=>b.id!==x))},v={favorites:t,favoriteIds:r,addToFavorites:n,removeFromFavorites:l,toggleFavorite:x=>{t.some(b=>b.id===x.id)?l(x.id):n(x)},isFavorite:x=>r.includes(x),getFavoritesByCategory:x=>!x||x==="all"?t:t.filter(h=>{var b;return((b=h.category)==null?void 0:b.toLowerCase())===x.toLowerCase()}),getUniqueCategories:()=>{const x=t.map(h=>h.category).filter(Boolean);return[...new Set(x)]},clearFavorites:()=>{a([])}};return e.jsx($n.Provider,{value:v,children:s})},Yt=()=>{const s=m.useContext($n);if(s===void 0)throw new Error("useFavorites must be used within a FavoritesProvider");return s},Ua=pt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=m.forwardRef(({className:s,variant:t,size:a,asChild:r=!1,...n},l)=>{const i=r?_a:"button";return e.jsx(i,{className:z(Ua({variant:t,size:a,className:s})),ref:l,...n})});N.displayName="Button";const kc=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-400 via-red-500 to-pink-500 flex flex-col items-center justify-center px-6 text-white",children:e.jsxs("div",{className:"text-center space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-24 h-24 mx-auto bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(dr,{size:48,className:"text-white"})}),e.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Seabites"}),e.jsx("p",{className:"text-xl text-white/90 max-w-md mx-auto",children:"Delicious food & essentials delivered to your doorstep in minutes"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-sm mx-auto",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(dr,{size:24})}),e.jsx("p",{className:"text-sm text-white/80",children:"Fresh Food"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(be,{size:24})}),e.jsx("p",{className:"text-sm text-white/80",children:"Groceries"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(_s,{size:24})}),e.jsx("p",{className:"text-sm text-white/80",children:"Fast Delivery"})]})]}),e.jsxs("div",{className:"space-y-4 max-w-sm mx-auto",children:[e.jsx(pe,{to:"/signup",children:e.jsxs(N,{className:"w-full bg-white text-orange-500 hover:bg-gray-100 font-semibold py-3 rounded-xl shadow-lg transition-all duration-200 hover:scale-105",children:["Get Started",e.jsx(ln,{className:"ml-2 h-5 w-5"})]})}),e.jsx(pe,{to:"/login",children:e.jsx(N,{variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 font-semibold py-3 rounded-xl mb-2",children:"Sign In"})}),e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"outline",className:"w-full border-white/30 text-white hover:bg-white/10 font-semibold py-3 rounded-xl",children:"Continue as Guest"})})]})]})}),B=m.forwardRef(({className:s,type:t,...a},r)=>e.jsx("input",{type:t,className:z("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...a}));B.displayName="Input";var Pc="Label",zn=m.forwardRef((s,t)=>e.jsx(_e.label,{...s,ref:t,onMouseDown:a=>{var n;a.target.closest("button, input, select, textarea")||((n=s.onMouseDown)==null||n.call(s,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));zn.displayName=Pc;var Un=zn;const Tc=pt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),I=m.forwardRef(({className:s,...t},a)=>e.jsx(Un,{ref:a,className:z(Tc(),s),...t}));I.displayName=Un.displayName;const k=m.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));k.displayName="Card";const V=m.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("flex flex-col space-y-1.5 p-6",s),...t}));V.displayName="CardHeader";const H=m.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:z("text-2xl font-semibold leading-none tracking-tight",s),...t}));H.displayName="CardTitle";const We=m.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:z("text-sm text-muted-foreground",s),...t}));We.displayName="CardDescription";const T=m.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("p-6 pt-0",s),...t}));T.displayName="CardContent";const Ec=m.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("flex items-center p-6 pt-0",s),...t}));Ec.displayName="CardFooter";const Dc=()=>{const s=xt(),{toast:t}=Qe(),{signUp:a}=Ve(),[r,n]=m.useState(!1),[l,i]=m.useState(!1),[o,c]=m.useState({firstName:"",lastName:"",email:"",phone:"",password:""}),d=v=>{c({...o,[v.target.name]:v.target.value})},g=async v=>{v.preventDefault(),i(!0);try{await a(o.email,o.password,{firstName:o.firstName,lastName:o.lastName}),t({title:"Account created successfully!",description:"Please check your email to verify your account."}),s("/welcome")}catch(x){t({title:"Sign up failed",description:x.message||"Please check your information and try again.",variant:"destructive"})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(pe,{to:"/",className:"mr-4",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Create Account"})]}),e.jsxs(k,{className:"shadow-lg border-0",children:[e.jsxs(V,{className:"text-center",children:[e.jsx(H,{className:"text-xl text-gray-800",children:"Join Seabites"}),e.jsx("p",{className:"text-gray-600",children:"Enter your details to get started"})]}),e.jsxs(T,{children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"firstName",children:"First Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"firstName",name:"firstName",value:o.firstName,onChange:d,placeholder:"John",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"lastName",children:"Last Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"lastName",name:"lastName",value:o.lastName,onChange:d,placeholder:"Doe",className:"pl-10",required:!0})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"email",name:"email",type:"email",value:o.email,onChange:d,placeholder:"john@example.com",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(on,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"phone",name:"phone",type:"tel",value:o.phone,onChange:d,placeholder:"+91 98765 43210",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"password",name:"password",type:r?"text":"password",value:o.password,onChange:d,placeholder:"Create a strong password",className:"pl-10 pr-10",required:!0,minLength:6}),e.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!r),children:r?e.jsx(et,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Password must be at least 6 characters long"})]}),e.jsx(N,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-lg",disabled:l,children:l?"Creating Account...":"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(pe,{to:"/login",className:"text-orange-500 hover:text-orange-600 font-medium",children:"Sign in"})]})})]})]})]})})};function yr(s,[t,a]){return Math.min(a,Math.max(t,s))}function qa(s){const t=m.useRef({value:s,previous:s});return m.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var Ac=[" ","Enter","ArrowUp","ArrowDown"],Ic=[" ","Enter"],ft="Select",[Zt,Jt,Rc]=Al(ft),[tt,Bu]=ut(ft,[Rc,Bt]),Xt=Bt(),[Mc,Rs]=tt(ft),[Lc,Oc]=tt(ft),qn=s=>{const{__scopeSelect:t,children:a,open:r,defaultOpen:n,onOpenChange:l,value:i,defaultValue:o,onValueChange:c,dir:d,name:g,autoComplete:v,disabled:x,required:h,form:b}=s,u=Xt(t),[j,f]=m.useState(null),[y,p]=m.useState(null),[_,E]=m.useState(!1),C=Ul(d),[D=!1,F]=Et({prop:r,defaultProp:n,onChange:l}),[P,L]=Et({prop:i,defaultProp:o,onChange:c}),q=m.useRef(null),se=j?b||!!j.closest("form"):!0,[$,K]=m.useState(new Set),Q=Array.from($).map(U=>U.props.value).join(";");return e.jsx(ql,{...u,children:e.jsxs(Mc,{required:h,scope:t,trigger:j,onTriggerChange:f,valueNode:y,onValueNodeChange:p,valueNodeHasChildren:_,onValueNodeHasChildrenChange:E,contentId:Ca(),value:P,onValueChange:L,open:D,onOpenChange:F,dir:C,triggerPointerDownPosRef:q,disabled:x,children:[e.jsx(Zt.Provider,{scope:t,children:e.jsx(Lc,{scope:s.__scopeSelect,onNativeOptionAdd:m.useCallback(U=>{K(A=>new Set(A).add(U))},[]),onNativeOptionRemove:m.useCallback(U=>{K(A=>{const w=new Set(A);return w.delete(U),w})},[]),children:a})}),se?e.jsxs(xi,{"aria-hidden":!0,required:h,tabIndex:-1,name:g,autoComplete:v,value:P,onChange:U=>L(U.target.value),disabled:x,form:b,children:[P===void 0?e.jsx("option",{value:""}):null,Array.from($)]},Q):null]})})};qn.displayName=ft;var Bn="SelectTrigger",Vn=m.forwardRef((s,t)=>{const{__scopeSelect:a,disabled:r=!1,...n}=s,l=Xt(a),i=Rs(Bn,a),o=i.disabled||r,c=ze(t,i.onTriggerChange),d=Jt(a),g=m.useRef("touch"),[v,x,h]=hi(u=>{const j=d().filter(p=>!p.disabled),f=j.find(p=>p.value===i.value),y=gi(j,u,f);y!==void 0&&i.onValueChange(y.value)}),b=u=>{o||(i.onOpenChange(!0),h()),u&&(i.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(Ir,{asChild:!0,...l,children:e.jsx(_e.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":ui(i.value)?"":void 0,...n,ref:c,onClick:me(n.onClick,u=>{u.currentTarget.focus(),g.current!=="mouse"&&b(u)}),onPointerDown:me(n.onPointerDown,u=>{g.current=u.pointerType;const j=u.target;j.hasPointerCapture(u.pointerId)&&j.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(b(u),u.preventDefault())}),onKeyDown:me(n.onKeyDown,u=>{const j=v.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&x(u.key),!(j&&u.key===" ")&&Ac.includes(u.key)&&(b(),u.preventDefault())})})})});Vn.displayName=Bn;var Hn="SelectValue",Gn=m.forwardRef((s,t)=>{const{__scopeSelect:a,className:r,style:n,children:l,placeholder:i="",...o}=s,c=Rs(Hn,a),{onValueNodeHasChildrenChange:d}=c,g=l!==void 0,v=ze(t,c.onValueNodeChange);return Ds(()=>{d(g)},[d,g]),e.jsx(_e.span,{...o,ref:v,style:{pointerEvents:"none"},children:ui(c.value)?e.jsx(e.Fragment,{children:i}):l})});Gn.displayName=Hn;var $c="SelectIcon",Kn=m.forwardRef((s,t)=>{const{__scopeSelect:a,children:r,...n}=s;return e.jsx(_e.span,{"aria-hidden":!0,...n,ref:t,children:r||""})});Kn.displayName=$c;var zc="SelectPortal",Wn=s=>e.jsx(zl,{asChild:!0,...s});Wn.displayName=zc;var Us="SelectContent",Qn=m.forwardRef((s,t)=>{const a=Rs(Us,s.__scopeSelect),[r,n]=m.useState();if(Ds(()=>{n(new DocumentFragment)},[]),!a.open){const l=r;return l?Ea.createPortal(e.jsx(Yn,{scope:s.__scopeSelect,children:e.jsx(Zt.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),l):null}return e.jsx(Zn,{...s,ref:t})});Qn.displayName=Us;var is=10,[Yn,Ms]=tt(Us),Uc="SelectContentImpl",Zn=m.forwardRef((s,t)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:l,onPointerDownOutside:i,side:o,sideOffset:c,align:d,alignOffset:g,arrowPadding:v,collisionBoundary:x,collisionPadding:h,sticky:b,hideWhenDetached:u,avoidCollisions:j,...f}=s,y=Rs(Us,a),[p,_]=m.useState(null),[E,C]=m.useState(null),D=ze(t,Z=>_(Z)),[F,P]=m.useState(null),[L,q]=m.useState(null),se=Jt(a),[$,K]=m.useState(!1),Q=m.useRef(!1);m.useEffect(()=>{if(p)return Il(p)},[p]),Rl();const U=m.useCallback(Z=>{const[ie,...we]=se().map(oe=>oe.ref.current),[le]=we.slice(-1),ce=document.activeElement;for(const oe of Z)if(oe===ce||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===ie&&E&&(E.scrollTop=0),oe===le&&E&&(E.scrollTop=E.scrollHeight),oe==null||oe.focus(),document.activeElement!==ce))return},[se,E]),A=m.useCallback(()=>U([F,p]),[U,F,p]);m.useEffect(()=>{$&&A()},[$,A]);const{onOpenChange:w,triggerPointerDownPosRef:S}=y;m.useEffect(()=>{if(p){let Z={x:0,y:0};const ie=le=>{var ce,oe;Z={x:Math.abs(Math.round(le.pageX)-(((ce=S.current)==null?void 0:ce.x)??0)),y:Math.abs(Math.round(le.pageY)-(((oe=S.current)==null?void 0:oe.y)??0))}},we=le=>{Z.x<=10&&Z.y<=10?le.preventDefault():p.contains(le.target)||w(!1),document.removeEventListener("pointermove",ie),S.current=null};return S.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",we,{capture:!0})}}},[p,w,S]),m.useEffect(()=>{const Z=()=>w(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[w]);const[J,Y]=hi(Z=>{const ie=se().filter(ce=>!ce.disabled),we=ie.find(ce=>ce.ref.current===document.activeElement),le=gi(ie,Z,we);le&&setTimeout(()=>le.ref.current.focus())}),re=m.useCallback((Z,ie,we)=>{const le=!Q.current&&!we;(y.value!==void 0&&y.value===ie||le)&&(P(Z),le&&(Q.current=!0))},[y.value]),ne=m.useCallback(()=>p==null?void 0:p.focus(),[p]),fe=m.useCallback((Z,ie,we)=>{const le=!Q.current&&!we;(y.value!==void 0&&y.value===ie||le)&&q(Z)},[y.value]),ve=r==="popper"?pa:Jn,de=ve===pa?{side:o,sideOffset:c,align:d,alignOffset:g,arrowPadding:v,collisionBoundary:x,collisionPadding:h,sticky:b,hideWhenDetached:u,avoidCollisions:j}:{};return e.jsx(Yn,{scope:a,content:p,viewport:E,onViewportChange:C,itemRefCallback:re,selectedItem:F,onItemLeave:ne,itemTextRefCallback:fe,focusSelectedItem:A,selectedItemText:L,position:r,isPositioned:$,searchRef:J,children:e.jsx(Ml,{as:_a,allowPinchZoom:!0,children:e.jsx(Ll,{asChild:!0,trapped:y.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:me(n,Z=>{var ie;(ie=y.trigger)==null||ie.focus({preventScroll:!0}),Z.preventDefault()}),children:e.jsx(Mr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:i,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:e.jsx(ve,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Z=>Z.preventDefault(),...f,...de,onPlaced:()=>K(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...f.style},onKeyDown:me(f.onKeyDown,Z=>{const ie=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!ie&&Z.key.length===1&&Y(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let le=se().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const ce=Z.target,oe=le.indexOf(ce);le=le.slice(oe+1)}setTimeout(()=>U(le)),Z.preventDefault()}})})})})})})});Zn.displayName=Uc;var qc="SelectItemAlignedPosition",Jn=m.forwardRef((s,t)=>{const{__scopeSelect:a,onPlaced:r,...n}=s,l=Rs(Us,a),i=Ms(Us,a),[o,c]=m.useState(null),[d,g]=m.useState(null),v=ze(t,D=>g(D)),x=Jt(a),h=m.useRef(!1),b=m.useRef(!0),{viewport:u,selectedItem:j,selectedItemText:f,focusSelectedItem:y}=i,p=m.useCallback(()=>{if(l.trigger&&l.valueNode&&o&&d&&u&&j&&f){const D=l.trigger.getBoundingClientRect(),F=d.getBoundingClientRect(),P=l.valueNode.getBoundingClientRect(),L=f.getBoundingClientRect();if(l.dir!=="rtl"){const ce=L.left-F.left,oe=P.left-ce,ns=D.left-oe,Ye=D.width+ns,Fs=Math.max(Ye,F.width),Xe=window.innerWidth-is,Ls=yr(oe,[is,Math.max(is,Xe-Fs)]);o.style.minWidth=Ye+"px",o.style.left=Ls+"px"}else{const ce=F.right-L.right,oe=window.innerWidth-P.right-ce,ns=window.innerWidth-D.right-oe,Ye=D.width+ns,Fs=Math.max(Ye,F.width),Xe=window.innerWidth-is,Ls=yr(oe,[is,Math.max(is,Xe-Fs)]);o.style.minWidth=Ye+"px",o.style.right=Ls+"px"}const q=x(),se=window.innerHeight-is*2,$=u.scrollHeight,K=window.getComputedStyle(d),Q=parseInt(K.borderTopWidth,10),U=parseInt(K.paddingTop,10),A=parseInt(K.borderBottomWidth,10),w=parseInt(K.paddingBottom,10),S=Q+U+$+w+A,J=Math.min(j.offsetHeight*5,S),Y=window.getComputedStyle(u),re=parseInt(Y.paddingTop,10),ne=parseInt(Y.paddingBottom,10),fe=D.top+D.height/2-is,ve=se-fe,de=j.offsetHeight/2,Z=j.offsetTop+de,ie=Q+U+Z,we=S-ie;if(ie<=fe){const ce=q.length>0&&j===q[q.length-1].ref.current;o.style.bottom="0px";const oe=d.clientHeight-u.offsetTop-u.offsetHeight,ns=Math.max(ve,de+(ce?ne:0)+oe+A),Ye=ie+ns;o.style.height=Ye+"px"}else{const ce=q.length>0&&j===q[0].ref.current;o.style.top="0px";const ns=Math.max(fe,Q+u.offsetTop+(ce?re:0)+de)+we;o.style.height=ns+"px",u.scrollTop=ie-fe+u.offsetTop}o.style.margin=`${is}px 0`,o.style.minHeight=J+"px",o.style.maxHeight=se+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[x,l.trigger,l.valueNode,o,d,u,j,f,l.dir,r]);Ds(()=>p(),[p]);const[_,E]=m.useState();Ds(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const C=m.useCallback(D=>{D&&b.current===!0&&(p(),y==null||y(),b.current=!1)},[p,y]);return e.jsx(Vc,{scope:a,contentWrapper:o,shouldExpandOnScrollRef:h,onScrollButtonChange:C,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:e.jsx(_e.div,{...n,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});Jn.displayName=qc;var Bc="SelectPopperPosition",pa=m.forwardRef((s,t)=>{const{__scopeSelect:a,align:r="start",collisionPadding:n=is,...l}=s,i=Xt(a);return e.jsx(Lr,{...i,...l,ref:t,align:r,collisionPadding:n,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pa.displayName=Bc;var[Vc,Ba]=tt(Us,{}),fa="SelectViewport",Xn=m.forwardRef((s,t)=>{const{__scopeSelect:a,nonce:r,...n}=s,l=Ms(fa,a),i=Ba(fa,a),o=ze(t,l.onViewportChange),c=m.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(Zt.Slot,{scope:a,children:e.jsx(_e.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:me(n.onScroll,d=>{const g=d.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:x}=i;if(x!=null&&x.current&&v){const h=Math.abs(c.current-g.scrollTop);if(h>0){const b=window.innerHeight-is*2,u=parseFloat(v.style.minHeight),j=parseFloat(v.style.height),f=Math.max(u,j);if(f<b){const y=f+h,p=Math.min(b,y),_=y-p;v.style.height=p+"px",v.style.bottom==="0px"&&(g.scrollTop=_>0?_:0,v.style.justifyContent="flex-end")}}}c.current=g.scrollTop})})})]})});Xn.displayName=fa;var ei="SelectGroup",[Hc,Gc]=tt(ei),Kc=m.forwardRef((s,t)=>{const{__scopeSelect:a,...r}=s,n=Ca();return e.jsx(Hc,{scope:a,id:n,children:e.jsx(_e.div,{role:"group","aria-labelledby":n,...r,ref:t})})});Kc.displayName=ei;var si="SelectLabel",ti=m.forwardRef((s,t)=>{const{__scopeSelect:a,...r}=s,n=Gc(si,a);return e.jsx(_e.div,{id:n.id,...r,ref:t})});ti.displayName=si;var Lt="SelectItem",[Wc,ai]=tt(Lt),ri=m.forwardRef((s,t)=>{const{__scopeSelect:a,value:r,disabled:n=!1,textValue:l,...i}=s,o=Rs(Lt,a),c=Ms(Lt,a),d=o.value===r,[g,v]=m.useState(l??""),[x,h]=m.useState(!1),b=ze(t,y=>{var p;return(p=c.itemRefCallback)==null?void 0:p.call(c,y,r,n)}),u=Ca(),j=m.useRef("touch"),f=()=>{n||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Wc,{scope:a,value:r,disabled:n,textId:u,isSelected:d,onItemTextChange:m.useCallback(y=>{v(p=>p||((y==null?void 0:y.textContent)??"").trim())},[]),children:e.jsx(Zt.ItemSlot,{scope:a,value:r,disabled:n,textValue:g,children:e.jsx(_e.div,{role:"option","aria-labelledby":u,"data-highlighted":x?"":void 0,"aria-selected":d&&x,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:b,onFocus:me(i.onFocus,()=>h(!0)),onBlur:me(i.onBlur,()=>h(!1)),onClick:me(i.onClick,()=>{j.current!=="mouse"&&f()}),onPointerUp:me(i.onPointerUp,()=>{j.current==="mouse"&&f()}),onPointerDown:me(i.onPointerDown,y=>{j.current=y.pointerType}),onPointerMove:me(i.onPointerMove,y=>{var p;j.current=y.pointerType,n?(p=c.onItemLeave)==null||p.call(c):j.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(i.onPointerLeave,y=>{var p;y.currentTarget===document.activeElement&&((p=c.onItemLeave)==null||p.call(c))}),onKeyDown:me(i.onKeyDown,y=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(Ic.includes(y.key)&&f(),y.key===" "&&y.preventDefault())})})})})});ri.displayName=Lt;var nt="SelectItemText",ni=m.forwardRef((s,t)=>{const{__scopeSelect:a,className:r,style:n,...l}=s,i=Rs(nt,a),o=Ms(nt,a),c=ai(nt,a),d=Oc(nt,a),[g,v]=m.useState(null),x=ze(t,f=>v(f),c.onItemTextChange,f=>{var y;return(y=o.itemTextRefCallback)==null?void 0:y.call(o,f,c.value,c.disabled)}),h=g==null?void 0:g.textContent,b=m.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:u,onNativeOptionRemove:j}=d;return Ds(()=>(u(b),()=>j(b)),[u,j,b]),e.jsxs(e.Fragment,{children:[e.jsx(_e.span,{id:c.textId,...l,ref:x}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ea.createPortal(l.children,i.valueNode):null]})});ni.displayName=nt;var ii="SelectItemIndicator",li=m.forwardRef((s,t)=>{const{__scopeSelect:a,...r}=s;return ai(ii,a).isSelected?e.jsx(_e.span,{"aria-hidden":!0,...r,ref:t}):null});li.displayName=ii;var va="SelectScrollUpButton",oi=m.forwardRef((s,t)=>{const a=Ms(va,s.__scopeSelect),r=Ba(va,s.__scopeSelect),[n,l]=m.useState(!1),i=ze(t,r.onScrollButtonChange);return Ds(()=>{if(a.viewport&&a.isPositioned){let o=function(){const d=c.scrollTop>0;l(d)};const c=a.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[a.viewport,a.isPositioned]),n?e.jsx(di,{...s,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=a;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});oi.displayName=va;var ja="SelectScrollDownButton",ci=m.forwardRef((s,t)=>{const a=Ms(ja,s.__scopeSelect),r=Ba(ja,s.__scopeSelect),[n,l]=m.useState(!1),i=ze(t,r.onScrollButtonChange);return Ds(()=>{if(a.viewport&&a.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,g=Math.ceil(c.scrollTop)<d;l(g)};const c=a.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[a.viewport,a.isPositioned]),n?e.jsx(di,{...s,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=a;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});ci.displayName=ja;var di=m.forwardRef((s,t)=>{const{__scopeSelect:a,onAutoScroll:r,...n}=s,l=Ms("SelectScrollButton",a),i=m.useRef(null),o=Jt(a),c=m.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Ds(()=>{var g;const d=o().find(v=>v.ref.current===document.activeElement);(g=d==null?void 0:d.ref.current)==null||g.scrollIntoView({block:"nearest"})},[o]),e.jsx(_e.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:me(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:me(n.onPointerMove,()=>{var d;(d=l.onItemLeave)==null||d.call(l),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:me(n.onPointerLeave,()=>{c()})})}),Qc="SelectSeparator",mi=m.forwardRef((s,t)=>{const{__scopeSelect:a,...r}=s;return e.jsx(_e.div,{"aria-hidden":!0,...r,ref:t})});mi.displayName=Qc;var ya="SelectArrow",Yc=m.forwardRef((s,t)=>{const{__scopeSelect:a,...r}=s,n=Xt(a),l=Rs(ya,a),i=Ms(ya,a);return l.open&&i.position==="popper"?e.jsx($r,{...n,...r,ref:t}):null});Yc.displayName=ya;function ui(s){return s===""||s===void 0}var xi=m.forwardRef((s,t)=>{const{value:a,...r}=s,n=m.useRef(null),l=ze(t,n),i=qa(a);return m.useEffect(()=>{const o=n.current,c=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==a&&g){const v=new Event("change",{bubbles:!0});g.call(o,a),o.dispatchEvent(v)}},[i,a]),e.jsx(Ol,{asChild:!0,children:e.jsx("select",{...r,ref:l,defaultValue:a})})});xi.displayName="BubbleSelect";function hi(s){const t=$l(s),a=m.useRef(""),r=m.useRef(0),n=m.useCallback(i=>{const o=a.current+i;t(o),function c(d){a.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),l=m.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,n,l]}function gi(s,t,a){const n=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,l=a?s.indexOf(a):-1;let i=Zc(s,Math.max(l,0));n.length===1&&(i=i.filter(d=>d!==a));const c=i.find(d=>d.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function Zc(s,t){return s.map((a,r)=>s[(t+r)%s.length])}var Jc=qn,pi=Vn,Xc=Gn,ed=Kn,sd=Wn,fi=Qn,td=Xn,vi=ti,ji=ri,ad=ni,rd=li,yi=oi,bi=ci,Ni=mi;const Ie=Jc,Re=Xc,De=m.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(pi,{ref:r,className:z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(ed,{asChild:!0,children:e.jsx(Aa,{className:"h-4 w-4 opacity-50"})})]}));De.displayName=pi.displayName;const wi=m.forwardRef(({className:s,...t},a)=>e.jsx(yi,{ref:a,className:z("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(cn,{className:"h-4 w-4"})}));wi.displayName=yi.displayName;const _i=m.forwardRef(({className:s,...t},a)=>e.jsx(bi,{ref:a,className:z("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Aa,{className:"h-4 w-4"})}));_i.displayName=bi.displayName;const Ae=m.forwardRef(({className:s,children:t,position:a="popper",...r},n)=>e.jsx(sd,{children:e.jsxs(fi,{ref:n,className:z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...r,children:[e.jsx(wi,{}),e.jsx(td,{className:z("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(_i,{})]})}));Ae.displayName=fi.displayName;const nd=m.forwardRef(({className:s,...t},a)=>e.jsx(vi,{ref:a,className:z("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));nd.displayName=vi.displayName;const W=m.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(ji,{ref:r,className:z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(rd,{children:e.jsx(Vt,{className:"h-4 w-4"})})}),e.jsx(ad,{children:t})]}));W.displayName=ji.displayName;const id=m.forwardRef(({className:s,...t},a)=>e.jsx(Ni,{ref:a,className:z("-mx-1 my-1 h-px bg-muted",s),...t}));id.displayName=Ni.displayName;const ld=()=>{const s=xt(),{toast:t}=Qe(),[a,r]=m.useState("home"),[n,l]=m.useState({line1:"",line2:"",city:"",pincode:"",landmark:"",type:"home",customName:""}),i=["New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia"],o=d=>{l({...n,[d.target.name]:d.target.value})},c=d=>{d.preventDefault(),console.log("Address submitted:",n),t({title:"Address saved successfully!",description:"Welcome to FoodieExpress! Let's explore."}),s("/home")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(pe,{to:"/signup",className:"mr-4",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Delivery Address"})]}),e.jsxs(k,{className:"shadow-lg border-0",children:[e.jsxs(V,{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-orange-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ee,{className:"h-8 w-8 text-orange-500"})}),e.jsx(H,{className:"text-xl text-gray-800",children:"Set Your Location"}),e.jsx("p",{className:"text-gray-600",children:"We'll deliver to this address"})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"line1",children:"Address Line 1"}),e.jsx(B,{id:"line1",name:"line1",value:n.line1,onChange:o,placeholder:"House no, Building name, Floor",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"line2",children:"Address Line 2"}),e.jsx(B,{id:"line2",name:"line2",value:n.line2,onChange:o,placeholder:"Area, Layout name",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"city",children:"City"}),e.jsxs(Ie,{onValueChange:d=>l({...n,city:d}),children:[e.jsx(De,{children:e.jsx(Re,{placeholder:"Select city"})}),e.jsx(Ae,{children:i.map(d=>e.jsx(W,{value:d.toLowerCase(),children:d},d))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"pincode",children:"Pincode"}),e.jsx(B,{id:"pincode",name:"pincode",value:n.pincode,onChange:o,placeholder:"123456",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"landmark",children:"Nearest Landmark"}),e.jsx(B,{id:"landmark",name:"landmark",value:n.landmark,onChange:o,placeholder:"Mall, Hospital, School"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(I,{children:"Save as"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(N,{type:"button",variant:a==="home"?"default":"outline",className:`h-16 flex flex-col items-center space-y-1 ${a==="home"?"bg-orange-500 hover:bg-orange-600":""}`,onClick:()=>{r("home"),l({...n,type:"home"})},children:[e.jsx(Ia,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Home"})]}),e.jsxs(N,{type:"button",variant:a==="office"?"default":"outline",className:`h-16 flex flex-col items-center space-y-1 ${a==="office"?"bg-orange-500 hover:bg-orange-600":""}`,onClick:()=>{r("office"),l({...n,type:"office"})},children:[e.jsx(dn,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Office"})]}),e.jsxs(N,{type:"button",variant:a==="other"?"default":"outline",className:`h-16 flex flex-col items-center space-y-1 ${a==="other"?"bg-orange-500 hover:bg-orange-600":""}`,onClick:()=>{r("other"),l({...n,type:"other"})},children:[e.jsx(Ce,{className:"h-5 w-5"}),e.jsx("span",{className:"text-xs",children:"Other"})]})]})]}),a==="other"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"customName",children:"Custom Name"}),e.jsx(B,{id:"customName",name:"customName",value:n.customName,onChange:o,placeholder:"e.g., Friend's Place",required:!0})]}),e.jsx(N,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-lg",children:"Save Address & Continue"})]})})]})]})})},od=()=>{const s=xt(),{toast:t}=Qe(),{signIn:a}=Ve(),[r,n]=m.useState(!1),[l,i]=m.useState(!1),[o,c]=m.useState({email:"",password:""}),d=x=>{c({...o,[x.target.name]:x.target.value})},g=async x=>{x.preventDefault(),i(!0);try{await a(o.email,o.password),t({title:"Welcome back!",description:"You've been signed in successfully."}),s("/home")}catch(h){t({title:"Sign in failed",description:h.message||"Please check your credentials and try again.",variant:"destructive"})}finally{i(!1)}},v=()=>{t({title:"Password reset",description:"Password reset functionality will be available soon."})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(pe,{to:"/",className:"mr-4",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sign In"})]}),e.jsxs(k,{className:"shadow-lg border-0",children:[e.jsxs(V,{className:"text-center",children:[e.jsx(H,{className:"text-xl text-gray-800",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your Seabites account"})]}),e.jsxs(T,{children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"email",name:"email",type:"email",value:o.email,onChange:d,placeholder:"john@example.com",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{id:"password",name:"password",type:r?"text":"password",value:o.password,onChange:d,placeholder:"Enter your password",className:"pl-10 pr-10",required:!0}),e.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>n(!r),children:r?e.jsx(et,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-sm text-orange-500 hover:text-orange-600 p-0 bg-transparent border-none underline cursor-pointer",onClick:v,children:"Forgot password?"})}),e.jsx(N,{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3 rounded-lg",disabled:l,children:l?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-white px-2 text-gray-500",children:"Or"})})]}),e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"outline",className:"w-full mt-4 border-gray-300 text-gray-700 hover:bg-gray-50",children:"Continue as Guest"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(pe,{to:"/signup",className:"text-orange-500 hover:text-orange-600 font-medium",children:"Sign up"})]})})]})]})]})})},cd=pt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function G({className:s,variant:t,...a}){return e.jsx("div",{className:z(cd({variant:t}),s),...a})}var Va="Switch",[dd,Vu]=ut(Va),[md,ud]=dd(Va),Ci=m.forwardRef((s,t)=>{const{__scopeSwitch:a,name:r,checked:n,defaultChecked:l,required:i,disabled:o,value:c="on",onCheckedChange:d,form:g,...v}=s,[x,h]=m.useState(null),b=ze(t,p=>h(p)),u=m.useRef(!1),j=x?g||!!x.closest("form"):!0,[f=!1,y]=Et({prop:n,defaultProp:l,onChange:d});return e.jsxs(md,{scope:a,checked:f,disabled:o,children:[e.jsx(_e.button,{type:"button",role:"switch","aria-checked":f,"aria-required":i,"data-state":ki(f),"data-disabled":o?"":void 0,disabled:o,value:c,...v,ref:b,onClick:me(s.onClick,p=>{y(_=>!_),j&&(u.current=p.isPropagationStopped(),u.current||p.stopPropagation())})}),j&&e.jsx(xd,{control:x,bubbles:!u.current,name:r,value:c,checked:f,required:i,disabled:o,form:g,style:{transform:"translateX(-100%)"}})]})});Ci.displayName=Va;var Si="SwitchThumb",Fi=m.forwardRef((s,t)=>{const{__scopeSwitch:a,...r}=s,n=ud(Si,a);return e.jsx(_e.span,{"data-state":ki(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:t})});Fi.displayName=Si;var xd=s=>{const{control:t,checked:a,bubbles:r=!0,...n}=s,l=m.useRef(null),i=qa(a),o=zr(t);return m.useEffect(()=>{const c=l.current,d=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(d,"checked").set;if(i!==a&&v){const x=new Event("click",{bubbles:r});v.call(c,a),c.dispatchEvent(x)}},[i,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:l,style:{...s.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ki(s){return s?"checked":"unchecked"}var Pi=Ci,hd=Fi;const ts=m.forwardRef(({className:s,...t},a)=>e.jsx(Pi,{className:z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:a,children:e.jsx(hd,{className:z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ts.displayName=Pi.displayName;const gd=({src:s,alt:t,className:a="",fallbackSrc:r="/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",showPlaceholder:n=!0,onError:l,onLoad:i})=>{const[o,c]=m.useState(s),[d,g]=m.useState("loading"),[v,x]=m.useState(!1),h=m.useRef(null);m.useEffect(()=>{c(s),g("loading"),x(!1)},[s]);const b=()=>{g("loaded"),i==null||i()},u=()=>{!v&&r&&r!==o?(c(r),x(!0),g("loading")):(g("error"),l==null||l())};return d==="error"&&n?e.jsx("div",{className:`bg-neutral-100 flex items-center justify-center ${a}`,children:e.jsx(ds,{className:"w-8 h-8 text-neutral-400"})}):e.jsxs(e.Fragment,{children:[e.jsx("img",{ref:h,src:o,alt:t,className:`${a} ${d==="loading"?"opacity-0":"opacity-100"} transition-opacity duration-300`,onLoad:b,onError:u,style:{display:d==="error"?"none":"block"}}),d==="loading"&&e.jsx("div",{className:`absolute inset-0 bg-neutral-100 animate-pulse flex items-center justify-center ${a}`,children:e.jsx(ds,{className:"w-8 h-8 text-neutral-400"})})]})},pd=({product:s,onClose:t,onAddToCart:a,cartQuantity:r,onUpdateQuantity:n})=>e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-end",children:e.jsxs("div",{className:"bg-white w-full rounded-t-2xl max-h-[80vh] overflow-y-auto animate-slide-in-right",children:[e.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Item Details"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(os,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(gd,{src:s.image,alt:s.name,className:"w-full h-48 object-cover rounded-lg"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("div",{className:`w-4 h-4 rounded-full ${s.isVeg?"bg-green-500":"bg-red-500"}`})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Be,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-gray-600",children:s.rating})]})}),e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",s.price]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:s.description})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-white p-4 border-t",children:r>0?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 bg-orange-500 rounded-lg px-4 py-2",children:[e.jsx(N,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-white hover:bg-orange-600",onClick:()=>n(s.id,r-1),children:e.jsx(Ra,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-white font-semibold text-lg",children:r}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-white hover:bg-orange-600",onClick:()=>n(s.id,r+1),children:e.jsx(Ce,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",s.price*r]})]})]}):e.jsxs(N,{className:"w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-3",onClick:()=>a(s.id),children:["Add to Cart - ",s.price]})})]})}),ws=()=>{const s=an(),{getTotalItems:t}=st(),a=[{path:"/home",icon:Ia,label:"Home"},{path:"/categories",icon:Ma,label:"Categories"},{path:"/cart",icon:Ts,label:"Cart",badge:t()},{path:"/favorites",icon:Ks,label:"Favorites"},{path:"/profile",icon:As,label:"Profile"}];return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 px-2 py-2 z-40 shadow-soft",children:e.jsx("div",{className:"flex justify-around",children:a.map(r=>e.jsxs(pe,{to:r.path,className:`nav-item flex flex-col items-center space-y-1 py-3 px-4 rounded-2xl transition-all duration-200 relative min-w-[60px] ${s.pathname===r.path?"text-brand-600 bg-brand-50":"text-neutral-500 hover:text-brand-600 hover:bg-neutral-50"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(r.icon,{className:`h-6 w-6 transition-all duration-200 ${s.pathname===r.path?"scale-110":""}`}),r.badge!==void 0&&e.jsx(G,{className:"absolute -top-2 -right-2 h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center p-0 border-2 border-white",children:r.badge>99?"99+":r.badge})]}),e.jsx("span",{className:`text-xs font-medium transition-all duration-200 ${s.pathname===r.path?"text-brand-600":"text-neutral-500"}`,children:r.label}),s.pathname===r.path&&e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-brand-500 rounded-full"})]},r.path))})})},Ha=({id:s,name:t,description:a,price:r,originalPrice:n,image:l,rating:i,reviewCount:o,deliveryTime:c="30 min",isVeg:d,isFavorite:g=!1,discount:v,onAddToCart:x,onToggleFavorite:h,className:b=""})=>{const u=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(j);return e.jsxs("div",{className:`interactive-card food-card ${b}`,children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:l,alt:t,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("div",{className:"delivery-time bg-white/90 backdrop-blur-sm px-2 py-1 rounded-lg",children:[e.jsx(Te,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs font-medium",children:c})]})}),h&&e.jsx("button",{onClick:j=>{j.stopPropagation(),h(s)},className:"heart-button absolute top-3 right-3",children:e.jsx(Ks,{className:`w-4 h-4 transition-colors ${g?"fill-red-500 text-red-500":"text-neutral-400"}`})}),v&&e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsxs(G,{className:"bg-red-500 text-white font-bold px-2 py-1",children:[v,"% OFF"]})}),d!==void 0&&e.jsx("div",{className:"absolute bottom-3 right-3",children:e.jsx("div",{className:`w-4 h-4 border-2 flex items-center justify-center ${d?"border-green-500":"border-red-500"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${d?"bg-green-500":"bg-red-500"}`})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg text-neutral-900 leading-tight",children:t}),i&&e.jsxs("div",{className:"rating-badge ml-2 flex-shrink-0",children:[e.jsx(Be,{className:"w-3 h-3 fill-current"}),e.jsxs("span",{className:"text-xs",children:[i.toFixed(1)," ",o&&`(${o}+)`]})]})]}),a&&e.jsx("p",{className:"text-neutral-600 text-sm mb-3 line-clamp-2",children:a}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"price-tag text-neutral-900",children:u(r)}),n&&n>r&&e.jsx("span",{className:"text-neutral-400 text-sm line-through",children:u(n)})]}),e.jsx(N,{onClick:j=>{j.stopPropagation(),x(s)},size:"sm",className:"primary-button text-sm px-4 py-2 h-auto",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})]})},br=({title:s,subtitle:t,discount:a,description:r,image:n,ctaText:l="Order Now",onCTAClick:i,className:o="",promotionType:c="percentage_discount",discountType:d="percentage",discountValue:g=30,backgroundColor:v="#FF6B35",textColor:x="#FFFFFF",buyQuantity:h,getQuantity:b,minimumOrder:u})=>{const j=()=>{if(a)return a;switch(d){case"percentage":return`${g}%`;case"fixed_amount":return`${g}`;case"buy_x_get_y":return`${h}+${b}`;case"free_shipping":return"FREE";default:return`${g}%`}},f=()=>{switch(c){case"flash_sale":return e.jsx(un,{className:"w-5 h-5"});case"buy_one_get_one":return e.jsx(mn,{className:"w-5 h-5"});case"loyalty_reward":return e.jsx(Be,{className:"w-5 h-5"});case"free_delivery":return e.jsx(_s,{className:"w-5 h-5"});case"welcome_offer":return e.jsx(Ts,{className:"w-5 h-5"});default:return null}},y=()=>{switch(d){case"percentage":return"OFF";case"fixed_amount":return"OFF";case"buy_x_get_y":return"DEAL";case"free_shipping":return"DELIVERY";default:return"OFF"}},p=()=>{const _={background:`linear-gradient(135deg, ${v} 0%, ${v}dd 100%)`,color:x};switch(c){case"flash_sale":return{..._,background:"linear-gradient(135deg, #FF3B30 0%, #FF6B35 100%)",boxShadow:"0 8px 32px rgba(255, 59, 48, 0.3)"};case"seasonal_offer":return{..._,background:"linear-gradient(135deg, #34C759 0%, #30D158 100%)",boxShadow:"0 8px 32px rgba(52, 199, 89, 0.3)"};case"welcome_offer":return{..._,background:"linear-gradient(135deg, #007AFF 0%, #5AC8FA 100%)",boxShadow:"0 8px 32px rgba(0, 122, 255, 0.3)"};case"loyalty_reward":return{..._,background:"linear-gradient(135deg, #AF52DE 0%, #DA70D6 100%)",boxShadow:"0 8px 32px rgba(175, 82, 222, 0.3)"};default:return{..._,boxShadow:"0 8px 32px rgba(255, 107, 53, 0.3)"}}};return e.jsxs("div",{className:`offer-card relative overflow-hidden rounded-3xl p-6 ${o}`,style:p(),children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white rounded-full -translate-y-16 translate-x-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white rounded-full translate-y-12 -translate-x-12"})]}),c!=="percentage_discount"&&e.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1 bg-white/20 backdrop-blur-sm rounded-full px-3 py-1",children:[f(),e.jsx("span",{className:"text-xs font-semibold capitalize",children:c.replace("_"," ")})]}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[t&&e.jsx("p",{className:"text-white/90 text-sm font-medium mb-1",children:t}),e.jsx("h2",{className:"text-white text-2xl font-bold mb-2 leading-tight",children:s}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("span",{className:"text-4xl font-black",children:j()}),e.jsx("span",{className:"text-lg font-semibold ml-1",children:y()})]}),r&&e.jsx("div",{className:"text-white/80 text-sm",children:r})]}),u&&e.jsxs("p",{className:"text-white/70 text-xs mb-3",children:["Min. order ",u]}),d==="buy_x_get_y"&&h&&b&&e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 mb-3",children:e.jsxs("p",{className:"text-white text-sm font-semibold",children:["Buy ",h," Get ",b," Free!"]})}),i&&e.jsxs(N,{onClick:i,variant:"secondary",className:"bg-white text-gray-900 hover:bg-white/90 font-semibold px-6 py-2 rounded-xl shadow-lg",children:[l,e.jsx(ln,{className:"w-4 h-4 ml-2"})]})]}),e.jsxs("div",{className:"flex-shrink-0 w-32 h-32 relative",children:[e.jsx("img",{src:n,alt:s,className:"w-full h-full object-cover rounded-2xl shadow-lg"}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-white rounded-full opacity-80"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 bg-white rounded-full opacity-60"})]})]})]})},Ti=({categories:s,activeCategory:t,onCategoryChange:a,showAll:r=!0,className:n=""})=>{const l=r?[{id:"all",name:"All"},...s]:s;return e.jsx("div",{className:`flex gap-3 overflow-x-auto pb-2 ${n}`,children:l.map(i=>e.jsxs(N,{onClick:()=>a(i.id),variant:"ghost",className:`category-pill flex-shrink-0 ${t===i.id?"active":""}`,children:[i.icon&&e.jsx("span",{className:"mr-2",children:i.icon}),e.jsx("span",{className:"font-medium",children:i.name})]},i.id))})},Ei=s=>rs({queryKey:["categories",s],queryFn:async()=>{let t=M.from("categories").select("*").eq("is_visible",!0).order("sort_order",{ascending:!0});t=t.eq("type",s);const{data:a,error:r}=await t;if(r)throw console.error("Error fetching categories:",r),r;return a}}),Ot=(s,t)=>rs({queryKey:["products",s,t],queryFn:async()=>{let a=M.from("products").select(`
          *,
          categories (
            id,
            name,
            type
          )
        `).eq("is_available",!0);s&&(a=a.eq("category_id",s)),a=a.eq("type",t);const{data:r,error:n}=await a;if(n)throw console.error("Error fetching products:",n),n;return r}}),fd=()=>rs({queryKey:["promotions"],queryFn:async()=>{const{data:s,error:t}=await M.from("promotions").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(t)throw console.error("Error fetching promotions:",t),t;return s}}),Nr=s=>{let t;const a=new Set,r=(d,g)=>{const v=typeof d=="function"?d(t):d;if(!Object.is(v,t)){const x=t;t=g??(typeof v!="object"||v===null)?v:Object.assign({},t,v),a.forEach(h=>h(t,x))}},n=()=>t,o={setState:r,getState:n,getInitialState:()=>c,subscribe:d=>(a.add(d),()=>a.delete(d))},c=t=s(r,n,o);return o},vd=s=>s?Nr(s):Nr,jd=s=>s;function yd(s,t=jd){const a=O.useSyncExternalStore(s.subscribe,()=>t(s.getState()),()=>t(s.getInitialState()));return O.useDebugValue(a),a}const bd=s=>{const t=vd(s),a=r=>yd(t,r);return Object.assign(a,t),a},Nd=s=>bd;function wd(s,t){let a;try{a=s()}catch{return}return{getItem:n=>{var l;const i=c=>c===null?null:JSON.parse(c,void 0),o=(l=a.getItem(n))!=null?l:null;return o instanceof Promise?o.then(i):i(o)},setItem:(n,l)=>a.setItem(n,JSON.stringify(l,void 0)),removeItem:n=>a.removeItem(n)}}const ba=s=>t=>{try{const a=s(t);return a instanceof Promise?a:{then(r){return ba(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return ba(r)(a)}}}},_d=(s,t)=>(a,r,n)=>{let l={storage:wd(()=>localStorage),partialize:u=>u,version:0,merge:(u,j)=>({...j,...u}),...t},i=!1;const o=new Set,c=new Set;let d=l.storage;if(!d)return s((...u)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),a(...u)},r,n);const g=()=>{const u=l.partialize({...r()});return d.setItem(l.name,{state:u,version:l.version})},v=n.setState;n.setState=(u,j)=>{v(u,j),g()};const x=s((...u)=>{a(...u),g()},r,n);n.getInitialState=()=>x;let h;const b=()=>{var u,j;if(!d)return;i=!1,o.forEach(y=>{var p;return y((p=r())!=null?p:x)});const f=((j=l.onRehydrateStorage)==null?void 0:j.call(l,(u=r())!=null?u:x))||void 0;return ba(d.getItem.bind(d))(l.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==l.version){if(l.migrate){const p=l.migrate(y.state,y.version);return p instanceof Promise?p.then(_=>[!0,_]):[!0,p]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var p;const[_,E]=y;if(h=l.merge(E,(p=r())!=null?p:x),a(h,!0),_)return g()}).then(()=>{f==null||f(h,void 0),h=r(),i=!0,c.forEach(y=>y(h))}).catch(y=>{f==null||f(void 0,y)})};return n.persist={setOptions:u=>{l={...l,...u},u.storage&&(d=u.storage)},clearStorage:()=>{d==null||d.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>b(),hasHydrated:()=>i,onHydrate:u=>(o.add(u),()=>{o.delete(u)}),onFinishHydration:u=>(c.add(u),()=>{c.delete(u)})},l.skipHydration||b(),h||x},Cd=_d;class Sd{constructor(){vs(this,"cache",new Map);vs(this,"CACHE_DURATION",5*60*1e3);vs(this,"API_RATE_LIMIT",100);vs(this,"requestCount",0);vs(this,"requestResetTime",Date.now()+6e4)}async getCurrentLocation(){return new Promise((t,a)=>{if(!navigator.geolocation){a(new Error("Geolocation not supported"));return}navigator.geolocation.getCurrentPosition(async r=>{try{const{latitude:n,longitude:l}=r.coords,i=await this.reverseGeocode(n,l);t({coordinates:{lat:n,lng:l},address:i.address||"Unknown address",city:i.city||"Unknown city",country:i.country||"Unknown country",timestamp:Date.now()})}catch(n){a(this.mapGeolocationError(n))}},r=>{a(this.mapGeolocationError(r))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})}async reverseGeocode(t,a){const r=`reverse_${t.toFixed(6)}_${a.toFixed(6)}`,n=this.getFromCache(r);if(n)return n;if(!this.checkRateLimit())return console.warn("Rate limit exceeded, using fallback address"),this.getFallbackAddress(t,a);if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("192.168."))return console.warn("Development environment detected, using fallback address to avoid CORS issues"),this.getFallbackAddress(t,a);try{const i=new AbortController,o=setTimeout(()=>i.abort(),5e3),c=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${t}&lon=${a}&format=json&addressdetails=1&accept-language=en`,{signal:i.signal,headers:{Accept:"application/json"}});if(clearTimeout(o),!c.ok)return console.warn(`Nominatim API returned ${c.status}, using fallback address`),this.getFallbackAddress(t,a);const d=await c.json(),g=this.formatNominatimResponse(d);return this.setCache(r,g),g}catch(i){return console.warn("Geocoding API unavailable, using fallback address:",i instanceof Error?i.message:"Unknown error"),this.getFallbackAddress(t,a)}}async searchAddresses(t){if(!t||t.trim().length<3)return[];const a=`search_${t.toLowerCase().trim()}`,r=this.getFromCache(a);if(r)return r;if(!this.checkRateLimit())return console.warn("Rate limit exceeded for search"),[];if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes("192.168."))return console.warn("Development environment detected, search disabled to avoid CORS issues"),[];try{const l=new AbortController,i=setTimeout(()=>l.abort(),5e3),o=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(t)}&format=json&addressdetails=1&limit=5&accept-language=en`,{signal:l.signal,headers:{Accept:"application/json"}});if(clearTimeout(i),!o.ok)return console.warn(`Nominatim search API returned ${o.status}`),[];const d=(await o.json()).map(g=>this.formatNominatimSearchResult(g));return this.setCache(a,d),d}catch(l){return console.warn("Search API unavailable:",l instanceof Error?l.message:"Unknown error"),[]}}mapGeolocationError(t){switch(t.code){case t.PERMISSION_DENIED:return new Error("Location access denied by user");case t.POSITION_UNAVAILABLE:return new Error("Location information unavailable");case t.TIMEOUT:return new Error("Location request timed out");default:return new Error("Unknown location error")}}formatNominatimResponse(t){const a=t.address||{},r=[];return a.house_number&&r.push(a.house_number),a.road&&r.push(a.road),a.neighbourhood&&r.push(a.neighbourhood),{address:(r.length>0?r.join(" "):t.display_name)||"Unknown address",city:a.city||a.town||a.village||"Unknown city",country:a.country||"Unknown country"}}formatNominatimSearchResult(t){const a=t.address||{};return{coordinates:{lat:parseFloat(t.lat),lng:parseFloat(t.lon)},address:t.display_name||"Unknown address",city:a.city||a.town||a.village||"Unknown city",country:a.country||"Unknown country",timestamp:Date.now()}}getFromCache(t){const a=this.cache.get(t);return a&&Date.now()-a.timestamp<this.CACHE_DURATION?a.data:(this.cache.delete(t),null)}setCache(t,a){if(this.cache.set(t,{data:a,timestamp:Date.now()}),this.cache.size>100){const r=Array.from(this.cache.entries());r.sort((n,l)=>n[1].timestamp-l[1].timestamp),r.slice(0,r.length-100).forEach(([n])=>{this.cache.delete(n)})}}checkRateLimit(){const t=Date.now();return t>this.requestResetTime&&(this.requestCount=0,this.requestResetTime=t+6e4),this.requestCount>=this.API_RATE_LIMIT?!1:(this.requestCount++,!0)}getDefaultLocation(){return{coordinates:{lat:40.7128,lng:-74.006},address:"New York, NY",city:"New York",country:"United States",timestamp:Date.now()}}getFallbackAddress(t,a){let r="Unknown Country",n="Unknown City",l="Selected Area",i="";t>=12.8&&t<=13.2&&a>=77.4&&a<=77.8?(r="India",n="Bangalore",t>=12.89&&t<=12.92&&a>=77.59&&a<=77.62?(l="Koramangala",i="Near Koramangala Market"):t>=12.93&&t<=12.97&&a>=77.6&&a<=77.65?(l="Indiranagar",i="Near CMH Road"):t>=12.94&&t<=12.98&&a>=77.55&&a<=77.6?(l="MG Road",i="Central Business District"):t>=12.97&&t<=13.02&&a>=77.55&&a<=77.62?(l="Whitefield",i="IT Hub Area"):t>=12.92&&t<=12.96&&a>=77.57&&a<=77.62?(l="HSR Layout",i="Residential Area"):t>=12.85&&t<=12.89&&a>=77.58&&a<=77.63?(l="BTM Layout",i="Near Silk Board"):t>=12.95&&t<=13&&a>=77.63&&a<=77.68?(l="Marathahalli",i="Outer Ring Road"):t>=12.9&&t<=12.95&&a>=77.62&&a<=77.67?(l="Electronic City",i="IT Park Area"):t>=13&&t<=13.06&&a>=77.56&&a<=77.62?(l="Hebbal",i="Near Outer Ring Road"):t>=12.95&&t<=12.99&&a>=77.49&&a<=77.55?(l="Rajajinagar",i="West Bangalore"):t>=12.92&&t<=12.97&&a>=77.52&&a<=77.58?(l="Malleshwaram",i="Traditional Area"):t>=12.97&&t<=13.02&&a>=77.58&&a<=77.63?(l="Banaswadi",i="Near Hennur Road"):t>=13&&a>=77.6?(l="North Bangalore",i="Outer Ring Road Area"):t<=12.9&&a>=77.6?(l="South Bangalore",i="Electronic City Direction"):a<=77.5?(l="West Bangalore",i="Rajajinagar Side"):(l="Central Bangalore",i="City Center Area")):t>=6&&t<=37&&a>=68&&a<=97?(r="India",t>=19&&t<=19.5&&a>=72.5&&a<=73?(n="Mumbai",l="Mumbai Area",i="Financial Capital"):t>=28&&t<=29&&a>=77&&a<=77.5?(n="Delhi",l="Delhi NCR",i="National Capital"):t>=13&&t<=13.5&&a>=80&&a<=80.5?(n="Chennai",l="Chennai Area",i="South India Metro"):(n="Indian City",l="Selected Area",i="Your Location")):t>=25&&t<=49&&a>=-125&&a<=-66?(r="United States",t>=40.5&&t<=41&&a>=-74.5&&a<=-73.5?(n="New York",l="NYC Area",i="Manhattan District"):t>=34&&t<=34.5&&a>=-118.5&&a<=-118?(n="Los Angeles",l="LA Area",i="California"):(n="US City",l="Selected Area",i="Your Location")):(r="Location Selected",n="Selected Area",l="Your Location",i=`${t.toFixed(4)}, ${a.toFixed(4)}`);const o=t.toFixed(4),c=a.toFixed(4);return{address:i||`Location ${o}, ${c}`,city:l,country:`${n}, ${r}`}}}const St=new Sd,Di=Nd()(Cd((s,t)=>({location:null,loading:!1,error:null,setLocation:a=>s({location:a,error:null}),setLoading:a=>s({loading:a}),setError:a=>s({error:a,loading:!1}),clearError:()=>s({error:null}),getCurrentLocation:async()=>{const{setLoading:a,setLocation:r,setError:n}=t();try{a(!0),n(null);const l=await St.getCurrentLocation();r(l)}catch(l){console.error("Get current location error:",l);const i=l instanceof Error?l.message:"Failed to get current location";n(i);const o=St.getDefaultLocation();r(o)}finally{a(!1)}},updateLocation:async a=>{const{setLoading:r,setLocation:n,setError:l}=t();try{r(!0),l(null);const i=await St.reverseGeocode(a.lat,a.lng),o={coordinates:a,address:i.address||"Unknown address",city:i.city||"Unknown city",country:i.country||"Unknown country",timestamp:Date.now()};n(o),i.city==="Selected City"&&i.country==="Location Selected"&&l("Location selected (address details temporarily unavailable)")}catch(i){console.error("Update location error:",i);const o={coordinates:a,address:`Location (${a.lat.toFixed(4)}, ${a.lng.toFixed(4)})`,city:"Selected Location",country:"Location Selected",timestamp:Date.now()};n(o),window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||l("Location selected (address details temporarily unavailable)")}finally{r(!1)}},searchAddresses:async a=>{try{return await St.searchAddresses(a)}catch(r){console.error("Search addresses error:",r);const n=r instanceof Error?r.message:"Failed to search addresses";return t().setError(n),[]}},setManualLocation:a=>{s({location:a,error:null})},initializeLocation:async()=>{const{location:a,getCurrentLocation:r}=t();a?Date.now()-a.timestamp>864e5&&await r():await r()}}),{name:"seabites-location",partialize:s=>({location:s.location})})),dt=qr,Ga=Br,Fd=Ur,Ai=m.forwardRef(({className:s,...t},a)=>e.jsx(Sa,{ref:a,className:z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Ai.displayName=Sa.displayName;const Zs=m.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(Fd,{children:[e.jsx(Ai,{}),e.jsxs(Fa,{ref:r,className:z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(ka,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(os,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zs.displayName=Fa.displayName;const Js=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});Js.displayName="DialogHeader";const $t=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});$t.displayName="DialogFooter";const Xs=m.forwardRef(({className:s,...t},a)=>e.jsx(Pa,{ref:a,className:z("text-lg font-semibold leading-none tracking-tight",s),...t}));Xs.displayName=Pa.displayName;const Na=m.forwardRef(({className:s,...t},a)=>e.jsx(Ta,{ref:a,className:z("text-sm text-muted-foreground",s),...t}));Na.displayName=Ta.displayName;const wr=({isOpen:s,onClose:t,onLocationSelect:a,initialPosition:r=[28.6139,77.209]})=>{const[n,l]=m.useState(r),i=()=>{a(n[0],n[1]),t()};return e.jsx(dt,{open:s,onOpenChange:t,children:e.jsxs(Zs,{className:"max-w-4xl h-[80vh]",children:[e.jsx(Js,{children:e.jsxs(Xs,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5"}),"Select Your Location"]})}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("div",{className:"w-full h-96 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ee,{className:"h-12 w-12 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"Interactive map would be displayed here"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Selected: ",n[0].toFixed(4),", ",n[1].toFixed(4)]})]})})}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsx(N,{variant:"outline",onClick:t,children:"Cancel"}),e.jsx(N,{onClick:i,children:"Confirm Location"})]})]})})},kd=({className:s="",showChangeButton:t=!0,variant:a="header"})=>{const{location:r,loading:n,error:l,getCurrentLocation:i,clearError:o,initializeLocation:c}=Di(),[d,g]=m.useState(!1),{toast:v}=Qe();m.useEffect(()=>{c()},[c]),m.useEffect(()=>{l&&(v({title:"Location Error",description:l,variant:"destructive"}),o())},[l,v,o]);const x=async()=>{try{await i(),v({title:"Location Updated",description:"Your current location has been detected."})}catch{}},h=()=>{g(!0)},b=n?"Detecting...":(r==null?void 0:r.city)||"Select Location",u=n?"Getting your location":(r==null?void 0:r.address)||"Tap to set delivery location";return a==="compact"?e.jsxs(e.Fragment,{children:[e.jsxs(N,{variant:"ghost",className:`flex items-center gap-2 text-left p-2 hover:bg-gray-50 rounded-xl ${s}`,onClick:h,disabled:n,children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-xl flex items-center justify-center",children:n?e.jsx(Pe,{className:"h-4 w-4 text-primary-foreground animate-spin"}):e.jsx(Ee,{className:"h-4 w-4 text-primary-foreground"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:n?"Locating...":"Deliver to"}),e.jsx("span",{className:"text-sm font-medium text-foreground truncate max-w-32",children:b}),!n&&(r==null?void 0:r.address)&&e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-32",children:r.address})]})]}),e.jsx(wr,{isOpen:d,onClose:()=>g(!1)})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex items-center justify-between ${s}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-xl flex items-center justify-center",children:n?e.jsx(Pe,{className:"h-5 w-5 text-primary-foreground animate-spin"}):e.jsx(Ee,{className:"h-5 w-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-foreground",children:n?"Detecting location...":b}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&e.jsx(N,{variant:"ghost",size:"sm",className:"text-primary font-medium",onClick:h,disabled:n,children:"Change"}),!r&&!n&&e.jsx(N,{variant:"ghost",size:"sm",className:"text-primary font-medium",onClick:x,children:"Detect"}),e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center relative",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full absolute top-1 right-1"})})]})]}),e.jsx(wr,{isOpen:d,onClose:()=>g(!1)})]})},Pd=()=>{const{toast:s}=Qe();Ve();const[t,a]=m.useState(!1),[r,n]=m.useState(null),[l,i]=m.useState("all"),[o,c]=m.useState(""),{cartItems:d,addToCart:g,updateQuantity:v,getTotalItems:x}=st(),{isFavorite:h,toggleFavorite:b}=Yt(),{data:u=[]}=Ei("food"),{data:j=[],isLoading:f}=Ot(l==="all"?void 0:l,"food");Ot(void 0,"food");const{data:y=[]}=fd(),p=u.map(P=>({id:P.id,name:P.name,image_url:P.image_url})),_=j.filter(P=>{const L=P.name.toLowerCase().includes(o.toLowerCase()),q=!t||P.is_veg,se=l==="all"||P.category_id===l;return L&&q&&se&&P.is_available}),E=P=>{const L=_.find(q=>q.id===P);L&&g({id:L.id,name:L.name,price:L.price,image:L.image_url||"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",isVeg:L.is_veg,description:L.description})},C=P=>{const L=_.find(q=>q.id===P);if(L){const q=u.find(se=>se.id===L.category_id);b({id:L.id,name:L.name,description:L.description,price:L.price,image:L.image_url||"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",rating:L.rating,deliveryTime:"25-35 min",isVeg:L.is_veg,category:q==null?void 0:q.name})}},D=P=>{const L=d.find(q=>q.id===P);return L?L.quantity:0},F=x();return e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsxs("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-50 border-b border-neutral-100",children:[e.jsx("div",{className:"mb-4",children:e.jsx(kd,{})}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),e.jsx(B,{placeholder:"Search here...",value:o,onChange:P=>c(P.target.value),className:"pl-12 pr-16 py-3 rounded-2xl border-neutral-200 bg-neutral-50 focus:bg-white transition-colors"}),e.jsx(N,{size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-brand-500 hover:bg-brand-600 rounded-xl px-4",children:e.jsx(La,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("div",{className:"px-4 py-6",children:y.length>0?e.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-2",children:y.map(P=>e.jsx(br,{title:P.title,subtitle:P.subtitle||"Delicious Savings",description:P.description,image:P.image_url||"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",className:"flex-shrink-0 w-80",onCTAClick:()=>s({title:"Promotion activated!"}),promotionType:P.promotion_type||"percentage_discount",discountType:P.discount_type||"percentage",discountValue:P.discount_value||30,backgroundColor:P.background_color||"#FF6B35",textColor:P.text_color||"#FFFFFF",buyQuantity:P.buy_quantity,getQuantity:P.get_quantity,minimumOrder:P.minimum_order_amount,ctaText:P.button_text||"Order Now"},P.id))}):e.jsx(br,{title:"Delicious Savings",subtitle:"Special Offer",discount:"30%",description:"On your first order",image:"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",onCTAClick:()=>s({title:"Welcome offer activated!"})})}),e.jsxs("div",{className:"px-4 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-bold text-xl text-neutral-900",children:"Category"}),e.jsx(N,{variant:"ghost",className:"text-brand-600 font-medium",children:"See All"})]}),e.jsx(Ti,{categories:p,activeCategory:l,onCategoryChange:i,showAll:!0})]}),e.jsx("div",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ts,{checked:t,onCheckedChange:a,className:"data-[state=checked]:bg-green-500"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Veg Only"})]})}),e.jsxs(G,{variant:"outline",className:"text-neutral-600 border-neutral-300",children:[_.length," items found"]})]})}),e.jsx("div",{className:"px-4 pb-4",children:_.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:_.map(P=>e.jsx(Ha,{id:P.id,name:P.name,description:P.description,price:P.price,image:P.image_url||"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",rating:P.rating||4.8,reviewCount:435,deliveryTime:"31 min",isVeg:P.is_veg,isFavorite:h(P.id),onAddToCart:E,onToggleFavorite:C,className:"animate-fade-in"},P.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-neutral-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-4xl",children:""})}),e.jsx("h3",{className:"font-semibold text-lg text-neutral-900 mb-2",children:"No dishes found"}),e.jsx("p",{className:"text-neutral-600",children:o?"Try searching for something else":`No ${t?"vegetarian ":""}dishes available`})]})})]}),F>0&&e.jsx("div",{className:"fixed bottom-20 left-4 right-4 z-20",children:e.jsxs(N,{className:"primary-button w-full py-4 shadow-strong",children:[e.jsx(Oa,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"flex-1 text-left",children:"View Cart"}),e.jsx(G,{className:"bg-white/20 text-white border-0",children:F})]})}),e.jsx(ws,{}),r&&e.jsx(pd,{product:r,onClose:()=>n(null),onAddToCart:E,cartQuantity:D(r.id),onUpdateQuantity:v})]})};function Td(s,t=[]){let a=[];function r(l,i){const o=m.createContext(i),c=a.length;a=[...a,i];function d(v){const{scope:x,children:h,...b}=v,u=(x==null?void 0:x[s][c])||o,j=m.useMemo(()=>b,Object.values(b));return e.jsx(u.Provider,{value:j,children:h})}function g(v,x){const h=(x==null?void 0:x[s][c])||o,b=m.useContext(h);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${v}\` must be used within \`${l}\``)}return d.displayName=l+"Provider",[d,g]}const n=()=>{const l=a.map(i=>m.createContext(i));return function(o){const c=(o==null?void 0:o[s])||l;return m.useMemo(()=>({[`__scope${s}`]:{...o,[s]:c}}),[o,c])}};return n.scopeName=s,[r,Ed(n,...t)]}function Ed(...s){const t=s[0];if(s.length===1)return t;const a=()=>{const r=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(l){const i=r.reduce((o,{useScope:c,scopeName:d})=>{const v=c(l)[`__scope${d}`];return{...o,...v}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return a.scopeName=t.scopeName,a}var Ka="Progress",Wa=100,[Dd,Hu]=Td(Ka),[Ad,Id]=Dd(Ka),Ii=m.forwardRef((s,t)=>{const{__scopeProgress:a,value:r=null,max:n,getValueLabel:l=Rd,...i}=s;(n||n===0)&&!_r(n)&&console.error(Md(`${n}`,"Progress"));const o=_r(n)?n:Wa;r!==null&&!Cr(r,o)&&console.error(Ld(`${r}`,"Progress"));const c=Cr(r,o)?r:null,d=zt(c)?l(c,o):void 0;return e.jsx(Ad,{scope:a,value:c,max:o,children:e.jsx(_e.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":zt(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Li(c,o),"data-value":c??void 0,"data-max":o,...i,ref:t})})});Ii.displayName=Ka;var Ri="ProgressIndicator",Mi=m.forwardRef((s,t)=>{const{__scopeProgress:a,...r}=s,n=Id(Ri,a);return e.jsx(_e.div,{"data-state":Li(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:t})});Mi.displayName=Ri;function Rd(s,t){return`${Math.round(s/t*100)}%`}function Li(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function zt(s){return typeof s=="number"}function _r(s){return zt(s)&&!isNaN(s)&&s>0}function Cr(s,t){return zt(s)&&!isNaN(s)&&s<=t&&s>=0}function Md(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Wa}\`.`}function Ld(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Wa} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Oi=Ii,Od=Mi;const as=m.forwardRef(({className:s,value:t,...a},r)=>e.jsx(Oi,{ref:r,className:z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...a,children:e.jsx(Od,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));as.displayName=Oi.displayName;var $d="Separator",Sr="horizontal",zd=["horizontal","vertical"],$i=m.forwardRef((s,t)=>{const{decorative:a,orientation:r=Sr,...n}=s,l=Ud(r)?r:Sr,o=a?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(_e.div,{"data-orientation":l,...o,...n,ref:t})});$i.displayName=$d;function Ud(s){return zd.includes(s)}var zi=$i;const qe=m.forwardRef(({className:s,orientation:t="horizontal",decorative:a=!0,...r},n)=>e.jsx(zi,{ref:n,decorative:a,orientation:t,className:z("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r}));qe.displayName=zi.displayName;const qd=pt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Se=m.forwardRef(({className:s,variant:t,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:z(qd({variant:t}),s),...a}));Se.displayName="Alert";const Bd=m.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:z("mb-1 font-medium leading-none tracking-tight",s),...t}));Bd.displayName="AlertTitle";const Fe=m.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:z("text-sm [&_p]:leading-relaxed",s),...t}));Fe.displayName="AlertDescription";const Os=class Os{constructor(){vs(this,"cacheExpiry",6e4);vs(this,"calculateCache",new Map)}static getInstance(){return Os.instance||(Os.instance=new Os),Os.instance}async calculateDeliveryFee(t,a,r="standard"){const n=`${t.lat},${t.lng},${a},${r}`,l=this.getCachedResult(n);if(l)return l;try{const i=await this.findDeliveryZone(t);if(!i)return{success:!1,delivery_fee:0,is_free:!1,order_total:a,error:"No delivery zone found for location"};let o=i.base_delivery_fee;const c=a>=i.free_delivery_threshold;let d=c?0:o;c||(d=await this.applyPricingRules(d,i.id,a,t,r));const g=await this.calculateDeliveryTax(d,i.id),v=g>0&&d>0?g/d*100:0,x={success:!0,delivery_fee:d,is_free:c,zone_id:i.id,zone_name:i.name,service_type:i.service_type,max_delivery_time_minutes:i.max_delivery_time_minutes,tax_rate:v,tax_amount:g,order_total:a,free_delivery_threshold:i.free_delivery_threshold};return this.cacheResult(n,x),await this.storeCalculationCache(t,a,x,i.id),x}catch(i){return console.error("Delivery calculation error:",i),{success:!1,delivery_fee:0,is_free:!1,order_total:a,error:"Failed to calculate delivery fee"}}}async findDeliveryZone(t){try{const{data:a,error:r}=await M.rpc("find_delivery_zone",{lat:t.lat,lng:t.lng});if(r)return console.error("Error finding delivery zone:",r),null;if(!a)return null;const{data:n,error:l}=await M.from("delivery_zones").select("*").eq("id",a).eq("is_active",!0).single();return l?(console.error("Error fetching zone details:",l),null):n}catch(a){return console.error("Zone finding error:",a),null}}async applyPricingRules(t,a,r,n,l){try{const{data:i,error:o}=await M.from("delivery_pricing_rules").select("*").eq("is_active",!0).or(`delivery_zone_id.is.null,delivery_zone_id.eq.${a}`).order("priority",{ascending:!0});if(o)return console.error("Error fetching pricing rules:",o),t;let c=t;for(const d of i)this.evaluateRuleCondition(d,r,n,l)&&(c=this.applyPriceAdjustment(c,d));return Math.max(0,c)}catch(i){return console.error("Pricing rules error:",i),t}}evaluateRuleCondition(t,a,r,n){var i;let l;switch(t.rule_type){case"order_value":l=a;break;case"distance":return!1;case"time":return!1;case"user_type":return l=n,((i=t.condition_value_min)==null?void 0:i.toString())===l;case"surge":return!1;default:return!1}return typeof l=="string"?!1:this.evaluateCondition(l,t.condition_operator,t.condition_value_min,t.condition_value_max)}evaluateCondition(t,a,r,n){switch(a){case">":return r!==null&&t>r;case"<":return r!==null&&t<r;case">=":return r!==null&&t>=r;case"<=":return r!==null&&t<=r;case"=":return r!==null&&t===r;case"between":return r!==null&&n!==null&&t>=r&&t<=n;default:return!1}}applyPriceAdjustment(t,a){switch(a.price_adjustment_type){case"fixed":return t+a.price_adjustment_value;case"percentage":return t*(1+a.price_adjustment_value/100);case"multiplier":return t*a.price_adjustment_value;default:return t}}async calculateDeliveryTax(t,a){if(t===0)return 0;try{const{data:r,error:n}=await M.from("tax_settings").select("*").eq("tax_category","delivery").eq("is_active",!0).or(`delivery_zone_id.is.null,delivery_zone_id.eq.${a}`);if(n)return console.error("Error fetching tax settings:",n),0;let l=0;for(const i of r)l+=t*(i.tax_rate/100);return l}catch(r){return console.error("Tax calculation error:",r),0}}getCachedResult(t){const a=this.calculateCache.get(t);return a&&Date.now()<a.expires?a.data:(this.calculateCache.delete(t),null)}cacheResult(t,a){this.calculateCache.set(t,{data:a,expires:Date.now()+this.cacheExpiry})}async storeCalculationCache(t,a,r,n){try{const l=`${t.lat}_${t.lng}_${a}_${Date.now()}`,i=new Date(Date.now()+24*60*60*1e3);await M.from("delivery_calculations").insert({cache_key:l,coordinates_lat:t.lat,coordinates_lng:t.lng,delivery_zone_id:n,order_value:a,base_fee:r.success?r.delivery_fee:0,final_delivery_fee:r.delivery_fee,tax_amount:r.tax_amount||0,is_free_delivery:r.is_free,expires_at:i.toISOString(),calculation_metadata:{user_agent:typeof navigator<"u"?navigator.userAgent:"server",timestamp:new Date().toISOString(),cache_version:"1.0"}})}catch(l){console.warn("Failed to store calculation cache:",l)}}clearExpiredCache(){const t=Date.now();for(const[a,r]of this.calculateCache.entries())t>=r.expires&&this.calculateCache.delete(a)}getCacheStats(){return{size:this.calculateCache.size,hitRate:0}}};vs(Os,"instance");let wa=Os;function Vd(){const[s]=m.useState(()=>wa.getInstance());return{calculateFee:m.useCallback(async(a,r,n="standard")=>await s.calculateDeliveryFee(a,r,n),[s]),getCacheStats:()=>s.getCacheStats(),clearExpiredCache:()=>s.clearExpiredCache()}}function Qa(){const s=Cs(),{data:t,isLoading:a,error:r}=rs({queryKey:["delivery-settings"],queryFn:async()=>{const{data:i,error:o}=await M.from("delivery_settings").select("*").limit(1).single();if(o){if(o.code==="PGRST116")return null;throw o}return i},staleTime:5*60*1e3}),n=xe({mutationFn:async i=>{const{data:o,error:c}=await M.from("delivery_settings").upsert(i).select().single();if(c)throw c;return o},onSuccess:()=>{s.invalidateQueries({queryKey:["delivery-settings"]})}}),l=xe({mutationFn:async i=>{const{error:o}=await M.from("delivery_settings").update({emergency_shutdown:i}).eq("id",(t==null?void 0:t.id)||"");if(o)throw o},onSuccess:()=>{s.invalidateQueries({queryKey:["delivery-settings"]})}});return{settings:t,isLoading:a,error:r,updateSettings:n.mutate,isUpdating:n.isPending,updateError:n.error,emergencyShutdown:l.mutate,isShuttingDown:l.isPending}}function ea(){const s=Cs(),{data:t,isLoading:a,error:r}=rs({queryKey:["delivery-zones"],queryFn:async()=>{const{data:c,error:d}=await M.from("delivery_zones").select("*").order("priority_level",{ascending:!1});if(d)throw d;return c},staleTime:10*60*1e3}),n=xe({mutationFn:async c=>{const{data:d,error:g}=await M.from("delivery_zones").insert(c).select().single();if(g)throw g;return d},onSuccess:()=>{s.invalidateQueries({queryKey:["delivery-zones"]})}}),l=xe({mutationFn:async({id:c,...d})=>{const{data:g,error:v}=await M.from("delivery_zones").update(d).eq("id",c).select().single();if(v)throw v;return g},onSuccess:()=>{s.invalidateQueries({queryKey:["delivery-zones"]})}}),i=xe({mutationFn:async c=>{const{error:d}=await M.from("delivery_zones").delete().eq("id",c);if(d)throw d},onSuccess:()=>{s.invalidateQueries({queryKey:["delivery-zones"]})}}),o=xe({mutationFn:async({id:c,is_active:d})=>{const{error:g}=await M.from("delivery_zones").update({is_active:d}).eq("id",c);if(g)throw g},onSuccess:()=>{s.invalidateQueries({queryKey:["delivery-zones"]})}});return{zones:t,isLoading:a,error:r,createZone:n.mutate,isCreating:n.isPending,createError:n.error,updateZone:l.mutate,isUpdating:l.isPending,updateError:l.error,deleteZone:i.mutate,isDeleting:i.isPending,deleteError:i.error,toggleZoneStatus:o.mutate,isToggling:o.isPending}}function Ya(){const s=Cs(),{data:t,isLoading:a,error:r}=rs({queryKey:["tax-settings"],queryFn:async()=>{const{data:c,error:d}=await M.from("tax_settings").select("*").order("tax_category",{ascending:!0});if(d)throw d;return c},staleTime:10*60*1e3}),n=xe({mutationFn:async c=>{const{data:d,error:g}=await M.from("tax_settings").insert(c).select().single();if(g)throw g;return d},onSuccess:()=>{s.invalidateQueries({queryKey:["tax-settings"]})}}),l=xe({mutationFn:async({id:c,...d})=>{const{data:g,error:v}=await M.from("tax_settings").update(d).eq("id",c).select().single();if(v)throw v;return g},onSuccess:()=>{s.invalidateQueries({queryKey:["tax-settings"]})}}),i=xe({mutationFn:async c=>{const{error:d}=await M.from("tax_settings").delete().eq("id",c);if(d)throw d},onSuccess:()=>{s.invalidateQueries({queryKey:["tax-settings"]})}}),o=xe({mutationFn:async({id:c,is_active:d})=>{const{error:g}=await M.from("tax_settings").update({is_active:d}).eq("id",c);if(g)throw g},onSuccess:()=>{s.invalidateQueries({queryKey:["tax-settings"]})}});return{taxSettings:t,isLoading:a,error:r,createTaxSetting:n.mutate,isCreating:n.isPending,createError:n.error,updateTaxSetting:l.mutate,isUpdating:l.isPending,updateError:l.error,deleteTaxSetting:i.mutate,isDeleting:i.isPending,deleteError:i.error,toggleTaxSettingStatus:o.mutate,isToggling:o.isPending}}function Hd(){const{data:s,isLoading:t,error:a}=rs({queryKey:["delivery-analytics"],queryFn:async()=>{const[r,n]=await Promise.all([M.from("delivery_zones").select("id, is_active"),M.from("delivery_calculations").select("final_delivery_fee, is_free_delivery, created_at").gte("created_at",new Date(Date.now()-864e5).toISOString())]);if(r.error)throw r.error;if(n.error)throw n.error;const l=r.data||[],i=n.data||[],o=l.length,c=l.filter(h=>h.is_active).length,d=i.length,g=i.filter(h=>h.is_free_delivery).length,v=i.filter(h=>!h.is_free_delivery),x=v.length>0?v.reduce((h,b)=>h+b.final_delivery_fee,0)/v.length:0;return{total_zones:o,active_zones:c,total_calculations_today:d,cache_hit_rate:0,average_delivery_fee:x,free_delivery_rate:d>0?g/d*100:0}},staleTime:3e5,refetchInterval:3e5});return{metrics:s,isLoading:t,error:a}}const Gd=({orderTotal:s,variant:t="card",className:a="",onFeeCalculated:r})=>{const[n,l]=m.useState(!1),[i,o]=m.useState(null),[c,d]=m.useState(!1),[g,v]=m.useState(null),{calculateFee:x}=Vd(),{location:h}=Di();m.useEffect(()=>{h!=null&&h.coordinates&&s>0&&b()},[h,s]);const b=async()=>{if(h!=null&&h.coordinates){d(!0),v(null);try{const E=await x(h.coordinates,s);o(E),r==null||r(E)}catch(E){v("Unable to calculate delivery fee. Please try again."),console.error("Delivery calculation error:",E)}finally{d(!1)}}},u=()=>{if(!i)return{progress:0,remaining:0,percentage:0};const E=i.free_delivery_threshold||0,C=s,D=Math.max(0,E-C),F=E>0?Math.min(100,C/E*100):0;return{progress:C,remaining:D,percentage:F,threshold:E}},{progress:j,remaining:f,percentage:y,threshold:p}=u();if(i!=null&&i.emergency_message)return e.jsxs(Se,{className:"border-red-200 bg-red-50",children:[e.jsx(Dt,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{className:"text-red-800",children:[e.jsx("strong",{children:"Delivery Temporarily Unavailable"}),e.jsx("br",{}),i.emergency_message]})]});if(!h)return e.jsxs(Se,{className:"border-amber-200 bg-amber-50",children:[e.jsx(lt,{className:"h-4 w-4 text-amber-600"}),e.jsx(Fe,{className:"text-amber-800",children:"Please set your delivery location to view delivery options."})]});const _=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(Ee,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-neutral-900",children:"Delivering to"}),e.jsx("p",{className:"text-sm text-neutral-600 max-w-48 truncate",children:h.address||"Current Location"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center text-brand-600",children:[e.jsx(Te,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{className:"text-sm font-medium",children:[(i==null?void 0:i.max_delivery_time_minutes)||30,"-",((i==null?void 0:i.max_delivery_time_minutes)||30)+10," min"]})]}),(i==null?void 0:i.zone_name)&&e.jsx(G,{variant:"outline",className:"text-xs mt-1",children:i.zone_name})]})]}),p>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Free delivery progress"}),e.jsxs("span",{className:"font-medium",children:["",j,"/",p]})]}),e.jsx(as,{value:y,className:"h-2"}),f>0?e.jsxs("p",{className:"text-sm text-brand-600",children:["Add ",f," more for free delivery!"]}):e.jsxs("p",{className:"text-sm text-green-600 flex items-center",children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"You qualify for free delivery!"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_s,{className:"h-4 w-4 text-neutral-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Delivery fee"})]}),e.jsx("div",{className:"text-right",children:c?e.jsx("div",{className:"h-4 w-12 bg-neutral-200 animate-pulse rounded"}):i?e.jsx("span",{className:`font-semibold ${i.is_free?"text-green-600":"text-neutral-900"}`,children:i.is_free?"FREE":`${i.delivery_fee}`}):e.jsx("span",{className:"text-sm text-neutral-500",children:"Calculating..."})})]}),g&&e.jsxs(Se,{className:"border-red-200 bg-red-50",children:[e.jsx(Dt,{className:"h-4 w-4 text-red-600"}),e.jsxs(Fe,{className:"text-red-800",children:[g,e.jsx(N,{variant:"link",size:"sm",onClick:b,className:"text-red-600 h-auto p-0 ml-2",children:"Retry"})]})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>l(!n),className:"w-full text-brand-600 hover:text-brand-700 hover:bg-brand-50",children:n?e.jsxs(e.Fragment,{children:["Hide details ",e.jsx(cn,{className:"h-4 w-4 ml-1"})]}):e.jsxs(e.Fragment,{children:["View details ",e.jsx(Aa,{className:"h-4 w-4 ml-1"})]})})]}),n&&i&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-neutral-900 flex items-center",children:[e.jsx(zs,{className:"h-4 w-4 mr-2 text-brand-500"}),"Fee Breakdown"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Base delivery fee"}),e.jsxs("span",{children:["",i.delivery_fee]})]}),i.tax_amount&&i.tax_amount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-neutral-600",children:["Tax (",i.tax_rate||0,"% GST)"]}),e.jsxs("span",{children:["",i.tax_amount]})]}),i.is_free&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Free delivery discount"}),e.jsxs("span",{children:["-",i.delivery_fee]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total delivery cost"}),e.jsx("span",{className:i.is_free?"text-green-600":"",children:i.is_free?"FREE":`${i.delivery_fee+(i.tax_amount||0)}`})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-neutral-900",children:"Service Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-neutral-600",children:"Service type"}),e.jsx("p",{className:"font-medium capitalize",children:i.service_type||"Standard"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-neutral-600",children:"Delivery time"}),e.jsxs("p",{className:"font-medium",children:[i.max_delivery_time_minutes||30,"-",(i.max_delivery_time_minutes||30)+10," min"]})]})]})]}),i.zone_name&&e.jsxs("div",{className:"text-xs text-neutral-500 bg-neutral-50 p-3 rounded-lg",children:[e.jsxs("p",{children:["Zone: ",i.zone_name]}),p>0&&e.jsxs("p",{children:["Free delivery on orders above ",p]})]})]})]});return t==="inline"?e.jsx("div",{className:`border rounded-lg p-4 bg-background ${a}`,children:e.jsx(_,{})}):t==="summary"?e.jsxs("div",{className:`space-y-2 ${a}`,children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Delivery fee"}),e.jsx("span",{className:i!=null&&i.is_free?"text-green-600 font-medium":"",children:c?"...":i!=null&&i.is_free?"FREE":`${(i==null?void 0:i.delivery_fee)||0}`})]}),(i==null?void 0:i.tax_amount)&&i.tax_amount>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-neutral-600",children:"Delivery tax"}),e.jsxs("span",{children:["",i.tax_amount]})]})]}):e.jsx(k,{className:`interactive-card bg-brand-50 border-brand-200 ${a}`,children:e.jsx(T,{className:"p-4",children:e.jsx(_,{})})})},Kd=()=>{const{cartItems:s,updateQuantity:t,removeFromCart:a,clearCart:r,getTotalItems:n,getTotalPrice:l}=st(),[i,o]=m.useState(null),c=l(),d=i!=null&&i.is_free?0:(i==null?void 0:i.delivery_fee)||29,g=(i==null?void 0:i.tax_amount)||0,v=Math.round(c*.05),x=50,h=c+d+g+v-x,b=u=>{o(u)};return s.length===0?e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 hover:bg-neutral-100 rounded-xl",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(Ts,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-neutral-900",children:"Your Cart"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"0 items"})]})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-16",children:[e.jsx("div",{className:"w-32 h-32 bg-neutral-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(Ts,{className:"h-16 w-16 text-neutral-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-neutral-900 mb-3",children:"Your cart is empty"}),e.jsx("p",{className:"text-neutral-600 text-center mb-8 max-w-sm",children:"Add some delicious items to your cart and they will appear here"}),e.jsx(pe,{to:"/home",children:e.jsx(N,{className:"primary-button px-8 py-3",children:"Start Shopping"})})]}),e.jsx(ws,{})]}):e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-32",children:[e.jsx("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 hover:bg-neutral-100 rounded-xl",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(Ts,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-neutral-900",children:"Your Cart"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[n()," items"]})]})]}),e.jsx(N,{variant:"ghost",className:"text-brand-600 font-medium",onClick:r,children:"Clear All"})]})}),e.jsx("div",{className:"px-4 py-4",children:e.jsx(Gd,{orderTotal:c,variant:"card",onFeeCalculated:b})}),e.jsxs("div",{className:"px-4 space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg text-neutral-900 mb-4",children:"Your Items"}),s.map(u=>e.jsx(k,{className:"interactive-card overflow-hidden shadow-card",children:e.jsx(T,{className:"p-0",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-24 h-24 bg-neutral-100 flex-shrink-0 relative rounded-l-2xl overflow-hidden",children:[e.jsx("img",{src:u.image,alt:u.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("div",{className:`w-3 h-3 border-2 flex items-center justify-center ${u.isVeg?"border-green-500":"border-red-500"}`,children:e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${u.isVeg?"bg-green-500":"bg-red-500"}`})})})]}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-neutral-900 mb-1",children:u.name}),e.jsx("p",{className:"text-sm text-neutral-600 mb-2",children:u.description}),e.jsxs("p",{className:"font-bold text-lg text-neutral-900",children:["",u.price*u.quantity]})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>a(u.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded-xl",children:e.jsx(ms,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-sm text-neutral-600",children:["",u.price," each"]})}),e.jsxs("div",{className:"flex items-center space-x-2 bg-brand-500 rounded-xl px-3 py-2",children:[e.jsx(N,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-white hover:bg-brand-600 rounded-lg",onClick:()=>t(u.id,u.quantity-1),children:e.jsx(Ra,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-white font-semibold text-sm min-w-[1.5rem] text-center",children:u.quantity}),e.jsx(N,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0 text-white hover:bg-brand-600 rounded-lg",onClick:()=>t(u.id,u.quantity+1),children:e.jsx(Ce,{className:"h-3 w-3"})})]})]})]})]})})},u.id))]}),e.jsx("div",{className:"px-4 py-6 mb-8",children:e.jsx(k,{className:"interactive-card shadow-card",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-neutral-900 mb-4 flex items-center",children:[e.jsx(xn,{className:"h-5 w-5 mr-2 text-brand-500"}),"Bill Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-neutral-900",children:["",c]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Delivery Fee"}),e.jsx("span",{className:`font-medium ${i!=null&&i.is_free?"text-green-600":"text-neutral-900"}`,children:i!=null&&i.is_free?"FREE":`${d}`})]}),g>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Delivery Tax"}),e.jsxs("span",{className:"font-medium text-neutral-900",children:["",g]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-neutral-600",children:"Taxes"}),e.jsxs("span",{className:"font-medium text-neutral-900",children:["",v]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{className:"font-medium",children:["-",x]})]}),e.jsxs("div",{className:"border-t-2 border-neutral-500 pt-4 mt-4 flex justify-between font-bold text-xl bg-neutral-100 p-3 rounded-lg",children:[e.jsx("span",{className:"text-neutral-900",children:"Total"}),e.jsxs("span",{className:"text-neutral-900",children:["",h]})]})]})]})})}),e.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-white p-4 border-t border-neutral-200 shadow-strong",children:e.jsxs(N,{className:"w-full primary-button py-4 text-lg font-semibold",children:["Proceed to Checkout - ",h]})}),e.jsx(ws,{})]})},vt=Bl,at=m.forwardRef(({className:s,...t},a)=>e.jsx(Vr,{ref:a,className:z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));at.displayName=Vr.displayName;const ke=m.forwardRef(({className:s,...t},a)=>e.jsx(Hr,{ref:a,className:z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));ke.displayName=Hr.displayName;const Le=m.forwardRef(({className:s,...t},a)=>e.jsx(Gr,{ref:a,className:z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Le.displayName=Gr.displayName;const Wd=()=>{const{user:s}=Ve();return rs({queryKey:["profile",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");const{data:t,error:a}=await M.from("profiles").select("*").eq("id",s.id).single();if(a)throw a;return t},enabled:!!(s!=null&&s.id)})},Qd=()=>{const{user:s}=Ve();return rs({queryKey:["addresses",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");const{data:t,error:a}=await M.from("addresses").select("*").eq("user_id",s.id).order("is_default",{ascending:!1}).order("created_at",{ascending:!1});if(a)throw a;return t},enabled:!!(s!=null&&s.id)})},Ui=()=>{const{user:s}=Ve();return rs({queryKey:["user-orders",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("User not authenticated");const{data:t,error:a}=await M.from("orders").select(`
          *,
          addresses (
            address_line_1,
            address_line_2,
            address_line_3,
            pincode,
            address_type
          ),
          order_items (
            *,
            products (
              name,
              image_url,
              price
            )
          )
        `).eq("user_id",s.id).order("created_at",{ascending:!1});if(a)throw a;return t},enabled:!!(s!=null&&s.id)})},Yd=()=>rs({queryKey:["admin-orders"],queryFn:async()=>{const{data:s,error:t}=await M.from("orders").select(`
          *,
          order_items(
            id,
            quantity,
            unit_price,
            total_price,
            product_id,
            products(
              name,
              image_url
            )
          )
        `).order("created_at",{ascending:!1});if(t)throw console.error("Error fetching admin orders:",t),t;return s}}),Zd=()=>{const s=Cs(),{user:t}=Ve(),a=xe({mutationFn:async o=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:c,error:d}=await M.from("profiles").update(o).eq("id",t.id).select().single();if(d)throw d;return c},onSuccess:o=>{s.setQueryData(["profile",t==null?void 0:t.id],o),ee({title:"Profile Updated",description:"Your profile has been successfully updated."})},onError:o=>{ee({title:"Update Failed",description:o.message||"Failed to update profile. Please try again.",variant:"destructive"})}}),r=xe({mutationFn:async o=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");const{data:c,error:d}=await M.from("addresses").insert({...o,user_id:t.id}).select().single();if(d)throw d;return c},onSuccess:()=>{s.invalidateQueries({queryKey:["addresses",t==null?void 0:t.id]}),ee({title:"Address Added",description:"New address has been added to your account."})},onError:o=>{ee({title:"Failed to Add Address",description:o.message||"Could not add address. Please try again.",variant:"destructive"})}}),n=xe({mutationFn:async({id:o,updates:c})=>{const{data:d,error:g}=await M.from("addresses").update(c).eq("id",o).select().single();if(g)throw g;return d},onSuccess:()=>{s.invalidateQueries({queryKey:["addresses",t==null?void 0:t.id]}),ee({title:"Address Updated",description:"Address has been successfully updated."})},onError:o=>{ee({title:"Update Failed",description:o.message||"Failed to update address. Please try again.",variant:"destructive"})}}),l=xe({mutationFn:async o=>{const{error:c}=await M.from("addresses").delete().eq("id",o);if(c)throw c},onSuccess:()=>{s.invalidateQueries({queryKey:["addresses",t==null?void 0:t.id]}),ee({title:"Address Deleted",description:"Address has been removed from your account."})},onError:o=>{ee({title:"Delete Failed",description:o.message||"Failed to delete address. Please try again.",variant:"destructive"})}}),i=xe({mutationFn:async o=>{if(!(t!=null&&t.id))throw new Error("User not authenticated");await M.from("addresses").update({is_default:!1}).eq("user_id",t.id);const{error:c}=await M.from("addresses").update({is_default:!0}).eq("id",o);if(c)throw c},onSuccess:()=>{s.invalidateQueries({queryKey:["addresses",t==null?void 0:t.id]}),ee({title:"Default Address Set",description:"This address is now your default delivery address."})},onError:o=>{ee({title:"Update Failed",description:o.message||"Failed to set default address. Please try again.",variant:"destructive"})}});return{updateProfile:a,addAddress:r,updateAddress:n,deleteAddress:l,setDefaultAddress:i}},Jd=()=>{const{data:s=[],isLoading:t,error:a}=Ui(),{toast:r}=Qe(),[n,l]=m.useState("all"),i=h=>{switch(h){case"delivered":return e.jsx(Ne,{className:"h-5 w-5 text-green-500"});case"out_for_delivery":return e.jsx(be,{className:"h-5 w-5 text-blue-500"});case"preparing":return e.jsx(Te,{className:"h-5 w-5 text-orange-500"});case"confirmed":return e.jsx(Ne,{className:"h-5 w-5 text-blue-500"});case"pending":return e.jsx(Te,{className:"h-5 w-5 text-yellow-500"});case"cancelled":return e.jsx(Te,{className:"h-5 w-5 text-red-500"});default:return e.jsx(Te,{className:"h-5 w-5 text-neutral-500"})}},o=h=>{switch(h){case"delivered":return"Delivered";case"out_for_delivery":return"Out for Delivery";case"preparing":return"Preparing";case"confirmed":return"Confirmed";case"pending":return"Pending";case"cancelled":return"Cancelled";default:return"Unknown"}},c=h=>{switch(h){case"delivered":return"bg-green-100 text-green-800 border-green-200";case"out_for_delivery":return"bg-blue-100 text-blue-800 border-blue-200";case"preparing":return"bg-orange-100 text-orange-800 border-orange-200";case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-neutral-100 text-neutral-800 border-neutral-200"}},d=h=>!h||h.length===0?"No items":h.map(u=>{var f;const j=((f=u.products)==null?void 0:f.name)||"Unknown Product";return u.quantity>1?`${j} (${u.quantity})`:j}).join(", "),g=h=>{if(h.estimated_delivery_time){const b=new Date(h.estimated_delivery_time),u=new Date,j=Math.max(0,Math.floor((b.getTime()-u.getTime())/(1e3*60)));if(j>0)return`${j} mins`}switch(h.status){case"pending":case"confirmed":return"30-45 mins";case"preparing":return"20-30 mins";case"out_for_delivery":return"10-15 mins";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return"N/A"}},v=(h,b)=>b==="all"?h:b==="active"?h.filter(u=>["pending","confirmed","preparing","out_for_delivery"].includes(u.status)):h.filter(u=>u.status===b),x=h=>{r({title:"Added to cart",description:"Previous order items have been added to your cart."})};return t?e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 hover:bg-neutral-100 rounded-xl",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(be,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-neutral-900",children:"Order History"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Your past orders"})]})]})}),e.jsxs("div",{className:"flex items-center justify-center py-16",children:[e.jsx(Pe,{className:"h-8 w-8 animate-spin mr-3 text-brand-500"}),e.jsx("span",{className:"text-neutral-600",children:"Loading your orders..."})]}),e.jsx(ws,{})]}):a?e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 hover:bg-neutral-100 rounded-xl",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(be,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-neutral-900",children:"Order History"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Your past orders"})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx(k,{className:"interactive-card shadow-card",children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"h-8 w-8 text-red-500"})}),e.jsx("h3",{className:"font-semibold text-lg text-neutral-900 mb-2",children:"Failed to load orders"}),e.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:a.message}),e.jsx(N,{className:"primary-button",children:"Try Again"})]})})}),e.jsx(ws,{})]}):e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 hover:bg-neutral-100 rounded-xl",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(be,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-neutral-900",children:"Order History"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[s.length," orders"]})]})]}),e.jsx(N,{variant:"ghost",className:"text-brand-600 font-medium",children:"Filter"})]})}),e.jsx("div",{className:"px-4 py-4",children:e.jsxs(vt,{value:n,onValueChange:l,children:[e.jsxs(at,{className:"grid w-full grid-cols-4 bg-neutral-100 rounded-2xl p-1",children:[e.jsx(ke,{value:"all",className:"rounded-xl",children:"All"}),e.jsx(ke,{value:"active",className:"rounded-xl",children:"Active"}),e.jsx(ke,{value:"delivered",className:"rounded-xl",children:"Delivered"}),e.jsx(ke,{value:"cancelled",className:"rounded-xl",children:"Cancelled"})]}),e.jsx(Le,{value:n,className:"mt-6",children:e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx(k,{className:"interactive-card shadow-card",children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-neutral-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(be,{className:"h-12 w-12 text-neutral-400"})}),e.jsx("h3",{className:"font-semibold text-xl text-neutral-900 mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-neutral-600 mb-6 max-w-sm mx-auto",children:"When you place your first order, it will appear here"}),e.jsx(pe,{to:"/home",children:e.jsx(N,{className:"primary-button",children:"Start Shopping"})})]})}):v(s,n).map(h=>e.jsx(k,{className:"interactive-card overflow-hidden shadow-card hover:shadow-card-hover transition-all duration-300",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-50 rounded-xl flex items-center justify-center",children:i(h.status)}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-neutral-900",children:["Order #",h.id.slice(-8)]}),e.jsx("p",{className:"text-sm text-neutral-600",children:new Date(h.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx(G,{className:`${c(h.status)} border font-medium px-3 py-1 rounded-full`,children:o(h.status)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-neutral-600 mb-1",children:"Items:"}),e.jsx("p",{className:"text-neutral-900 font-medium",children:d(h.order_items)})]}),h.addresses&&e.jsx("div",{className:"mb-4 p-3 bg-neutral-50 rounded-xl",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-neutral-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900",children:"Delivery Address"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[[h.addresses.address_line_1,h.addresses.address_line_2,h.addresses.address_line_3].filter(Boolean).join(", "),h.addresses.pincode&&` - ${h.addresses.pincode}`]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-neutral-200",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-lg text-neutral-900",children:["",h.total_amount.toFixed(2)]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-neutral-600",children:[e.jsx(Te,{className:"h-3 w-3"}),e.jsx("span",{children:g(h)})]})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"border-neutral-300 hover:bg-neutral-50 rounded-xl",children:[e.jsx(cs,{className:"h-4 w-4 mr-1"}),"Details"]}),h.status==="delivered"&&e.jsxs(e.Fragment,{children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>x(h.id),className:"border-brand-300 text-brand-600 hover:bg-brand-50 rounded-xl",children:[e.jsx(hn,{className:"h-4 w-4 mr-1"}),"Reorder"]}),e.jsxs(N,{variant:"outline",size:"sm",className:"border-yellow-300 text-yellow-600 hover:bg-yellow-50 rounded-xl",children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),"Rate"]})]}),(h.status==="pending"||h.status==="confirmed")&&e.jsx(N,{variant:"outline",size:"sm",className:"border-red-300 text-red-600 hover:bg-red-50 rounded-xl",children:"Cancel"})]})]})]})},h.id))})})]})}),e.jsx(ws,{})]})},Xd=({categories:s,onCategorySelect:t,className:a=""})=>{const r=s.filter(n=>n.is_visible).sort((n,l)=>n.sort_order-l.sort_order);return e.jsx("div",{className:`category-grid grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 ${a}`,children:r.map(n=>e.jsx(k,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>t(n.id),children:e.jsxs(T,{className:"p-4 text-center",children:[n.image_url&&e.jsx("img",{src:n.image_url,alt:n.name,className:"h-16 w-16 mx-auto mb-2 rounded-lg object-cover"}),e.jsx("h3",{className:"font-medium text-sm",children:n.name})]})},n.id))})},em=()=>{var y;Ve();const{toast:s}=Qe(),[t,a]=m.useState("all"),[r,n]=m.useState(""),[l,i]=m.useState(!1),[o,c]=m.useState(!0),{data:d=[]}=Ei("food"),{data:g=[]}=Ot(t==="all"?void 0:t,"food");Ot(void 0,"food");const{addToCart:v}=st(),{isFavorite:x,toggleFavorite:h}=Yt(),b=d.map(p=>({id:p.id,name:p.name,image_url:p.image_url,is_visible:p.is_visible,sort_order:p.sort_order})),u=g.filter(p=>{const _=p.name.toLowerCase().includes(r.toLowerCase()),E=!l||p.is_veg,C=t==="all"||p.category_id===t;return _&&E&&C&&p.is_available}),j=p=>{const _=u.find(E=>E.id===p);_&&v({id:_.id,name:_.name,price:_.price,image:_.image_url||"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",isVeg:_.is_veg,description:_.description})},f=p=>{const _=u.find(E=>E.id===p);if(_){const E=d.find(C=>C.id===_.category_id);h({id:_.id,name:_.name,description:_.description,price:_.price,image:_.image_url||"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",rating:_.rating,deliveryTime:"25-35 min",isVeg:_.is_veg,category:E==null?void 0:E.name}),s({title:x(p)?"Removed from favorites":"Added to favorites",description:`${_.name} has been ${x(p)?"removed from":"added to"} your favorites.`})}};return e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsxs("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-50 border-b border-neutral-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 hover:bg-neutral-100 rounded-xl",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(Ma,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-neutral-900",children:"Browse Menu"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Categories & Dishes"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>c(!o),className:"text-brand-600 font-medium",children:o?"List View":"Grid View"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),e.jsx(B,{placeholder:"Search for dishes...",value:r,onChange:p=>n(p.target.value),className:"pl-12 pr-16 py-3 rounded-2xl border-neutral-200 bg-neutral-50 focus:bg-white transition-colors"}),e.jsx(N,{size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-brand-500 hover:bg-brand-600 rounded-xl px-4",children:e.jsx(La,{className:"h-4 w-4"})})]})]}),o&&e.jsxs("div",{className:"px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-bold text-xl text-neutral-900",children:"Categories"}),e.jsxs(G,{variant:"outline",className:"text-neutral-600 border-neutral-300",children:[d.length," categories"]})]}),e.jsx(Xd,{categories:b,onCategorySelect:a,className:"mb-6"})]}),e.jsxs("div",{className:"px-4 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"font-bold text-xl text-neutral-900",children:t==="all"?"All Dishes":(y=d.find(p=>p.id===t))==null?void 0:y.name}),e.jsx(N,{variant:"ghost",className:"text-brand-600 font-medium",children:"View All"})]}),e.jsx(Ti,{categories:b,activeCategory:t,onCategoryChange:a,showAll:!0})]}),e.jsx("div",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ts,{checked:l,onCheckedChange:i,className:"data-[state=checked]:bg-green-500"}),e.jsx("span",{className:"text-sm font-medium text-neutral-700",children:"Veg Only"})]})}),e.jsxs(G,{variant:"outline",className:"text-neutral-600 border-neutral-300",children:[u.length," dishes found"]})]})}),e.jsx("div",{className:"px-4 pb-4",children:u.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:u.map(p=>e.jsx(Ha,{id:p.id,name:p.name,description:p.description,price:p.price,image:p.image_url||"/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",rating:p.rating||4.8,reviewCount:Math.floor(Math.random()*500)+100,deliveryTime:"25-35 min",isVeg:p.is_veg,isFavorite:x(p.id),onAddToCart:j,onToggleFavorite:f,className:"animate-fade-in"},p.id))}):e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"interactive-card bg-white rounded-2xl p-8 shadow-card max-w-sm mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-neutral-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-4xl",children:""})}),e.jsx("h3",{className:"font-semibold text-lg text-neutral-900 mb-2",children:"No dishes found"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:r?"Try searching for something else":`No ${l?"vegetarian ":""}dishes available`}),e.jsx(N,{onClick:()=>{n(""),a("all"),i(!1)},className:"mt-4 primary-button",children:"Clear Filters"})]})})}),e.jsx(ws,{})]})},sm=()=>{const{toast:s}=Qe(),{addToCart:t}=st(),{favorites:a,getFavoritesByCategory:r,getUniqueCategories:n,removeFromFavorites:l}=Yt(),[i,o]=m.useState("all"),[c,d]=m.useState("grid"),v=["all",...n()],x=r(i),h=u=>{const j=a.find(f=>f.id===u);j&&(t({id:j.id,name:j.name,price:j.price,image:j.image,isVeg:j.isVeg,description:j.description}),s({title:"Added to cart",description:`${j.name} has been added to your cart.`}))},b=u=>{const j=a.find(f=>f.id===u);l(u),s({title:"Removed from favorites",description:`${(j==null?void 0:j.name)||"Item"} has been removed from your favorites.`})};return e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-soft px-4 py-4 sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pe,{to:"/home",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 hover:bg-neutral-100 rounded-xl",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("div",{className:"w-10 h-10 bg-brand-500 rounded-xl flex items-center justify-center",children:e.jsx(Ks,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-neutral-900",children:"My Favorites"}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[x.length," items"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>d(c==="grid"?"list":"grid"),className:"text-brand-600 font-medium",children:c==="grid"?"List View":"Grid View"})})]})}),e.jsx("div",{className:"px-4 py-4",children:e.jsxs(vt,{value:i,onValueChange:o,children:[v.length>1&&e.jsx(at,{className:`grid w-full ${v.length<=5?`grid-cols-${v.length}`:"grid-cols-5"} bg-neutral-100 rounded-2xl p-1 mb-6`,children:v.slice(0,5).map(u=>e.jsx(ke,{value:u,className:"rounded-xl capitalize",children:u},u))}),e.jsxs(Le,{value:i,className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg text-neutral-900",children:i==="all"?"All Favorites":`${i} Favorites`}),e.jsxs(G,{variant:"outline",className:"text-neutral-600 border-neutral-300",children:[x.length," items"]})]}),x.length>0?e.jsx("div",{className:`${c==="grid"?"grid grid-cols-1 sm:grid-cols-2 gap-4":"space-y-4"}`,children:x.map(u=>e.jsx(Ha,{id:u.id,name:u.name,description:u.description,price:u.price,image:u.image,rating:u.rating,reviewCount:u.reviewCount,deliveryTime:u.deliveryTime,isVeg:u.isVeg,isFavorite:!0,onAddToCart:h,onToggleFavorite:b,className:"animate-fade-in"},u.id))}):e.jsx(k,{className:"interactive-card shadow-card",children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 bg-brand-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ks,{className:"h-12 w-12 text-brand-500"})}),e.jsx("h3",{className:"font-semibold text-xl text-neutral-900 mb-2",children:i==="all"?"No favorites yet":`No ${i.toLowerCase()} favorites`}),e.jsx("p",{className:"text-neutral-600 mb-6 max-w-sm mx-auto",children:i==="all"?"Start adding items to your favorites and they will appear here":`You haven't saved any ${i.toLowerCase()} items yet`}),e.jsx(pe,{to:"/categories",children:e.jsxs(N,{className:"primary-button",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Browse Menu"]})})]})})]})]})}),e.jsx(ws,{})]})},tm=()=>{const{id:s}=Ql(),t=xt(),{addToCart:a}=st(),{toast:r}=Qe(),[n,l]=m.useState(null),[i,o]=m.useState(!0),[c,d]=m.useState(1);m.useEffect(()=>{const x={id:s||"1",name:"Butter Chicken",description:"Creamy tomato-based curry with tender chicken pieces, aromatic spices, and fresh herbs. Served with basmati rice.",price:299,image_url:"/images/products/butter-chicken.jpg",is_veg:!1,preparation_time_minutes:25,rating:4.5,review_count:156,category:{name:"Main Course"}};setTimeout(()=>{l(x),o(!1)},1e3)},[s]);const g=()=>{if(n){for(let x=0;x<c;x++)a({id:n.id,name:n.name,price:n.price,image:n.image_url,isVeg:n.is_veg,description:n.description});r({title:"Added to cart",description:`${c} x ${n.name} added to your cart.`})}},v=x=>{d(h=>Math.max(1,h+x))};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsxs(N,{variant:"ghost",onClick:()=>t(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Back"]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx(k,{children:e.jsx(T,{className:"p-0",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 p-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:n.image_url,alt:n.name,className:"w-full h-full object-cover",onError:x=>{x.currentTarget.src="/placeholder-food.jpg"}})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(G,{variant:"secondary",className:"text-xs",children:n.category.name}),n.is_veg&&e.jsxs(G,{variant:"outline",className:"text-green-600 border-green-600",children:[e.jsx(Jl,{className:"h-3 w-3 mr-1"}),"Veg"]})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.name}),e.jsx("p",{className:"text-gray-600 text-lg leading-relaxed",children:n.description})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"h-5 w-5 text-yellow-400 fill-current"}),e.jsx("span",{className:"font-semibold text-gray-900 ml-1",children:n.rating})]}),e.jsxs("span",{className:"text-gray-500",children:["(",n.review_count," reviews)"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsxs("span",{children:[n.preparation_time_minutes," mins"]})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("span",{className:"text-3xl font-bold text-gray-900",children:["",n.price]}),e.jsx("span",{className:"text-gray-500 ml-2",children:"per item"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Quantity:"}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>v(-1),disabled:c<=1,className:"h-10 w-10 p-0",children:e.jsx(Ra,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-12 text-center font-medium",children:c}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>v(1),className:"h-10 w-10 p-0",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Total:"}),e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["",(n.price*c).toFixed(2)]})]})]}),e.jsxs(N,{onClick:g,className:"w-full h-12 text-lg font-semibold",size:"lg",children:[e.jsx(Oa,{className:"h-5 w-5 mr-2"}),"Add ",c," to Cart"]})]})]})})}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsx(V,{children:e.jsx(H,{children:"Nutritional Information"})}),e.jsx(T,{children:e.jsx("p",{className:"text-gray-600",children:"Detailed nutritional information will be available soon."})})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsx(H,{children:"Ingredients"})}),e.jsx(T,{children:e.jsx("p",{className:"text-gray-600",children:"Fresh ingredients and allergen information will be displayed here."})})]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Product not found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"The product you're looking for doesn't exist."}),e.jsxs(N,{onClick:()=>t("/home"),children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Back to Home"]})]})})};var qi="AlertDialog",[am,Gu]=ut(qi,[Kr]),Ss=Kr(),Bi=s=>{const{__scopeAlertDialog:t,...a}=s,r=Ss(t);return e.jsx(qr,{...r,...a,modal:!0})};Bi.displayName=qi;var rm="AlertDialogTrigger",Vi=m.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,n=Ss(a);return e.jsx(Br,{...n,...r,ref:t})});Vi.displayName=rm;var nm="AlertDialogPortal",Hi=s=>{const{__scopeAlertDialog:t,...a}=s,r=Ss(t);return e.jsx(Ur,{...r,...a})};Hi.displayName=nm;var im="AlertDialogOverlay",Gi=m.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,n=Ss(a);return e.jsx(Sa,{...n,...r,ref:t})});Gi.displayName=im;var Gs="AlertDialogContent",[lm,om]=am(Gs),Ki=m.forwardRef((s,t)=>{const{__scopeAlertDialog:a,children:r,...n}=s,l=Ss(a),i=m.useRef(null),o=ze(t,i),c=m.useRef(null);return e.jsx(Vl,{contentName:Gs,titleName:Wi,docsSlug:"alert-dialog",children:e.jsx(lm,{scope:a,cancelRef:c,children:e.jsxs(Fa,{role:"alertdialog",...l,...n,ref:o,onOpenAutoFocus:me(n.onOpenAutoFocus,d=>{var g;d.preventDefault(),(g=c.current)==null||g.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[e.jsx(Or,{children:r}),e.jsx(dm,{contentRef:i})]})})})});Ki.displayName=Gs;var Wi="AlertDialogTitle",Qi=m.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,n=Ss(a);return e.jsx(Pa,{...n,...r,ref:t})});Qi.displayName=Wi;var Yi="AlertDialogDescription",Zi=m.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,n=Ss(a);return e.jsx(Ta,{...n,...r,ref:t})});Zi.displayName=Yi;var cm="AlertDialogAction",Ji=m.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,n=Ss(a);return e.jsx(ka,{...n,...r,ref:t})});Ji.displayName=cm;var Xi="AlertDialogCancel",el=m.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,{cancelRef:n}=om(Xi,a),l=Ss(a),i=ze(t,n);return e.jsx(ka,{...l,...r,ref:i})});el.displayName=Xi;var dm=({contentRef:s})=>{const t=`\`${Gs}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Gs}\` by passing a \`${Yi}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Gs}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=s.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},mm=Bi,um=Vi,xm=Hi,sl=Gi,tl=Ki,al=Ji,rl=el,nl=Qi,il=Zi;const ll=mm,ol=um,hm=xm,cl=m.forwardRef(({className:s,...t},a)=>e.jsx(sl,{className:z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));cl.displayName=sl.displayName;const Za=m.forwardRef(({className:s,...t},a)=>e.jsxs(hm,{children:[e.jsx(cl,{}),e.jsx(tl,{ref:a,className:z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Za.displayName=tl.displayName;const Ja=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col space-y-2 text-center sm:text-left",s),...t});Ja.displayName="AlertDialogHeader";const Xa=({className:s,...t})=>e.jsx("div",{className:z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Xa.displayName="AlertDialogFooter";const er=m.forwardRef(({className:s,...t},a)=>e.jsx(nl,{ref:a,className:z("text-lg font-semibold",s),...t}));er.displayName=nl.displayName;const sr=m.forwardRef(({className:s,...t},a)=>e.jsx(il,{ref:a,className:z("text-sm text-muted-foreground",s),...t}));sr.displayName=il.displayName;const tr=m.forwardRef(({className:s,...t},a)=>e.jsx(al,{ref:a,className:z(Ua(),s),...t}));tr.displayName=al.displayName;const ar=m.forwardRef(({className:s,...t},a)=>e.jsx(rl,{ref:a,className:z(Ua({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));ar.displayName=rl.displayName;const gm=()=>{const{user:s,signOut:t}=Ve(),{data:a,isLoading:r}=Wd(),{data:n=[],isLoading:l}=Qd(),{data:i=[],isLoading:o}=Ui(),{updateProfile:c,addAddress:d,updateAddress:g,deleteAddress:v,setDefaultAddress:x}=Zd(),{favorites:h}=Yt(),[b,u]=m.useState("profile"),[j,f]=m.useState(!1),[y,p]=m.useState(!1),[_,E]=m.useState(null),[C,D]=m.useState({first_name:"",last_name:"",phone:""}),[F,P]=m.useState({address_line_1:"",address_line_2:"",address_line_3:"",pincode:"",address_type:"home",custom_name:"",landmark:""});O.useEffect(()=>{a&&D({first_name:a.first_name||"",last_name:a.last_name||"",phone:a.phone||""})},[a]);const L=async()=>{try{await c.mutateAsync(C),f(!1)}catch(S){console.error("Failed to update profile:",S)}},q=async()=>{try{await d.mutateAsync(F),p(!1),P({address_line_1:"",address_line_2:"",address_line_3:"",pincode:"",address_type:"home",custom_name:"",landmark:""})}catch(S){console.error("Failed to add address:",S)}},se=async S=>{try{await g.mutateAsync({id:S,updates:F}),E(null)}catch(J){console.error("Failed to update address:",J)}},$=async S=>{try{await v.mutateAsync(S)}catch(J){console.error("Failed to delete address:",J)}},K=async S=>{try{await x.mutateAsync(S)}catch(J){console.error("Failed to set default address:",J)}},Q=S=>{P({address_line_1:S.address_line_1,address_line_2:S.address_line_2||"",address_line_3:S.address_line_3,pincode:S.pincode,address_type:S.address_type,custom_name:S.custom_name||"",landmark:S.landmark||""}),E(S.id)},U=S=>{switch(S){case"delivered":return e.jsx(Ne,{className:"h-4 w-4 text-green-600"});case"out_for_delivery":return e.jsx(_s,{className:"h-4 w-4 text-blue-600"});case"preparing":return e.jsx(Te,{className:"h-4 w-4 text-yellow-600"});case"cancelled":return e.jsx(Ns,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Te,{className:"h-4 w-4 text-neutral-600"})}},A=S=>{switch(S){case"delivered":return"bg-green-100 text-green-800 border-green-200";case"out_for_delivery":return"bg-blue-100 text-blue-800 border-blue-200";case"preparing":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-neutral-100 text-neutral-800 border-neutral-200"}},w=S=>S.split("_").map(J=>J.charAt(0).toUpperCase()+J.slice(1)).join(" ");return r?e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500"})}):e.jsxs("div",{className:"min-h-screen bg-neutral-50 pb-20",children:[e.jsxs("div",{className:"bg-white shadow-soft px-4 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-brand-500 rounded-2xl flex items-center justify-center",children:e.jsx(As,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-neutral-900",children:a?`${a.first_name} ${a.last_name}`:"My Profile"}),e.jsxs("p",{className:"text-neutral-600 flex items-center",children:[e.jsx(ht,{className:"h-4 w-4 mr-1"}),s==null?void 0:s.email]})]})]})}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(k,{className:"interactive-card text-center bg-gradient-to-br from-brand-50 to-orange-50 border-brand-200",children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-brand-500 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(be,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mb-1",children:i.length}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Orders"})]})}),e.jsx(k,{className:"interactive-card text-center bg-gradient-to-br from-blue-50 to-cyan-50 border-blue-200",children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(Ee,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mb-1",children:n.length}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Addresses"})]})}),e.jsx(k,{className:"interactive-card text-center bg-gradient-to-br from-red-50 to-pink-50 border-red-200",children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center mx-auto mb-3",children:e.jsx(Ks,{className:"h-6 w-6 text-white"})}),e.jsx("p",{className:"text-2xl font-bold text-neutral-900 mb-1",children:h.length}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Favorites"})]})})]})})]}),e.jsx("div",{className:"px-4 py-6",children:e.jsxs(vt,{value:b,onValueChange:u,className:"space-y-6",children:[e.jsxs(at,{className:"grid w-full grid-cols-3 bg-neutral-100 rounded-2xl p-1",children:[e.jsx(ke,{value:"profile",className:"rounded-xl",children:"Personal"}),e.jsx(ke,{value:"addresses",className:"rounded-xl",children:"Addresses"}),e.jsx(ke,{value:"orders",className:"rounded-xl",children:"Orders"})]}),e.jsxs(Le,{value:"profile",className:"space-y-4",children:[e.jsxs(k,{className:"interactive-card shadow-card",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-12 w-12 bg-brand-50 rounded-xl flex items-center justify-center",children:e.jsx(As,{className:"h-6 w-6 text-brand-600"})}),e.jsxs("div",{children:[e.jsx(H,{className:"text-neutral-900",children:"Personal Information"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Manage your personal details"})]})]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>f(!0),disabled:j,className:"border-brand-300 text-brand-600 hover:bg-brand-50 rounded-xl",children:[e.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Edit"]})]}),e.jsx(T,{className:"space-y-4",children:j?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"first_name",children:"First Name"}),e.jsx(B,{id:"first_name",value:C.first_name,onChange:S=>D({...C,first_name:S.target.value}),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"last_name",children:"Last Name"}),e.jsx(B,{id:"last_name",value:C.last_name,onChange:S=>D({...C,last_name:S.target.value}),className:"rounded-xl"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"phone",children:"Phone Number"}),e.jsx(B,{id:"phone",type:"tel",value:C.phone,onChange:S=>D({...C,phone:S.target.value}),className:"rounded-xl"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{onClick:L,disabled:c.isPending,className:"primary-button",children:c.isPending?"Saving...":"Save Changes"}),e.jsx(N,{variant:"outline",onClick:()=>f(!1),className:"border-neutral-300 hover:bg-neutral-50 rounded-xl",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-neutral-600",children:"First Name"}),e.jsx("p",{className:"font-medium text-neutral-900",children:(a==null?void 0:a.first_name)||"Not set"})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-neutral-600",children:"Last Name"}),e.jsx("p",{className:"font-medium text-neutral-900",children:(a==null?void 0:a.last_name)||"Not set"})]})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-neutral-600",children:"Email"}),e.jsx("p",{className:"font-medium text-neutral-900",children:s==null?void 0:s.email})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-neutral-600",children:"Phone"}),e.jsx("p",{className:"font-medium text-neutral-900",children:(a==null?void 0:a.phone)||"Not set"})]}),e.jsxs("div",{children:[e.jsx(I,{className:"text-neutral-600",children:"Member Since"}),e.jsx("p",{className:"font-medium text-neutral-900",children:a!=null&&a.created_at?ur(new Date(a.created_at),"MMMM yyyy"):"Recently joined"})]})]})})]}),e.jsxs(k,{className:"interactive-card shadow-card mb-6",children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center",children:[e.jsx(At,{className:"h-5 w-5 mr-2 text-brand-500"}),"Quick Actions"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(pe,{to:"/favorites",children:e.jsxs(N,{variant:"outline",className:"w-full h-16 flex flex-col items-center justify-center space-y-2 hover:bg-red-50 hover:border-red-300",children:[e.jsx(Ks,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm",children:"Favorites"})]})}),e.jsxs(N,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-2 hover:bg-green-50 hover:border-green-300",children:[e.jsx(xn,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Payment"})]}),e.jsxs(N,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-2 hover:bg-blue-50 hover:border-blue-300",children:[e.jsx(Xl,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-sm",children:"Notifications"})]}),e.jsxs(N,{variant:"outline",className:"h-16 flex flex-col items-center justify-center space-y-2 hover:bg-red-50 hover:border-red-300",onClick:t,children:[e.jsx(gn,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm",children:"Sign Out"})]})]})})]})]}),e.jsxs(Le,{value:"addresses",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Delivery Addresses"}),e.jsxs(dt,{open:y,onOpenChange:p,children:[e.jsx(Ga,{asChild:!0,children:e.jsxs(N,{className:"primary-button",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Address"]})}),e.jsxs(Zs,{className:"rounded-2xl",children:[e.jsxs(Js,{children:[e.jsx(Xs,{children:"Add New Address"}),e.jsx(Na,{children:"Add a new delivery address to your account."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"address_type",children:"Address Type"}),e.jsxs(Ie,{value:F.address_type,onValueChange:S=>P({...F,address_type:S}),children:[e.jsx(De,{className:"rounded-xl",children:e.jsx(Re,{})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"home",children:"Home"}),e.jsx(W,{value:"office",children:"Office"}),e.jsx(W,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"address_line_1",children:"Address Line 1"}),e.jsx(B,{id:"address_line_1",value:F.address_line_1,onChange:S=>P({...F,address_line_1:S.target.value}),placeholder:"House/Flat number, Building name",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"address_line_2",children:"Address Line 2 (Optional)"}),e.jsx(B,{id:"address_line_2",value:F.address_line_2,onChange:S=>P({...F,address_line_2:S.target.value}),placeholder:"Street name",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"address_line_3",children:"City/Area"}),e.jsx(B,{id:"address_line_3",value:F.address_line_3,onChange:S=>P({...F,address_line_3:S.target.value}),placeholder:"City, Area",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"pincode",children:"Pincode"}),e.jsx(B,{id:"pincode",value:F.pincode,onChange:S=>P({...F,pincode:S.target.value}),placeholder:"Pincode",className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"landmark",children:"Landmark (Optional)"}),e.jsx(B,{id:"landmark",value:F.landmark,onChange:S=>P({...F,landmark:S.target.value}),placeholder:"Nearby landmark",className:"rounded-xl"})]})]}),e.jsxs($t,{children:[e.jsx(N,{variant:"outline",onClick:()=>p(!1),className:"rounded-xl",children:"Cancel"}),e.jsx(N,{onClick:q,disabled:d.isPending,className:"primary-button",children:d.isPending?"Adding...":"Add Address"})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:l?e.jsx(k,{className:"shadow-card",children:e.jsxs(T,{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"Loading addresses..."})]})}):n.length===0?e.jsx(k,{className:"shadow-card",children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx(Ee,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-lg text-neutral-900 mb-2",children:"No addresses added"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:"Add your first delivery address to get started"}),e.jsx(N,{onClick:()=>p(!0),className:"primary-button",children:"Add Address"})]})}):n.map(S=>e.jsx(k,{className:"shadow-card",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-brand-50 rounded-xl flex items-center justify-center",children:S.address_type==="home"?e.jsx(Ia,{className:"h-5 w-5 text-brand-600"}):S.address_type==="office"?e.jsx(dn,{className:"h-5 w-5 text-brand-600"}):e.jsx(Ee,{className:"h-5 w-5 text-brand-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-semibold text-neutral-900 capitalize",children:S.custom_name||S.address_type}),S.is_default&&e.jsx(G,{className:"bg-brand-100 text-brand-700 border-brand-200",children:"Default"})]}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[[S.address_line_1,S.address_line_2,S.address_line_3].filter(Boolean).join(", "),S.pincode&&` - ${S.pincode}`]}),S.landmark&&e.jsxs("p",{className:"text-xs text-neutral-500",children:["Near ",S.landmark]})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>Q(S),className:"text-brand-600 hover:bg-brand-50 rounded-xl",children:e.jsx(Ws,{className:"h-4 w-4"})}),e.jsxs(ll,{children:[e.jsx(ol,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-50 rounded-xl",children:e.jsx(ms,{className:"h-4 w-4"})})}),e.jsxs(Za,{className:"rounded-2xl",children:[e.jsxs(Ja,{children:[e.jsx(er,{children:"Delete Address"}),e.jsx(sr,{children:"Are you sure you want to delete this address? This action cannot be undone."})]}),e.jsxs(Xa,{children:[e.jsx(ar,{className:"rounded-xl",children:"Cancel"}),e.jsx(tr,{onClick:()=>$(S.id),className:"bg-red-500 hover:bg-red-600 rounded-xl",children:"Delete"})]})]})]})]})]}),!S.is_default&&e.jsx(N,{variant:"outline",size:"sm",onClick:()=>K(S.id),disabled:x.isPending,className:"border-brand-300 text-brand-600 hover:bg-brand-50 rounded-xl",children:"Set as Default"})]})},S.id))})]}),e.jsxs(Le,{value:"orders",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Recent Orders"}),e.jsx(pe,{to:"/orders",children:e.jsx(N,{variant:"ghost",className:"text-brand-600 font-medium",children:"View All"})})]}),e.jsx("div",{className:"space-y-4",children:o?e.jsx(k,{className:"shadow-card",children:e.jsxs(T,{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-brand-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"Loading orders..."})]})}):i.length===0?e.jsx(k,{className:"shadow-card",children:e.jsxs(T,{className:"text-center py-12",children:[e.jsx(be,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-lg text-neutral-900 mb-2",children:"No orders yet"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:"Your order history will appear here"}),e.jsx(N,{className:"primary-button",children:"Start Shopping"})]})}):i.slice(0,3).map(S=>{var J;return e.jsx(k,{className:"interactive-card shadow-card",children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-brand-50 rounded-xl flex items-center justify-center",children:U(S.status)}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-neutral-900",children:["Order #",S.id.slice(-8)]}),e.jsx("p",{className:"text-sm text-neutral-600",children:ur(new Date(S.created_at),"MMM dd, yyyy")})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(G,{className:`${A(S.status)} border font-medium px-3 py-1 rounded-full`,children:w(S.status)}),e.jsxs("p",{className:"font-bold text-neutral-900 mt-1",children:["",S.total_amount.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-neutral-600",children:[((J=S.order_items)==null?void 0:J.length)||0," items"]}),e.jsxs(N,{variant:"ghost",size:"sm",className:"text-brand-600 hover:bg-brand-50 rounded-xl",children:["View Details",e.jsx(pn,{className:"h-4 w-4 ml-1"})]})]})]})},S.id)})})]})]})}),_&&e.jsx(dt,{open:!!_,onOpenChange:()=>E(null),children:e.jsxs(Zs,{className:"rounded-2xl",children:[e.jsxs(Js,{children:[e.jsx(Xs,{children:"Edit Address"}),e.jsx(Na,{children:"Update your delivery address details."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit_address_type",children:"Address Type"}),e.jsxs(Ie,{value:F.address_type,onValueChange:S=>P({...F,address_type:S}),children:[e.jsx(De,{className:"rounded-xl",children:e.jsx(Re,{})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"home",children:"Home"}),e.jsx(W,{value:"office",children:"Office"}),e.jsx(W,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit_address_line_1",children:"Address Line 1"}),e.jsx(B,{id:"edit_address_line_1",value:F.address_line_1,onChange:S=>P({...F,address_line_1:S.target.value}),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit_address_line_2",children:"Address Line 2 (Optional)"}),e.jsx(B,{id:"edit_address_line_2",value:F.address_line_2,onChange:S=>P({...F,address_line_2:S.target.value}),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit_address_line_3",children:"City/Area"}),e.jsx(B,{id:"edit_address_line_3",value:F.address_line_3,onChange:S=>P({...F,address_line_3:S.target.value}),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit_pincode",children:"Pincode"}),e.jsx(B,{id:"edit_pincode",value:F.pincode,onChange:S=>P({...F,pincode:S.target.value}),className:"rounded-xl"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"edit_landmark",children:"Landmark (Optional)"}),e.jsx(B,{id:"edit_landmark",value:F.landmark,onChange:S=>P({...F,landmark:S.target.value}),className:"rounded-xl"})]})]}),e.jsxs($t,{children:[e.jsx(N,{variant:"outline",onClick:()=>E(null),className:"rounded-xl",children:"Cancel"}),e.jsx(N,{onClick:()=>_&&se(_),disabled:g.isPending,className:"primary-button",children:g.isPending?"Updating...":"Update Address"})]})]})}),e.jsx(ws,{})]})},dl=()=>{const s=an();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Ps=({children:s})=>{const{user:t,loading:a,isAdmin:r}=Ve();return a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?r?e.jsx(bs,{to:"/admin/dashboard",replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(bs,{to:"/welcome",replace:!0})},ua=({children:s})=>{const{user:t,loading:a,isAdmin:r}=Ve();return a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?r?e.jsx(bs,{to:"/admin/dashboard",replace:!0}):e.jsx(bs,{to:"/home",replace:!0}):e.jsx(e.Fragment,{children:s})},pm=()=>{const{user:s,loading:t,isAdmin:a}=Ve();return t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs(rn,{children:[e.jsx(Me,{path:"/",element:s?a?e.jsx(bs,{to:"/admin/dashboard",replace:!0}):e.jsx(bs,{to:"/home",replace:!0}):e.jsx(bs,{to:"/welcome",replace:!0})}),e.jsx(Me,{path:"/welcome",element:e.jsx(ua,{children:e.jsx(kc,{})})}),e.jsx(Me,{path:"/login",element:e.jsx(ua,{children:e.jsx(od,{})})}),e.jsx(Me,{path:"/signup",element:e.jsx(ua,{children:e.jsx(Dc,{})})}),e.jsx(Me,{path:"/address-setup",element:e.jsx(Ps,{children:e.jsx(ld,{})})}),e.jsx(Me,{path:"/home",element:e.jsx(Ps,{children:e.jsx(Pd,{})})}),e.jsx(Me,{path:"/categories",element:e.jsx(Ps,{children:e.jsx(em,{})})}),e.jsx(Me,{path:"/cart",element:e.jsx(Ps,{children:e.jsx(Kd,{})})}),e.jsx(Me,{path:"/favorites",element:e.jsx(Ps,{children:e.jsx(sm,{})})}),e.jsx(Me,{path:"/orders",element:e.jsx(Ps,{children:e.jsx(Jd,{})})}),e.jsx(Me,{path:"/profile",element:e.jsx(Ps,{children:e.jsx(gm,{})})}),e.jsx(Me,{path:"/product/:id",element:e.jsx(Ps,{children:e.jsx(tm,{})})}),e.jsx(Me,{path:"*",element:e.jsx(dl,{})})]})})},fm=()=>{const s=xt(),{toast:t}=Qe(),{signInAdmin:a}=Ve(),[r,n]=m.useState(!1),[l,i]=m.useState(!1),[o,c]=m.useState({email:"",password:""}),d=v=>{c({...o,[v.target.name]:v.target.value})},g=async v=>{v.preventDefault(),i(!0);try{await a(o.email,o.password),t({title:"Admin Access Granted",description:"Welcome to the admin dashboard."}),s("/admin/dashboard")}catch(x){t({title:"Admin login failed",description:x.message||"Invalid credentials or insufficient privileges.",variant:"destructive"})}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 px-4 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(pe,{to:"/",className:"mr-4",children:e.jsx(N,{variant:"ghost",size:"sm",className:"p-2 text-slate-300 hover:text-white hover:bg-slate-700",children:e.jsx(Ue,{className:"h-5 w-5"})})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Login"})]}),e.jsxs(Se,{className:"mb-6 border-amber-200 bg-amber-50",children:[e.jsx(Dt,{className:"h-4 w-4 text-amber-600"}),e.jsxs(Fe,{className:"text-amber-800",children:[e.jsx("strong",{children:"Restricted Access:"})," This portal is for authorized administrators only. All login attempts are monitored and logged."]})]}),e.jsxs(k,{className:"shadow-2xl border-slate-700 bg-slate-800",children:[e.jsxs(V,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-blue-100 ring-4 ring-blue-500 ring-opacity-20",children:e.jsx(It,{className:"h-8 w-8 text-blue-600"})}),e.jsx(H,{className:"text-xl text-white",children:"Administrative Access"}),e.jsx("p",{className:"text-slate-300",children:"Enter your admin credentials to continue"})]}),e.jsxs(T,{children:[e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"email",className:"text-slate-200",children:"Admin Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(B,{id:"email",name:"email",type:"email",value:o.email,onChange:d,placeholder:"admin@seabites.com",className:"pl-10 bg-slate-700 border-slate-600 text-white placeholder:text-slate-400 focus:border-blue-500",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"password",className:"text-slate-200",children:"Admin Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Da,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(B,{id:"password",name:"password",type:r?"text":"password",value:o.password,onChange:d,placeholder:"Enter admin password",className:"pl-10 pr-10 bg-slate-700 border-slate-600 text-white placeholder:text-slate-400 focus:border-blue-500",required:!0}),e.jsx(N,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent text-slate-400 hover:text-slate-200",onClick:()=>n(!r),children:r?e.jsx(et,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})})]})]}),e.jsx(N,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors",disabled:l,children:l?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Verifying Access..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(It,{className:"h-4 w-4"}),"Access Admin Dashboard"]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-700",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Need admin access? Contact your system administrator."}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(pe,{to:"/login",children:e.jsx(N,{variant:"outline",className:"w-full border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-white",children:"Regular User Login"})}),e.jsx(pe,{to:"/",children:e.jsxs(N,{variant:"ghost",className:"w-full text-slate-400 hover:text-slate-200 hover:bg-slate-700",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Back to Homepage"]})})]})]})})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-slate-500",children:" 2024 Seabites Admin Portal. All administrative actions are logged."})})]})})},sa=m.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:z("w-full caption-bottom text-sm",s),...t})}));sa.displayName="Table";const ta=m.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:z("[&_tr]:border-b",s),...t}));ta.displayName="TableHeader";const aa=m.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:z("[&_tr:last-child]:border-0",s),...t}));aa.displayName="TableBody";const vm=m.forwardRef(({className:s,...t},a)=>e.jsx("tfoot",{ref:a,className:z("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));vm.displayName="TableFooter";const qs=m.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:z("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));qs.displayName="TableRow";const je=m.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:z("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));je.displayName="TableHead";const ye=m.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:z("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));ye.displayName="TableCell";const jm=m.forwardRef(({className:s,...t},a)=>e.jsx("caption",{ref:a,className:z("mt-4 text-sm text-muted-foreground",s),...t}));jm.displayName="TableCaption";const ym=({products:s,loading:t,onEdit:a,onDelete:r,onToggleAvailability:n,onAddNew:l})=>{const[i,o]=m.useState(null),c=v=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(v),d=v=>v==="food"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800",g=v=>v===null?"bg-gray-100 text-gray-800":v?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return t?e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):e.jsxs(k,{children:[e.jsxs(V,{className:"flex flex-row items-center justify-between",children:[e.jsx(H,{children:"Product Management"}),e.jsxs(N,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Add New Product"]})]}),e.jsx(T,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No products found"}),e.jsx(N,{onClick:l,children:"Add Your First Product"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(sa,{children:[e.jsx(ta,{children:e.jsxs(qs,{children:[e.jsx(je,{children:"Image"}),e.jsx(je,{children:"Name"}),e.jsx(je,{children:"Category"}),e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Price"}),e.jsx(je,{children:"Rating"}),e.jsx(je,{children:"Veg/Non-Veg"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Actions"})]})}),e.jsx(aa,{children:s.map(v=>{var x,h;return e.jsxs(qs,{children:[e.jsx(ye,{children:v.image_url?e.jsx("img",{src:v.image_url,alt:v.name,className:"w-12 h-12 object-cover rounded-md"}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})})}),e.jsx(ye,{className:"font-medium",children:v.name}),e.jsx(ye,{children:((x=v.categories)==null?void 0:x.name)||"Uncategorized"}),e.jsx(ye,{children:e.jsx(G,{className:d(v.type),children:v.type})}),e.jsx(ye,{children:c(v.price)}),e.jsx(ye,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-yellow-500",children:""}),e.jsx("span",{className:"ml-1",children:((h=v.rating)==null?void 0:h.toFixed(1))||"N/A"})]})}),e.jsx(ye,{children:e.jsx(G,{className:g(v.is_veg),children:v.is_veg===null?"N/A":v.is_veg?"Veg":"Non-Veg"})}),e.jsx(ye,{children:e.jsx(G,{variant:v.is_available?"default":"secondary",children:v.is_available?"Available":"Unavailable"})}),e.jsx(ye,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>a(v),children:e.jsx(Ws,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>n(v.id,!v.is_available),children:v.is_available?e.jsx(et,{className:"h-4 w-4"}):e.jsx(cs,{className:"h-4 w-4"})}),e.jsxs(ll,{children:[e.jsx(ol,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"sm",onClick:()=>o(v.id),children:e.jsx(ms,{className:"h-4 w-4 text-red-500"})})}),e.jsxs(Za,{children:[e.jsxs(Ja,{children:[e.jsx(er,{children:"Delete Product"}),e.jsxs(sr,{children:['Are you sure you want to delete "',v.name,'"? This action cannot be undone.']})]}),e.jsxs(Xa,{children:[e.jsx(ar,{onClick:()=>o(null),children:"Cancel"}),e.jsx(tr,{onClick:()=>{r(v.id),o(null)},className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})]})]})})]},v.id)})})]})})})]})};var bm=function(s,t){for(var a={};s.length;){var r=s[0],n=r.code,l=r.message,i=r.path.join(".");if(!a[i])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];a[i]={message:o.message,type:o.code}}else a[i]={message:l,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(g){return g.errors.forEach(function(v){return s.push(v)})}),t){var c=a[i].types,d=c&&c[r.code];a[i]=po(i,t,a,n,d?[].concat(d,r.message):r.message)}s.shift()}return a},jt=function(s,t,a){return a===void 0&&(a={}),function(r,n,l){try{return Promise.resolve(function(i,o){try{var c=Promise.resolve(s[a.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(d){return l.shouldUseNativeValidation&&ho({},l),{errors:{},values:a.raw?r:d}})}catch(d){return o(d)}return c&&c.then?c.then(void 0,o):c}(0,function(i){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(i))return{values:{},errors:go(bm(i.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw i}))}catch(i){return Promise.reject(i)}}};const yt=m.forwardRef(({className:s,...t},a)=>e.jsx("textarea",{className:z("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...t}));yt.displayName="Textarea";const ml=vo,ul=m.createContext({}),Je=({...s})=>e.jsx(ul.Provider,{value:{name:s.name},children:e.jsx(jo,{...s})}),ra=()=>{const s=m.useContext(ul),t=m.useContext(xl),{getFieldState:a,formState:r}=fo(),n=a(s.name,r);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:l}=t;return{id:l,name:s.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...n}},xl=m.createContext({}),Ge=m.forwardRef(({className:s,...t},a)=>{const r=m.useId();return e.jsx(xl.Provider,{value:{id:r},children:e.jsx("div",{ref:a,className:z("space-y-2",s),...t})})});Ge.displayName="FormItem";const Ke=m.forwardRef(({className:s,...t},a)=>{const{error:r,formItemId:n}=ra();return e.jsx(I,{ref:a,className:z(r&&"text-destructive",s),htmlFor:n,...t})});Ke.displayName="FormLabel";const es=m.forwardRef(({...s},t)=>{const{error:a,formItemId:r,formDescriptionId:n,formMessageId:l}=ra();return e.jsx(_a,{ref:t,id:r,"aria-describedby":a?`${n} ${l}`:`${n}`,"aria-invalid":!!a,...s})});es.displayName="FormControl";const ss=m.forwardRef(({className:s,...t},a)=>{const{formDescriptionId:r}=ra();return e.jsx("p",{ref:a,id:r,className:z("text-sm text-muted-foreground",s),...t})});ss.displayName="FormDescription";const ls=m.forwardRef(({className:s,children:t,...a},r)=>{const{error:n,formMessageId:l}=ra(),i=n?String(n==null?void 0:n.message):t;return i?e.jsx("p",{ref:r,id:l,className:z("text-sm font-medium text-destructive",s),...a,children:i}):null});ls.displayName="FormMessage";const Nm=R.object({name:R.string().min(1,"Product name is required").min(2,"Product name must be at least 2 characters").max(100,"Product name must be less than 100 characters").trim(),description:R.string().max(500,"Description must be less than 500 characters").trim().nullable().optional(),price:R.number().min(.01,"Price must be at least 0.01").max(999999.99,"Price must be less than 1,000,000").refine(s=>Number.isFinite(s),"Price must be a valid number").refine(s=>Number(s.toFixed(2))===s,"Price can have maximum 2 decimal places"),category_id:R.string().min(1,"Category is required").uuid("Invalid category ID"),image_url:R.string().optional().nullable().refine(s=>{if(!s||s===""||s.startsWith("/")||s.startsWith("data:")||s.startsWith("blob:"))return!0;try{return new URL(s),!0}catch{return!1}},"Invalid image URL"),is_available:R.boolean().default(!0),is_veg:R.boolean().nullable().optional(),type:R.enum(["food"],{required_error:"Product type is required",invalid_type_error:"Product type must be food"})}),wm=R.object({name:R.string().min(1,"Category name is required").min(2,"Category name must be at least 2 characters").max(50,"Category name must be less than 50 characters").trim(),type:R.enum(["food"],{required_error:"Category type is required",invalid_type_error:"Category type must be food"}),image_url:R.string().optional().nullable().refine(s=>{if(!s||s===""||s.startsWith("/")||s.startsWith("data:")||s.startsWith("blob:"))return!0;try{return new URL(s),!0}catch{return!1}},"Invalid image URL"),is_visible:R.boolean().default(!0),sort_order:R.number().int("Sort order must be a whole number").min(0,"Sort order must be 0 or greater").max(999,"Sort order must be less than 1000").nullable().optional()});R.object({type:R.enum(["percentage","fixed_amount","set_price"],{required_error:"Update type is required"}),value:R.number().min(.01,"Value must be at least 0.01").max(999999.99,"Value must be less than 1,000,000"),product_ids:R.array(R.string().uuid("Invalid product ID")).min(1,"At least one product must be selected").max(100,"Cannot update more than 100 products at once")});R.object({files:R.array(R.instanceof(File)).min(1,"At least one image is required").max(5,"Maximum 5 images allowed").refine(s=>s.every(t=>t.size<=5*1024*1024),"Each image must be smaller than 5MB").refine(s=>s.every(t=>["image/jpeg","image/png","image/webp"].includes(t.type)),"Only JPEG, PNG, and WebP images are allowed"),compress:R.boolean().default(!0),quality:R.number().min(.1,"Quality must be at least 0.1").max(1,"Quality must be at most 1").default(.8)});R.object({status:R.enum(["pending","confirmed","preparing","out_for_delivery","delivered","cancelled"],{required_error:"Order status is required"}),estimated_delivery_time:R.string().datetime("Invalid delivery time format").nullable().optional(),notes:R.string().max(200,"Notes must be less than 200 characters").trim().nullable().optional()});R.object({title:R.string().min(1,"Promotion title is required").min(3,"Title must be at least 3 characters").max(100,"Title must be less than 100 characters").trim(),description:R.string().max(300,"Description must be less than 300 characters").trim().nullable().optional(),image_url:R.string().min(1,"Promotion image is required").refine(s=>{if(s.startsWith("/")||s.startsWith("data:")||s.startsWith("blob:"))return!0;try{return new URL(s),!0}catch{return!1}},"Invalid image URL"),is_active:R.boolean().default(!0),start_date:R.string().datetime("Invalid start date format").nullable().optional(),end_date:R.string().datetime("Invalid end date format").nullable().optional(),sort_order:R.number().int("Sort order must be a whole number").min(0,"Sort order must be 0 or greater").max(999,"Sort order must be less than 1000").nullable().optional()}).refine(s=>s.start_date&&s.end_date?new Date(s.start_date)<new Date(s.end_date):!0,{message:"End date must be after start date",path:["end_date"]});R.object({search:R.string().max(100,"Search term must be less than 100 characters").trim().optional(),category_id:R.string().uuid("Invalid category ID").nullable().optional(),type:R.enum(["food"]).nullable().optional(),is_available:R.boolean().nullable().optional(),is_veg:R.boolean().nullable().optional(),min_price:R.number().min(0,"Minimum price must be 0 or greater").nullable().optional(),max_price:R.number().min(0,"Maximum price must be 0 or greater").nullable().optional(),sort_by:R.enum(["name","price","created_at","updated_at"]).default("name"),sort_order:R.enum(["asc","desc"]).default("asc")}).refine(s=>s.min_price!==null&&s.max_price!==null&&s.min_price!==void 0&&s.max_price!==void 0?s.min_price<=s.max_price:!0,{message:"Maximum price must be greater than or equal to minimum price",path:["max_price"]});R.object({email:R.string().email("Invalid email address").min(1,"Email is required"),first_name:R.string().min(1,"First name is required").min(2,"First name must be at least 2 characters").max(50,"First name must be less than 50 characters").trim(),last_name:R.string().min(1,"Last name is required").min(2,"Last name must be at least 2 characters").max(50,"Last name must be less than 50 characters").trim(),phone:R.string().regex(/^\+?[\d\s\-\(\)]{10,15}$/,"Invalid phone number format").nullable().optional(),role:R.enum(["admin","super_admin"]).default("admin")});R.object({field:R.enum(["price","is_available","category_id","name"]),value:R.union([R.string(),R.number(),R.boolean()]),product_id:R.string().uuid("Invalid product ID")});const gs={maxFileSize:5*1024*1024,allowedTypes:["image/jpeg","image/png","image/webp"],maxImages:5,compressionQuality:.8,maxDimensions:{width:2048,height:2048}},rr=(s,t=gs)=>{if(!t.allowedTypes.includes(s.type))throw new Error(`Invalid file type. Please use ${t.allowedTypes.join(", ").replace(/image\//g,"").toUpperCase()}.`);if(s.size>t.maxFileSize){const a=t.maxFileSize/1048576;throw new Error(`File too large. Maximum size is ${a}MB.`)}return!0},_m=(s,t,a=gs.maxDimensions)=>{const r=s/t;let n=s,l=t;return(s>a.width||t>a.height)&&(r>1?(n=Math.min(s,a.width),l=n/r):(l=Math.min(t,a.height),n=l*r)),{width:Math.round(n),height:Math.round(l)}},Cm=async(s,t=gs.compressionQuality,a=gs.maxDimensions)=>new Promise((r,n)=>{const l=document.createElement("canvas"),i=l.getContext("2d"),o=new Image;if(!i){n(new Error("Canvas context not available"));return}o.onload=()=>{try{const{width:c,height:d}=_m(o.width,o.height,a);l.width=c,l.height=d,i.drawImage(o,0,0,c,d),l.toBlob(g=>{if(g){const v=new File([g],s.name,{type:s.type,lastModified:Date.now()});r(v)}else n(new Error("Image compression failed"))},s.type,t)}catch(c){n(c)}finally{URL.revokeObjectURL(o.src)}},o.onerror=()=>{n(new Error("Failed to load image for compression")),URL.revokeObjectURL(o.src)},o.src=URL.createObjectURL(s)}),Sm=s=>{var n;const t=((n=s.split(".").pop())==null?void 0:n.toLowerCase())||"jpg",a=Date.now(),r=Math.random().toString(36).substring(2,8);return`${a}-${r}.${t}`},Fm=(s,t)=>`${t}/${s}`,nr=async(s,t="products",a=gs)=>{try{rr(s,a);const r=await Cm(s,a.compressionQuality,a.maxDimensions),n=Sm(s.name),l=Fm(n,t),{data:i,error:o}=await M.storage.from("images").upload(l,r,{cacheControl:"3600",upsert:!1});if(o)throw console.error("Supabase storage upload error:",o),new Error(`Upload failed: ${o.message}`);const{data:{publicUrl:c}}=M.storage.from("images").getPublicUrl(l);return{path:i.path,url:l,publicUrl:c}}catch(r){throw console.error("Image upload error:",r),r}},km=async(s,t="products",a=gs)=>{if(s.length===0)return[];if(s.length>a.maxImages)throw new Error(`Too many files. Maximum ${a.maxImages} images allowed.`);const r=s.map(n=>nr(n,t,a));try{return(await Promise.all(r)).map(l=>l.publicUrl)}catch(n){throw console.error("Batch upload error:",n),n}},$s=async s=>{try{const t=s||"",{data:a,error:r}=await M.storage.from("images").list(t,{limit:100,offset:0,sortBy:{column:"created_at",order:"desc"}});if(r)throw console.error("Error fetching images:",r),r;return a?a.map(n=>{var o;const l=s?`${s}/${n.name}`:n.name,{data:{publicUrl:i}}=M.storage.from("images").getPublicUrl(l);return{id:n.id||n.name,name:n.name,url:l,publicUrl:i,size:(o=n.metadata)==null?void 0:o.size,category:s||Pm(l),created_at:n.created_at||new Date().toISOString(),updated_at:n.updated_at||new Date().toISOString()}}):[]}catch(t){throw console.error("Error getting images:",t),t}},Pm=s=>s.startsWith("products/")?"products":s.startsWith("categories/")?"categories":s.startsWith("promotions/")?"promotions":"products",hl=async s=>{try{const{error:t}=await M.storage.from("images").remove([s]);if(t)throw console.error("Error deleting image:",t),t}catch(t){throw console.error("Error deleting image:",t),t}},Ut=s=>{if(s===0)return"0 Bytes";const t=1024,a=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,r)).toFixed(2))+" "+a[r]},ir=({selectedImageUrl:s,onImageSelect:t,context:a="all",buttonText:r="Choose Image"})=>{const[n,l]=m.useState(!1),[i,o]=m.useState(""),[c,d]=m.useState([]),[g,v]=m.useState(!1),[x,h]=m.useState(null),b=async()=>{v(!0);try{let p=[];if(a==="all"){const[_,E,C]=await Promise.all([$s("products").catch(()=>[]),$s("categories").catch(()=>[]),$s("promotions").catch(()=>[])]);p=[..._,...E,...C]}else p=await $s(a);d(p)}catch(p){console.error("Error loading images:",p),ee({title:"Error",description:"Failed to load images from storage",variant:"destructive"})}finally{v(!1)}};m.useEffect(()=>{n&&b()},[n,a]);const u=m.useMemo(()=>{let p=c;return a==="products"?p=c.filter(_=>_.category==="products"):a==="categories"&&(p=c.filter(_=>_.category==="categories")),p.filter(_=>_.name.toLowerCase().includes(i.toLowerCase())||_.category.toLowerCase().includes(i.toLowerCase()))},[c,a,i]),j=p=>{t(p),l(!1)},f=async(p,_)=>{if(_.stopPropagation(),!!confirm(`Are you sure you want to delete ${p.name}?`)){h(p.id);try{await hl(p.url),ee({title:"Success",description:"Image deleted successfully"}),b()}catch(E){console.error("Error deleting image:",E),ee({title:"Error",description:"Failed to delete image",variant:"destructive"})}finally{h(null)}}},y=u.find(p=>p.publicUrl===s);return e.jsxs(dt,{open:n,onOpenChange:l,children:[e.jsx(Ga,{asChild:!0,children:e.jsxs(N,{type:"button",variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),r]})}),e.jsxs(Zs,{className:"max-w-4xl max-h-[80vh] bg-slate-800 border-slate-700",children:[e.jsx(Js,{children:e.jsxs(Xs,{className:"text-white flex items-center justify-between",children:[e.jsx("span",{children:"Choose an Image"}),e.jsxs("div",{className:"flex items-center gap-2",children:[g?e.jsxs("div",{className:"flex items-center gap-1 text-slate-400 text-sm",children:[e.jsx(js,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Loading..."})]}):e.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-sm",children:[e.jsx(ot,{className:"w-4 h-4"}),e.jsx("span",{children:"Storage Ready"})]}),e.jsx(N,{onClick:b,disabled:g,variant:"outline",size:"sm",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:g?e.jsx(js,{className:"w-4 h-4 animate-spin"}):e.jsx(js,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx(B,{placeholder:"Search images...",value:i,onChange:p=>o(p.target.value),className:"pl-9 bg-slate-700 border-slate-600 text-slate-300"})]}),a!=="all"&&e.jsxs("div",{className:"text-sm text-slate-400 bg-slate-700 p-2 rounded-md",children:[e.jsx("strong",{children:"Context:"})," Showing images for ",a]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-slate-300",children:[e.jsx("strong",{children:u.length})," images found"]}),e.jsxs("div",{className:"text-blue-400",children:[e.jsx("strong",{children:u.filter(p=>p.category==="products").length})," products"]}),e.jsxs("div",{className:"text-green-400",children:[e.jsx("strong",{children:u.filter(p=>p.category==="categories").length})," categories"]}),e.jsxs("div",{className:"text-purple-400",children:[e.jsx("strong",{children:u.filter(p=>p.category==="promotions").length})," promotions"]})]}),y&&e.jsxs(k,{className:"bg-slate-700 border-slate-600",children:[e.jsx(V,{className:"pb-2",children:e.jsx(H,{className:"text-sm text-slate-200",children:"Currently Selected"})}),e.jsx(T,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded overflow-hidden bg-slate-600 flex items-center justify-center",children:e.jsx("img",{src:y.publicUrl,alt:y.name,className:"w-full h-full object-cover",onError:p=>{p.target.style.display="none",p.target.parentElement.innerHTML='<div class="text-slate-400 w-full h-full flex items-center justify-center"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg></div>'}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-200",children:y.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(G,{variant:"outline",className:"text-xs border-slate-500 text-blue-400 border-blue-500",children:y.category}),y.size&&e.jsx(G,{variant:"outline",className:"text-xs border-slate-500 text-slate-300",children:Ut(y.size)})]})]}),e.jsx(N,{onClick:()=>window.open(y.publicUrl,"_blank"),variant:"outline",size:"sm",className:"border-slate-600 text-slate-300 hover:bg-slate-600",children:e.jsx(Qs,{className:"w-4 h-4"})})]})})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:u.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(ds,{className:"w-16 h-16 mx-auto mb-4 text-slate-600"}),e.jsx("p",{className:"text-lg font-medium",children:"No images found"}),e.jsx("p",{className:"text-sm",children:i?"Try adjusting your search term":g?"Loading images...":"No images available for this context"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:u.map(p=>e.jsx(k,{className:`cursor-pointer transition-all duration-200 bg-slate-700 border-slate-600 hover:border-slate-500 ${s===p.publicUrl?"ring-2 ring-blue-500 border-blue-500":""}`,onClick:()=>j(p.publicUrl),children:e.jsx(T,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"aspect-square bg-slate-600 rounded overflow-hidden relative",children:[e.jsx("img",{src:p.publicUrl,alt:p.name,className:"w-full h-full object-cover",onError:_=>{_.target.style.display="none",_.target.parentElement.innerHTML='<div class="text-slate-400 w-full h-full flex items-center justify-center"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg></div>'}}),s===p.publicUrl&&e.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-blue-500 rounded-full p-1",children:e.jsx(Vt,{className:"w-4 h-4 text-white"})})}),e.jsx(G,{variant:"secondary",className:"absolute top-1 left-1 text-xs bg-black/60 text-white border-none",children:p.category}),e.jsx(N,{onClick:_=>f(p,_),disabled:x===p.id,variant:"destructive",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0",children:x===p.id?e.jsx(js,{className:"w-3 h-3 animate-spin"}):e.jsx(ms,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-slate-200 truncate",title:p.name,children:p.name}),p.size&&e.jsx("p",{className:"text-xs text-slate-500",children:Ut(p.size)})]})]})})},p.id))})}),e.jsxs("div",{className:"text-xs text-slate-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Supabase Storage:"})," Images are stored securely in Supabase Storage"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Organized:"})," Images are organized by category (products, categories, promotions)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tip:"})," Upload new images via the forms to have them appear here"]})]})]}),e.jsxs($t,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsxs(G,{variant:"outline",className:"border-slate-500 text-slate-300",children:[u.length," image",u.length!==1?"s":""]}),s&&e.jsx(G,{variant:"outline",className:"border-blue-500 text-blue-300",children:"Selected"})]}),e.jsx(N,{onClick:()=>l(!1),variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Close"})]})]})]})},Tm=({product:s,categories:t,onSubmit:a,onCancel:r,loading:n=!1})=>{const[l,i]=m.useState(null),[o,c]=m.useState((s==null?void 0:s.image_url)||null),[d,g]=m.useState(!1),[v,x]=m.useState(0),[h,b]=m.useState(!1),u=gt({resolver:jt(Nm),defaultValues:{name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",price:(s==null?void 0:s.price)||0,category_id:(s==null?void 0:s.category_id)||"",type:(s==null?void 0:s.type)||"food",is_veg:(s==null?void 0:s.is_veg)??!0,is_available:(s==null?void 0:s.is_available)??!0,image_url:(s==null?void 0:s.image_url)||""}}),j=u.watch("type");m.useEffect(()=>{s&&(u.reset({name:s.name,description:s.description||"",price:s.price,category_id:s.category_id,type:s.type,is_veg:s.is_veg??!0,is_available:s.is_available,image_url:s.image_url||""}),c(s.image_url))},[s,u]);const f=C=>{u.setValue("image_url",C),c(C),i(null)},y=async C=>{var F;const D=(F=C.target.files)==null?void 0:F[0];if(D)try{b(!0),rr(D,gs),i(D);const P=new FileReader;P.onloadend=()=>{c(P.result)},P.readAsDataURL(D),u.setValue("image_url",""),ee({title:"Image Selected",description:"Image ready for upload. Submit form to save."})}catch(P){console.error("Error processing image:",P),ee({title:"Error",description:P instanceof Error?P.message:"Failed to process image. Please try again.",variant:"destructive"})}finally{b(!1)}},p=()=>{i(null),c(null),u.setValue("image_url",""),x(0)},_=async C=>{g(!0),x(0);try{let D=C.image_url||"";if(l)try{x(25),D=(await nr(l,"products",gs)).publicUrl,x(75),ee({title:"Image Uploaded",description:"Product image uploaded successfully to Supabase Storage"})}catch(P){console.error("Image upload failed:",P),ee({title:"Upload Failed",description:P instanceof Error?P.message:"Image upload failed, but product will be saved without image",variant:"destructive"})}x(90);const F={...C,image_url:D||null,description:C.description||null,is_veg:j==="food"?C.is_veg:null};await a(F),x(100),i(null),c(null)}catch(D){console.error("Error submitting form:",D),ee({title:"Error",description:"Failed to save product. Please try again.",variant:"destructive"})}finally{g(!1),x(0)}},E=t.filter(C=>C.type===j);return e.jsxs(k,{className:"w-full max-w-2xl mx-auto",children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[s?"Edit Product":"Add New Product",d&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})]})}),e.jsx(T,{children:e.jsx(ml,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(_),className:"space-y-6",children:[d&&v>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Saving product..."}),e.jsxs("span",{children:[v,"%"]})]}),e.jsx(as,{value:v,className:"w-full"})]}),e.jsx(Je,{control:u.control,name:"image_url",render:({field:C})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Product Image"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ir,{selectedImageUrl:C.value||"",onImageSelect:f,context:"products",buttonText:"Choose Product Image"}),C.value&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx("span",{children:"Selected:"}),e.jsx("a",{href:C.value,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline truncate max-w-xs",children:C.value}),e.jsx(N,{type:"button",onClick:()=>f(""),variant:"outline",size:"sm",className:"h-6 px-2 text-xs",children:"Clear"})]})]}),e.jsx(ss,{children:"Select from available product images in Supabase Storage, or upload a new image below."}),e.jsx(ls,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Or upload a new image"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:[o&&l?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:o,alt:"Product preview",className:"w-20 h-20 object-cover rounded-lg border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Image ready for upload"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Will be uploaded to Supabase Storage when you save the product"})]}),e.jsx(N,{type:"button",onClick:p,variant:"outline",size:"sm",children:e.jsx(os,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(B,{type:"file",accept:"image/jpeg,image/png,image/webp",onChange:y,disabled:h||d,className:"w-full"})}),h&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 text-sm text-blue-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Processing image..."]})]}),e.jsxs(Se,{children:[e.jsx(Dt,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Supported formats: JPEG, PNG, WebP  Max size: 5MB  Images are uploaded to Supabase Storage"})]})]}),e.jsx(Je,{control:u.control,name:"type",render:({field:C})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Product Type *"}),e.jsxs(Ie,{onValueChange:C.onChange,defaultValue:C.value,children:[e.jsx(es,{children:e.jsx(De,{children:e.jsx(Re,{placeholder:"Select product type"})})}),e.jsx(Ae,{children:e.jsx(W,{value:"food",children:"Food"})})]}),e.jsx(ls,{})]})}),e.jsx(Je,{control:u.control,name:"name",render:({field:C})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Product Name *"}),e.jsx(es,{children:e.jsx(B,{placeholder:"Enter product name",...C})}),e.jsx(ss,{children:"A clear, descriptive name for your product (2-100 characters)"}),e.jsx(ls,{})]})}),e.jsx(Je,{control:u.control,name:"description",render:({field:C})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Description"}),e.jsx(es,{children:e.jsx(yt,{placeholder:"Enter product description...",className:"resize-none",rows:3,...C})}),e.jsx(ss,{children:"Optional detailed description of the product (max 500 characters)"}),e.jsx(ls,{})]})}),e.jsx(Je,{control:u.control,name:"price",render:({field:C})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Price () *"}),e.jsx(es,{children:e.jsx(B,{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",...C,onChange:D=>C.onChange(parseFloat(D.target.value)||0)})}),e.jsx(ss,{children:"Product price in rupees (minimum 0.01)"}),e.jsx(ls,{})]})}),e.jsx(Je,{control:u.control,name:"category_id",render:({field:C})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Category *"}),e.jsxs(Ie,{onValueChange:C.onChange,defaultValue:C.value,children:[e.jsx(es,{children:e.jsx(De,{children:e.jsx(Re,{placeholder:"Select a category"})})}),e.jsx(Ae,{children:E.map(D=>e.jsx(W,{value:D.id,children:D.name},D.id))})]}),E.length===0&&e.jsxs(ss,{className:"text-amber-600",children:["No ",j," categories available. Please create a category first."]}),e.jsx(ls,{})]})}),j==="food"&&e.jsx(Je,{control:u.control,name:"is_veg",render:({field:C})=>e.jsxs(Ge,{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ke,{children:"Vegetarian"}),e.jsx(ss,{children:"Mark this product as vegetarian"})]}),e.jsx(es,{children:e.jsx(ts,{checked:C.value,onCheckedChange:C.onChange})})]})}),e.jsx(Je,{control:u.control,name:"is_available",render:({field:C})=>e.jsxs(Ge,{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ke,{children:"Available"}),e.jsx(ss,{children:"Product is available for ordering"})]}),e.jsx(es,{children:e.jsx(ts,{checked:C.value,onCheckedChange:C.onChange})})]})}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(N,{type:"button",variant:"outline",onClick:r,disabled:d,children:"Cancel"}),e.jsx(N,{type:"submit",disabled:d||n||E.length===0,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s?"Updating...":"Creating..."]}):s?"Update Product":"Create Product"})]})]})})})]})},gl=Gl,pl=Kl,Em=m.forwardRef(({className:s,inset:t,children:a,...r},n)=>e.jsxs(Wr,{ref:n,className:z("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...r,children:[a,e.jsx(pn,{className:"ml-auto h-4 w-4"})]}));Em.displayName=Wr.displayName;const Dm=m.forwardRef(({className:s,...t},a)=>e.jsx(Qr,{ref:a,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Dm.displayName=Qr.displayName;const lr=m.forwardRef(({className:s,sideOffset:t=4,...a},r)=>e.jsx(Hl,{children:e.jsx(Yr,{ref:r,sideOffset:t,className:z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));lr.displayName=Yr.displayName;const hs=m.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(Zr,{ref:r,className:z("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...a}));hs.displayName=Zr.displayName;const Am=m.forwardRef(({className:s,children:t,checked:a,...r},n)=>e.jsxs(Jr,{ref:n,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Xr,{children:e.jsx(Vt,{className:"h-4 w-4"})})}),t]}));Am.displayName=Jr.displayName;const Im=m.forwardRef(({className:s,children:t,...a},r)=>e.jsxs(en,{ref:r,className:z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Xr,{children:e.jsx(eo,{className:"h-2 w-2 fill-current"})})}),t]}));Im.displayName=en.displayName;const Rm=m.forwardRef(({className:s,inset:t,...a},r)=>e.jsx(sn,{ref:r,className:z("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...a}));Rm.displayName=sn.displayName;const qt=m.forwardRef(({className:s,...t},a)=>e.jsx(tn,{ref:a,className:z("-mx-1 my-1 h-px bg-muted",s),...t}));qt.displayName=tn.displayName;const fl=()=>{const s=Cs(),t=xe({mutationFn:async i=>{const o={name:i.name,type:i.type,image_url:i.image_url,is_visible:i.is_visible,sort_order:i.sort_order},{data:c,error:d}=await M.from("categories").insert(o).select().single();if(d)throw console.error("Error adding category:",d),d;return c},onSuccess:i=>{s.invalidateQueries({queryKey:["categories"]}),ee({title:"Category Added",description:`${i.name} category has been successfully added.`})},onError:i=>{console.error("Failed to add category:",i),ee({title:"Error",description:"Failed to add category. Please try again.",variant:"destructive"})}}),a=xe({mutationFn:async({id:i,updates:o})=>{console.log("Updating category:",{id:i,updates:o});const c={name:o.name,type:o.type,image_url:o.image_url,is_visible:o.is_visible,sort_order:o.sort_order},{data:d,error:g}=await M.from("categories").update(c).eq("id",i).select().single();if(g)throw console.error("Error updating category:",g),console.error("Error details:",{message:g.message,code:g.code,details:g.details,hint:g.hint}),g;return console.log("Category updated successfully:",d),d},onMutate:async({id:i,updates:o})=>{await s.cancelQueries({queryKey:["categories"]});const c=s.getQueryData(["categories"]);return s.setQueryData(["categories"],d=>d&&d.map(g=>g.id===i?{...g,...o}:g)),{previousCategories:c}},onSuccess:i=>{s.invalidateQueries({queryKey:["categories"]}),ee({title:"Category Updated",description:`${i.name} has been successfully updated.`})},onError:(i,o,c)=>{c!=null&&c.previousCategories&&s.setQueryData(["categories"],c.previousCategories),console.error("Failed to update category:",i),ee({title:"Error",description:"Failed to update category. Please try again.",variant:"destructive"})},onSettled:()=>{s.invalidateQueries({queryKey:["categories"]})}}),r=xe({mutationFn:async i=>{const{data:o,error:c}=await M.from("products").select("id").eq("category_id",i).limit(1);if(c)throw console.error("Error checking category products:",c),c;if(o&&o.length>0)throw new Error("Cannot delete category that contains products");const{error:d}=await M.from("categories").delete().eq("id",i);if(d)throw console.error("Error deleting category:",d),d},onMutate:async i=>{await s.cancelQueries({queryKey:["categories"]});const o=s.getQueryData(["categories"]);return s.setQueryData(["categories"],c=>c&&c.filter(d=>d.id!==i)),{previousCategories:o}},onSuccess:()=>{s.invalidateQueries({queryKey:["categories"]}),ee({title:"Category Deleted",description:"Category has been successfully deleted."})},onError:(i,o,c)=>{c!=null&&c.previousCategories&&s.setQueryData(["categories"],c.previousCategories),console.error("Failed to delete category:",i);const d=i.message==="Cannot delete category that contains products"?"Cannot delete category that contains products. Please move or delete products first.":"Failed to delete category. Please try again.";ee({title:"Error",description:d,variant:"destructive"})},onSettled:()=>{s.invalidateQueries({queryKey:["categories"]})}}),n=xe({mutationFn:async({id:i,isVisible:o})=>{var v;console.log("Toggle visibility called:",{id:i,isVisible:o});const{data:{session:c}}=await M.auth.getSession();if(console.log("Current session:",c?"authenticated":"not authenticated"),!c)throw new Error("You must be logged in to update category visibility");const{data:d,error:g}=await M.from("categories").update({is_visible:o}).eq("id",i).select().single();if(g)throw console.error("Error toggling category visibility:",g),console.error("Error details:",{message:g.message,code:g.code,details:g.details,hint:g.hint}),g.code==="PGRST116"&&((v=g.details)!=null&&v.includes("0 rows"))?new Error("Permission denied: Unable to update category. Please check your access permissions."):g;return console.log("Category visibility updated successfully:",d),d},onMutate:async({id:i,isVisible:o})=>{await s.cancelQueries({queryKey:["categories"]});const c=s.getQueryData(["categories"]);return s.setQueryData(["categories"],d=>d&&d.map(g=>g.id===i?{...g,is_visible:o}:g)),{previousCategories:c}},onSuccess:i=>{s.invalidateQueries({queryKey:["categories"]}),ee({title:"Visibility Updated",description:`${i.name} is now ${i.is_visible?"visible":"hidden"}.`})},onError:(i,o,c)=>{c!=null&&c.previousCategories&&s.setQueryData(["categories"],c.previousCategories),console.error("Failed to toggle category visibility:",i),ee({title:"Error",description:"Failed to update category visibility. Please try again.",variant:"destructive"})},onSettled:()=>{s.invalidateQueries({queryKey:["categories"]})}}),l=xe({mutationFn:async i=>{const o=i.map(({id:g,sort_order:v})=>M.from("categories").update({sort_order:v}).eq("id",g)),d=(await Promise.allSettled(o)).filter(g=>g.status==="rejected");if(d.length>0)throw new Error(`${d.length} sort order updates failed`)},onSuccess:()=>{s.invalidateQueries({queryKey:["categories"]}),ee({title:"Order Updated",description:"Category order has been successfully updated."})},onError:i=>{console.error("Failed to update sort order:",i),ee({title:"Error",description:"Failed to update category order. Please try again.",variant:"destructive"})}});return{addCategory:t,updateCategory:a,deleteCategory:r,toggleVisibility:n,updateSortOrder:l}},Mm=({categories:s,loading:t,onEdit:a,onDelete:r,onToggleVisibility:n,onAddNew:l,onReorder:i})=>{const[o,c]=m.useState(null),{deleteCategory:d,updateCategory:g,toggleVisibility:v}=fl(),x=m.useMemo(()=>[...s].sort((f,y)=>f.sort_order!==y.sort_order?f.sort_order-y.sort_order:f.name.localeCompare(y.name)),[s]),h=async f=>{if(confirm("Are you sure you want to delete this category? This action cannot be undone."))try{c(f),await d.mutateAsync(f),r(f),ge.success("Category deleted successfully")}catch(y){console.error("Delete category error:",y),ge.error("Failed to delete category")}finally{c(null)}},b=async f=>{try{c(f.id);const y=!f.is_visible;await v.mutateAsync({id:f.id,isVisible:y}),n(f.id,y),ge.success(`Category ${y?"made visible":"hidden"}`)}catch(y){console.error("Toggle visibility error:",y),ge.error("Failed to update category visibility")}finally{c(null)}},u=async(f,y)=>{if(i)try{c(f.id);const p=x.findIndex(E=>E.id===f.id);let _=f.sort_order||0;y==="up"&&p>0?_=(x[p-1].sort_order||0)-1:y==="down"&&p<x.length-1&&(_=(x[p+1].sort_order||0)+1),await g.mutateAsync({id:f.id,updates:{sort_order:_}}),i(f.id,y),ge.success("Category order updated")}catch(p){console.error("Reorder error:",p),ge.error("Failed to update category order")}finally{c(null)}},j=({title:f,categories:y,type:p})=>e.jsxs(k,{className:"mb-6",children:[e.jsx(V,{className:"flex flex-row items-center justify-between",children:e.jsxs(H,{className:"flex items-center gap-2",children:[f,e.jsxs(G,{variant:"outline",className:p==="food"?"border-orange-200 text-orange-800":"border-blue-200 text-blue-800",children:[y.length," ",y.length===1?"category":"categories"]})]})}),e.jsx(T,{children:y.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ds,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsxs("p",{children:["No ",p," categories yet"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:l,className:"mt-2",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add First Category"]})]}):e.jsxs(sa,{children:[e.jsx(ta,{children:e.jsxs(qs,{children:[e.jsx(je,{className:"w-16",children:"Image"}),e.jsx(je,{children:"Name"}),e.jsx(je,{className:"w-24",children:"Visible"}),e.jsx(je,{className:"w-32",children:"Sort Order"}),e.jsx(je,{className:"w-32",children:"Actions"})]})}),e.jsx(aa,{children:y.map((_,E)=>e.jsxs(qs,{children:[e.jsx(ye,{children:_.image_url?e.jsx("img",{src:_.image_url,alt:_.name,className:"h-10 w-10 rounded-md object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-md bg-gray-100 flex items-center justify-center",children:e.jsx(ds,{className:"h-4 w-4 text-gray-400"})})}),e.jsx(ye,{children:e.jsx("div",{className:"font-medium",children:_.name})}),e.jsx(ye,{children:e.jsx(ts,{checked:_.is_visible,onCheckedChange:()=>b(_),disabled:o===_.id})}),e.jsx(ye,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:_.sort_order||0}),i&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx(N,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>u(_,"up"),disabled:E===0||o===_.id,children:e.jsx(fn,{className:"h-3 w-3"})}),e.jsx(N,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:()=>u(_,"down"),disabled:E===y.length-1||o===_.id,children:e.jsx(vn,{className:"h-3 w-3"})})]})]})}),e.jsx(ye,{children:e.jsxs(gl,{children:[e.jsx(pl,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",disabled:o===_.id,children:o===_.id?e.jsx(Pe,{className:"h-4 w-4 animate-spin"}):e.jsx(jn,{className:"h-4 w-4"})})}),e.jsxs(lr,{align:"end",children:[e.jsxs(hs,{onClick:()=>a(_),children:[e.jsx(so,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(hs,{onClick:()=>b(_),children:_.is_visible?e.jsxs(e.Fragment,{children:[e.jsx(et,{className:"h-4 w-4 mr-2"}),"Hide"]}):e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Show"]})}),e.jsx(qt,{}),e.jsxs(hs,{onClick:()=>h(_.id),className:"text-red-600",children:[e.jsx(ms,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},_.id))})]})})]});return t?e.jsx(k,{children:e.jsxs(T,{className:"flex items-center justify-center py-12",children:[e.jsx(Pe,{className:"h-8 w-8 animate-spin mr-2"}),e.jsx("span",{children:"Loading categories..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Category Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your food categories"})]}),e.jsxs(N,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Add Category"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Categories"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(f=>f.is_visible).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Visible Categories"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.filter(f=>!f.is_visible).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Hidden Categories"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Food Categories"})]})})]}),e.jsx(j,{title:"Food Categories",categories:x,type:"food"})]})},Lm=({category:s,onSubmit:t,onCancel:a,submitLabel:r=s?"Update Category":"Create Category"})=>{const[n,l]=m.useState(null),[i,o]=m.useState((s==null?void 0:s.image_url)||""),[c,d]=m.useState(!1),[g,v]=m.useState(0),[x,h]=m.useState(!1),b=m.useRef(null);fl();const u=gt({resolver:jt(wm),defaultValues:{name:(s==null?void 0:s.name)||"",type:(s==null?void 0:s.type)||"food",is_visible:(s==null?void 0:s.is_visible)??!0,sort_order:(s==null?void 0:s.sort_order)||0,image_url:(s==null?void 0:s.image_url)||null}}),{handleSubmit:j,formState:{errors:f,isSubmitting:y},setValue:p,watch:_}=u,E=$=>{u.setValue("image_url",$),o($),l(null)},C=async $=>{if($)try{d(!0),v(0),rr($,gs);const K=setInterval(()=>{v(U=>U>=90?(clearInterval(K),90):U+10)},100);l($);const Q=new FileReader;Q.onloadend=()=>{o(Q.result),clearInterval(K),v(100)},Q.readAsDataURL($),p("image_url",""),ge.success("Image processed successfully")}catch(K){console.error("Image processing error:",K),ge.error(K instanceof Error?K.message:"Failed to process image. Please try again.")}finally{d(!1),v(0)}},D=$=>{var Q;const K=(Q=$.target.files)==null?void 0:Q[0];K&&C(K)},F=$=>{$.preventDefault(),$.stopPropagation(),$.type==="dragenter"||$.type==="dragover"?h(!0):$.type==="dragleave"&&h(!1)},P=$=>{var Q;$.preventDefault(),$.stopPropagation(),h(!1);const K=(Q=$.dataTransfer.files)==null?void 0:Q[0];K&&C(K)},L=()=>{l(null),o(""),p("image_url",null),b.current&&(b.current.value="")},q=async $=>{try{let K=$.image_url;if(n)try{K=(await nr(n,"categories",gs)).publicUrl,ge.success("Category image uploaded successfully to Supabase Storage")}catch(U){console.error("Image upload failed:",U),ge.error(U instanceof Error?U.message:"Image upload failed, but category will be saved without image"),K=null}const Q={...$,image_url:K&&K.trim()!==""?K:null};await t(Q),l(null),o(""),ge.success(`Category ${s?"updated":"created"} successfully`)}catch(K){console.error("Form submission error:",K),ge.error(`Failed to ${s?"update":"create"} category`)}},se=_("is_visible");return _("type"),e.jsxs(k,{className:"w-full max-w-2xl mx-auto",children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-5 w-5"}),s?"Edit Category":"Add New Category"]})}),e.jsx(T,{children:e.jsx(ml,{...u,children:e.jsxs("form",{onSubmit:j(q),className:"space-y-6",children:[e.jsx(Je,{control:u.control,name:"name",render:({field:$})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Category Name *"}),e.jsx(es,{children:e.jsx(B,{placeholder:"Enter category name",...$})}),e.jsx(ss,{children:"A clear, descriptive name for your category"}),e.jsx(ls,{})]})}),e.jsx(Je,{control:u.control,name:"type",render:({field:$})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Category Type *"}),e.jsxs(Ie,{onValueChange:$.onChange,defaultValue:$.value,children:[e.jsx(es,{children:e.jsx(De,{children:e.jsx(Re,{placeholder:"Select category type"})})}),e.jsx(Ae,{children:e.jsx(W,{value:"food",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:"outline",className:"border-orange-200 text-orange-800",children:"Food"}),e.jsx("span",{children:"Food Items"})]})})})]}),e.jsx(ls,{})]})}),e.jsx(Je,{control:u.control,name:"image_url",render:({field:$})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Category Image"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ir,{selectedImageUrl:$.value||"",onImageSelect:E,context:"categories",buttonText:"Choose Category Image"}),$.value&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx("span",{children:"Selected:"}),e.jsx("a",{href:$.value,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline truncate max-w-xs",children:$.value}),e.jsx(N,{type:"button",onClick:()=>E(""),variant:"outline",size:"sm",className:"h-6 px-2 text-xs",children:"Clear"})]})]}),e.jsx(ss,{children:"Select from available category images in Supabase Storage, or upload a new image below."}),e.jsx(ls,{})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Or upload a new image"}),e.jsxs("div",{className:`
                  relative border-2 border-dashed rounded-lg p-6 text-center transition-all
                  ${x?"border-primary bg-primary/5":"border-gray-300"}
                  ${c?"pointer-events-none":"cursor-pointer hover:border-gray-400"}
                `,onDragEnter:F,onDragLeave:F,onDragOver:F,onDrop:P,onClick:()=>{var $;return($=b.current)==null?void 0:$.click()},children:[e.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:D,className:"hidden"}),c?e.jsxs("div",{className:"space-y-3",children:[e.jsx(Pe,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Processing image..."}),e.jsx(as,{value:g,className:"mt-2"})]})]}):i&&n?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:i,alt:"Category preview",className:"mx-auto h-32 w-32 object-cover rounded-lg"}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Image ready for upload"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Will be uploaded to Supabase Storage when you save the category"}),e.jsxs(N,{type:"button",variant:"outline",size:"sm",onClick:$=>{$.stopPropagation(),L()},className:"mt-2",children:[e.jsx(os,{className:"h-4 w-4 mr-1"}),"Remove"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(ot,{className:"h-8 w-8 mx-auto text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, WebP up to 5MB"})]})]})]})]}),e.jsx(Je,{control:u.control,name:"sort_order",render:({field:$})=>e.jsxs(Ge,{children:[e.jsx(Ke,{children:"Sort Order"}),e.jsx(es,{children:e.jsx(B,{type:"number",min:"0",placeholder:"Display order (0 = first)",...$,onChange:K=>$.onChange(parseInt(K.target.value)||0)})}),e.jsx(ss,{children:"Controls the display order of categories (lower numbers appear first)"}),e.jsx(ls,{})]})}),e.jsx(Je,{control:u.control,name:"is_visible",render:({field:$})=>e.jsxs(Ge,{className:"flex items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ke,{children:"Category Visibility"}),e.jsx(ss,{children:se?"Category is visible to customers":"Category is hidden from customers"})]}),e.jsx(es,{children:e.jsx(ts,{checked:$.value,onCheckedChange:$.onChange})})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6",children:[e.jsx(N,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(N,{type:"submit",disabled:y||c,className:"min-w-[120px]",children:y?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 animate-spin mr-2"}),s?"Updating...":"Creating..."]}):r})]})]})})})]})},Om=()=>{const s=Cs(),t=xe({mutationFn:async({id:l,status:i,estimatedDeliveryTime:o})=>{const c={status:i,updated_at:new Date().toISOString()};o&&(c.estimated_delivery_time=o);const{data:d,error:g}=await M.from("orders").update(c).eq("id",l).select().single();if(g)throw console.error("Error updating order status:",g),g;return d},onMutate:async({id:l,status:i})=>{await s.cancelQueries({queryKey:["orders"]});const o=s.getQueryData(["orders"]);return s.setQueryData(["orders"],c=>c&&c.map(d=>d.id===l?{...d,status:i,updated_at:new Date().toISOString()}:d)),{previousOrders:o}},onSuccess:l=>{s.invalidateQueries({queryKey:["orders"]}),ee({title:"Order Status Updated",description:{pending:"Order is now pending",confirmed:"Order has been confirmed",preparing:"Order is being prepared",out_for_delivery:"Order is out for delivery",delivered:"Order has been delivered",cancelled:"Order has been cancelled"}[l.status]||"Order status has been updated"})},onError:(l,i,o)=>{o!=null&&o.previousOrders&&s.setQueryData(["orders"],o.previousOrders),console.error("Failed to update order status:",l),ee({title:"Error",description:"Failed to update order status. Please try again.",variant:"destructive"})},onSettled:()=>{s.invalidateQueries({queryKey:["orders"]})}}),a=xe({mutationFn:async l=>{const i=l.map(({id:d,status:g})=>M.from("orders").update({status:g,updated_at:new Date().toISOString()}).eq("id",d)),c=(await Promise.allSettled(i)).filter(d=>d.status==="rejected");if(c.length>0)throw new Error(`${c.length} order updates failed`)},onSuccess:(l,i)=>{s.invalidateQueries({queryKey:["orders"]}),ee({title:"Orders Updated",description:`${i.length} orders have been successfully updated.`})},onError:l=>{console.error("Failed to bulk update orders:",l),ee({title:"Error",description:"Some order updates failed. Please check and try again.",variant:"destructive"})}}),r=xe({mutationFn:async l=>{const{data:i,error:o}=await M.from("orders").select("status").eq("id",l).single();if(o)throw console.error("Error fetching order:",o),o;if(i.status==="delivered"||i.status==="cancelled")throw new Error("Cannot cancel delivered or already cancelled orders");const{data:c,error:d}=await M.from("orders").update({status:"cancelled",updated_at:new Date().toISOString()}).eq("id",l).select().single();if(d)throw console.error("Error cancelling order:",d),d;return c},onMutate:async l=>{await s.cancelQueries({queryKey:["orders"]});const i=s.getQueryData(["orders"]);return s.setQueryData(["orders"],o=>o&&o.map(c=>c.id===l?{...c,status:"cancelled",updated_at:new Date().toISOString()}:c)),{previousOrders:i}},onSuccess:()=>{s.invalidateQueries({queryKey:["orders"]}),ee({title:"Order Cancelled",description:"Order has been successfully cancelled."})},onError:(l,i,o)=>{o!=null&&o.previousOrders&&s.setQueryData(["orders"],o.previousOrders),console.error("Failed to cancel order:",l);const c=l.message==="Cannot cancel delivered or already cancelled orders"?"Cannot cancel delivered or already cancelled orders.":"Failed to cancel order. Please try again.";ee({title:"Error",description:c,variant:"destructive"})},onSettled:()=>{s.invalidateQueries({queryKey:["orders"]})}}),n=xe({mutationFn:async({id:l,estimatedDeliveryTime:i})=>{const{data:o,error:c}=await M.from("orders").update({estimated_delivery_time:i,updated_at:new Date().toISOString()}).eq("id",l).select().single();if(c)throw console.error("Error updating estimated delivery time:",c),c;return o},onSuccess:()=>{s.invalidateQueries({queryKey:["orders"]}),ee({title:"Delivery Time Updated",description:"Estimated delivery time has been updated."})},onError:l=>{console.error("Failed to update delivery time:",l),ee({title:"Error",description:"Failed to update delivery time. Please try again.",variant:"destructive"})}});return{updateOrderStatus:t,bulkUpdateOrderStatus:a,cancelOrder:r,updateEstimatedDeliveryTime:n}},$m=({orders:s,loading:t,onRefresh:a,onViewDetails:r,onUpdateStatus:n})=>{const[l,i]=m.useState(""),[o,c]=m.useState("all"),[d,g]=m.useState("all"),[v,x]=m.useState([]),[h,b]=m.useState(null),{updateOrderStatus:u,bulkUpdateOrderStatus:j}=Om(),f=m.useMemo(()=>s.filter(F=>{var se,$,K;const P=!l||F.id.toLowerCase().includes(l.toLowerCase())||((se=F.profiles)==null?void 0:se.email.toLowerCase().includes(l.toLowerCase()))||`${($=F.profiles)==null?void 0:$.first_name} ${(K=F.profiles)==null?void 0:K.last_name}`.toLowerCase().includes(l.toLowerCase()),L=o==="all"||F.status===o;let q=!0;if(d!=="all"){const Q=new Date(F.created_at),U=new Date;switch(d){case"today":q=Q.toDateString()===U.toDateString();break;case"week":const A=new Date(U.getTime()-7*24*60*60*1e3);q=Q>=A;break;case"month":const w=new Date(U.getTime()-30*24*60*60*1e3);q=Q>=w;break}}return P&&L&&q}),[s,l,o,d]),y=m.useMemo(()=>{const F=f.length,P=f.filter(U=>U.status==="pending").length,L=f.filter(U=>U.status==="confirmed").length,q=f.filter(U=>U.status==="preparing").length,se=f.filter(U=>U.status==="out_for_delivery").length,$=f.filter(U=>U.status==="delivered").length,K=f.filter(U=>U.status==="cancelled").length,Q=f.reduce((U,A)=>U+A.total_amount,0);return{total:F,pending:P,confirmed:L,preparing:q,outForDelivery:se,delivered:$,cancelled:K,totalValue:Q}},[f]),p=async(F,P)=>{try{b(F),await u.mutateAsync({id:F,status:P,estimatedDeliveryTime:void 0}),n(F,P),ge.success("Order status updated successfully")}catch(L){console.error("Status update error:",L),ge.error("Failed to update order status")}finally{b(null)}},_=async F=>{if(v.length===0){ge.error("Please select orders to update");return}try{const P=v.map(L=>({id:L,status:F}));await j.mutateAsync(P),v.forEach(L=>n(L,F)),x([]),ge.success(`${v.length} orders updated successfully`)}catch(P){console.error("Bulk update error:",P),ge.error("Failed to update orders")}},E=F=>{const P={pending:{variant:"secondary",icon:Te,label:"Pending"},confirmed:{variant:"default",icon:Ne,label:"Confirmed"},preparing:{variant:"default",icon:be,label:"Preparing"},out_for_delivery:{variant:"default",icon:_s,label:"Out for Delivery"},delivered:{variant:"default",icon:Ne,label:"Delivered"},cancelled:{variant:"destructive",icon:Ns,label:"Cancelled"}},L=P[F]||P.pending,q=L.icon;return e.jsxs(G,{variant:L.variant,className:"flex items-center gap-1",children:[e.jsx(q,{className:"h-3 w-3"}),L.label]})},C=F=>{x(P=>P.includes(F)?P.filter(L=>L!==F):[...P,F])},D=()=>{v.length===f.length?x([]):x(f.map(F=>F.id))};return t?e.jsx(k,{children:e.jsxs(T,{className:"flex items-center justify-center py-12",children:[e.jsx(Pe,{className:"h-8 w-8 animate-spin mr-2"}),e.jsx("span",{children:"Loading orders..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Order Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage customer orders"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",onClick:a,children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(N,{variant:"outline",children:[e.jsx(yn,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold",children:y.total}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Orders"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:y.pending}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y.confirmed}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Confirmed"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:y.preparing}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Preparing"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:y.outForDelivery}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Out for Delivery"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.delivered}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Delivered"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:y.cancelled}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Cancelled"})]})}),e.jsx(k,{children:e.jsxs(T,{className:"p-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",y.totalValue.toFixed(2)]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Value"})]})})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(La,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"search",children:"Search Orders"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(B,{id:"search",placeholder:"Search by ID, customer...",value:l,onChange:F=>i(F.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"status",children:"Status Filter"}),e.jsxs(Ie,{value:o,onValueChange:c,children:[e.jsx(De,{children:e.jsx(Re,{placeholder:"All statuses"})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"all",children:"All Statuses"}),e.jsx(W,{value:"pending",children:"Pending"}),e.jsx(W,{value:"confirmed",children:"Confirmed"}),e.jsx(W,{value:"preparing",children:"Preparing"}),e.jsx(W,{value:"out_for_delivery",children:"Out for Delivery"}),e.jsx(W,{value:"delivered",children:"Delivered"}),e.jsx(W,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"date",children:"Date Filter"}),e.jsxs(Ie,{value:d,onValueChange:g,children:[e.jsx(De,{children:e.jsx(Re,{placeholder:"All dates"})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"all",children:"All Dates"}),e.jsx(W,{value:"today",children:"Today"}),e.jsx(W,{value:"week",children:"Last 7 Days"}),e.jsx(W,{value:"month",children:"Last 30 Days"})]})]})]}),v.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Bulk Actions"}),e.jsxs(Ie,{onValueChange:_,children:[e.jsx(De,{children:e.jsx(Re,{placeholder:`Update ${v.length} orders`})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"confirmed",children:"Mark as Confirmed"}),e.jsx(W,{value:"preparing",children:"Mark as Preparing"}),e.jsx(W,{value:"out_for_delivery",children:"Mark as Out for Delivery"}),e.jsx(W,{value:"delivered",children:"Mark as Delivered"}),e.jsx(W,{value:"cancelled",children:"Mark as Cancelled"})]})]})]})]})})]}),e.jsx(k,{children:e.jsx(T,{className:"p-0",children:f.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(be,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No orders found matching your criteria"})]}):e.jsxs(sa,{children:[e.jsx(ta,{children:e.jsxs(qs,{children:[e.jsx(je,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:v.length===f.length,onChange:D,className:"rounded"})}),e.jsx(je,{children:"Order ID"}),e.jsx(je,{children:"Customer"}),e.jsx(je,{children:"Items"}),e.jsx(je,{children:"Amount"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Date"}),e.jsx(je,{children:"Actions"})]})}),e.jsx(aa,{children:f.map(F=>{var P,L,q,se;return e.jsxs(qs,{children:[e.jsx(ye,{children:e.jsx("input",{type:"checkbox",checked:v.includes(F.id),onChange:()=>C(F.id),className:"rounded"})}),e.jsx(ye,{children:e.jsxs("div",{className:"font-mono text-sm",children:["#",F.id.slice(-8)]})}),e.jsx(ye,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[(P=F.profiles)==null?void 0:P.first_name," ",(L=F.profiles)==null?void 0:L.last_name]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:(q=F.profiles)==null?void 0:q.email})]})}),e.jsx(ye,{children:e.jsxs("div",{className:"text-sm",children:[((se=F.order_items)==null?void 0:se.length)||0," items"]})}),e.jsx(ye,{children:e.jsxs("div",{className:"font-medium",children:["",F.total_amount.toFixed(2)]})}),e.jsx(ye,{children:E(F.status)}),e.jsxs(ye,{children:[e.jsx("div",{className:"text-sm",children:new Date(F.created_at).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(F.created_at).toLocaleTimeString()})]}),e.jsx(ye,{children:e.jsxs(gl,{children:[e.jsx(pl,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",disabled:h===F.id,children:h===F.id?e.jsx(Pe,{className:"h-4 w-4 animate-spin"}):e.jsx(jn,{className:"h-4 w-4"})})}),e.jsxs(lr,{align:"end",children:[e.jsxs(hs,{onClick:()=>r(F),children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsx(qt,{}),e.jsxs(hs,{onClick:()=>p(F.id,"confirmed"),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Mark as Confirmed"]}),e.jsxs(hs,{onClick:()=>p(F.id,"preparing"),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Mark as Preparing"]}),e.jsxs(hs,{onClick:()=>p(F.id,"out_for_delivery"),children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),"Mark as Out for Delivery"]}),e.jsxs(hs,{onClick:()=>p(F.id,"delivered"),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Mark as Delivered"]}),e.jsx(qt,{}),e.jsxs(hs,{onClick:()=>p(F.id,"cancelled"),className:"text-red-600",children:[e.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Cancel Order"]})]})]})})]},F.id)})})]})})})]})},zm=({order:s,onClose:t,onStatusUpdate:a})=>{var g,v,x,h,b,u,j;const r=((g=s.order_items)==null?void 0:g.reduce((f,y)=>f+y.price*y.quantity,0))||0,n=50,l=s.total_amount,i=[{key:"pending",label:"Order Placed",icon:Te},{key:"confirmed",label:"Confirmed",icon:Ne},{key:"preparing",label:"Preparing",icon:be},{key:"out_for_delivery",label:"Out for Delivery",icon:_s},{key:"delivered",label:"Delivered",icon:Ne}],c=s.status==="cancelled"?-1:i.findIndex(f=>f.key===s.status),d=()=>{const f=[];switch(s.status){case"pending":f.push({label:"Confirm Order",status:"confirmed",variant:"default"},{label:"Cancel Order",status:"cancelled",variant:"destructive"});break;case"confirmed":f.push({label:"Start Preparing",status:"preparing",variant:"default"},{label:"Cancel Order",status:"cancelled",variant:"destructive"});break;case"preparing":f.push({label:"Out for Delivery",status:"out_for_delivery",variant:"default"});break;case"out_for_delivery":f.push({label:"Mark as Delivered",status:"delivered",variant:"default"});break}return f};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Order Details"}),e.jsxs("p",{className:"text-muted-foreground",children:["Order #",s.id.slice(-8),"  ",new Date(s.created_at).toLocaleString()]})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:t,children:e.jsx(os,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Order Status"}),e.jsx(G,{variant:s.status==="cancelled"?"destructive":"default",children:s.status==="cancelled"?"Cancelled":s.status.replace("_"," ").replace(/\b\w/g,f=>f.toUpperCase())})]})}),e.jsx(T,{children:s.status!=="cancelled"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:i.map((f,y)=>{const p=f.icon,_=y<=c,E=y===c;return e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:`
                            rounded-full p-2 border-2 transition-colors
                            ${_?"bg-primary border-primary text-white":E?"border-primary text-primary":"border-gray-300 text-gray-400"}
                          `,children:e.jsx(p,{className:"h-4 w-4"})}),e.jsx("div",{className:`text-xs text-center ${_||E?"text-foreground":"text-muted-foreground"}`,children:f.label})]},f.key)})}),e.jsx("div",{className:"flex gap-2 justify-center",children:d().map(f=>e.jsx(N,{variant:f.variant,size:"sm",onClick:()=>a(s.id,f.status),children:f.label},f.status))})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ns,{className:"h-12 w-12 mx-auto text-red-500 mb-2"}),e.jsx("p",{className:"text-red-600 font-medium",children:"This order has been cancelled"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(As,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"font-medium",children:[(v=s.profiles)==null?void 0:v.first_name," ",(x=s.profiles)==null?void 0:x.last_name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:(h=s.profiles)==null?void 0:h.email})]}),((b=s.profiles)==null?void 0:b.phone)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(on,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:s.profiles.phone})]}),s.addresses&&e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Delivery Address"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.addresses.street,e.jsx("br",{}),s.addresses.city,", ",s.addresses.state,e.jsx("br",{}),s.addresses.pincode]}),e.jsx(G,{variant:"outline",className:"mt-1",children:s.addresses.type})]})]})})]})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-5 w-5"}),"Order Summary"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["",r.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Delivery Charge:"}),e.jsxs("span",{children:["",n.toFixed(2)]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"flex justify-between font-medium text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["",l.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsxs("span",{children:["Ordered: ",new Date(s.created_at).toLocaleString()]})]}),s.estimated_delivery_time&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4"}),e.jsxs("span",{children:["Est. Delivery: ",new Date(s.estimated_delivery_time).toLocaleString()]})]})]})]})]})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Order Items (",((u=s.order_items)==null?void 0:u.length)||0,")"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:(j=s.order_items)==null?void 0:j.map(f=>{var y,p,_,E,C;return e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg",children:[((y=f.products)==null?void 0:y.image_url)&&e.jsx("img",{src:f.products.image_url,alt:f.products.name,className:"h-16 w-16 rounded-md object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium",children:(p=f.products)==null?void 0:p.name}),((_=f.products)==null?void 0:_.is_veg)!==null&&e.jsx(G,{variant:f.products.is_veg?"secondary":"destructive",children:f.products.is_veg?"Veg":"Non-Veg"}),e.jsx(G,{variant:"outline",children:(E=f.products)==null?void 0:E.type})]}),((C=f.products)==null?void 0:C.description)&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.products.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["",f.price.toFixed(2)]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Qty: ",f.quantity]}),e.jsxs("div",{className:"text-sm font-medium",children:["",(f.price*f.quantity).toFixed(2)]})]})]},f.id)})})})]})]})]})})},Um="/lovable-uploads/473c14c0-5942-46bc-bb0a-293ae4719543.png",qm="/images/categories/sample-category.png",or=s=>new Promise(t=>{if(!s||s.trim()===""){t(!1);return}const a=new Image;a.onload=()=>t(!0),a.onerror=()=>t(!1),a.src=s,setTimeout(()=>t(!1),5e3)}),vl=async()=>{try{const{data:s,error:t}=await M.from("products").select("id, name, image_url").not("image_url","is",null);if(t)return console.error("Error fetching products:",t),[];const a=[];for(const r of s||[]){const n=await or(r.image_url);a.push({id:r.id,name:r.name,currentImageUrl:r.image_url,imageExists:n,tableType:"products"})}return a}catch(s){return console.error("Error checking product images:",s),[]}},jl=async()=>{try{const{data:s,error:t}=await M.from("categories").select("id, name, image_url").not("image_url","is",null);if(t)return console.error("Error fetching categories:",t),[];const a=[];for(const r of s||[]){const n=await or(r.image_url);a.push({id:r.id,name:r.name,currentImageUrl:r.image_url,imageExists:n,tableType:"categories"})}return a}catch(s){return console.error("Error checking category images:",s),[]}},Bm=async s=>{try{for(const t of s){const a=t.currentImageUrl.match(/(\d+)-([a-zA-Z0-9]+)\.(png|jpg|jpeg)/);if(a){const n=`/lovable-uploads/${a[0]}`;if(await or(n)){t.tableType==="products"?await M.from("products").update({image_url:n}).eq("id",t.id):await M.from("categories").update({image_url:n}).eq("id",t.id),console.log(`Fixed path for ${t.name}: ${t.currentImageUrl}  ${n}`);continue}}const r=t.tableType==="products"?Um:qm;t.tableType==="products"?await M.from("products").update({image_url:r}).eq("id",t.id):await M.from("categories").update({image_url:r}).eq("id",t.id),console.log(`Set default image for ${t.name}: ${t.currentImageUrl}  ${r}`)}return!0}catch(t){return console.error("Error fixing image paths:",t),!1}},Vm=async()=>{console.log("Starting image cleanup process...");const[s,t]=await Promise.all([vl(),jl()]),a=[...s,...t],r=a.filter(n=>!n.imageExists);return console.log(`Found ${r.length} broken images out of ${a.length} total`),r.length>0&&(console.log("Broken images:",r.map(l=>`${l.name}: ${l.currentImageUrl}`)),await Bm(r))?(console.log(`Image cleanup complete. Attempted to fix ${r.length} broken images.`),{productResults:s,categoryResults:t,brokenCount:r.length,fixedCount:r.length}):(console.log("No broken images found. All images are working correctly."),{productResults:s,categoryResults:t,brokenCount:0,fixedCount:0})},Hm=async()=>{const[s,t]=await Promise.all([vl(),jl()]);return{totalProducts:s.length,totalCategories:t.length,productsWithImages:s.length,categoriesWithImages:t.length,workingProductImages:s.filter(a=>a.imageExists).length,workingCategoryImages:t.filter(a=>a.imageExists).length,brokenProductImages:s.filter(a=>!a.imageExists).length,brokenCategoryImages:t.filter(a=>!a.imageExists).length}},Gm=()=>{const[s,t]=m.useState("gallery"),[a,r]=m.useState(null),[n,l]=m.useState(!1),[i,o]=m.useState(!1),[c,d]=m.useState(!1),[g,v]=m.useState([]),[x,h]=m.useState("grid"),[b,u]=m.useState(""),[j,f]=m.useState("all"),[y,p]=m.useState("products"),[_,E]=m.useState(0),[C,D]=m.useState(null),F=[{value:"products",label:"Products",icon:be,description:"Food items and menu products",color:"bg-blue-50 text-blue-600 border-blue-200"},{value:"categories",label:"Categories",icon:no,description:"Menu categories and sections",color:"bg-green-50 text-green-600 border-green-200"},{value:"promotions",label:"Promotions",icon:Be,description:"Banners and promotional content",color:"bg-purple-50 text-purple-600 border-purple-200"}],P=async()=>{l(!0);try{const A=await Hm();r(A)}catch(A){console.error("Error loading image stats:",A)}finally{l(!1)}},L=m.useCallback(async()=>{try{l(!0);const[A,w,S]=await Promise.all([$s("products").catch(()=>[]),$s("categories").catch(()=>[]),$s("promotions").catch(()=>[])]),J=[...A,...w,...S];v(J)}catch(A){console.error("Error loading storage images:",A),ee({title:"Error",description:"Failed to load images from storage",variant:"destructive"})}finally{l(!1)}},[]),q=async A=>{if(A.length){d(!0),E(0);try{const w=Array.from(A),S=await km(w,y);E(100);const J=F.find(Y=>Y.value===y);ee({title:"Upload Successful",description:`Successfully uploaded ${S.length} file(s) to ${J==null?void 0:J.label} in Supabase Storage`}),await L()}catch(w){console.error("Upload error:",w),ee({title:"Upload Failed",description:w instanceof Error?w.message:"Upload failed. Please try again.",variant:"destructive"})}finally{d(!1),E(0)}}},se=async A=>{if(confirm(`Are you sure you want to delete ${A.name}?`))try{await hl(A.url),ee({title:"Image Deleted",description:`Successfully deleted ${A.name}`}),await L()}catch(w){console.error("Delete error:",w),ee({title:"Delete Failed",description:w instanceof Error?w.message:"Delete failed. Please try again.",variant:"destructive"})}},$=A=>{navigator.clipboard.writeText(A),ee({title:"URL Copied",description:"Image URL copied to clipboard"})},K=async()=>{o(!0);try{const A=await Vm();D(A),await P()}catch(A){console.error("Error fixing images:",A),ee({title:"Error",description:"Failed to fix images. Please try again.",variant:"destructive"})}finally{o(!1)}},Q=g.filter(A=>{const w=A.name.toLowerCase().includes(b.toLowerCase()),S=j==="all"||A.category===j;return w&&S}),U=F.find(A=>A.value===y);return m.useEffect(()=>{P(),L()},[L]),e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Image Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your Supabase Storage images and check system health"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(G,{variant:"outline",className:"border-green-500 text-green-600",children:[e.jsx(to,{className:"w-3 h-3 mr-1"}),"Supabase Storage"]})})]}),e.jsxs(vt,{value:s,onValueChange:A=>t(A),children:[e.jsxs(at,{className:"grid w-full grid-cols-2",children:[e.jsxs(ke,{value:"gallery",className:"flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4"}),"Storage Gallery"]}),e.jsxs(ke,{value:"health",className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"}),"System Health"]})]}),e.jsxs(Le,{value:"gallery",className:"space-y-6",children:[e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ot,{className:"w-5 h-5"}),"Upload Images to Supabase Storage"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"upload-category",children:"Upload Category *"}),e.jsxs(Ie,{value:y,onValueChange:A=>p(A),children:[e.jsx(De,{id:"upload-category",children:e.jsx(Re,{placeholder:"Select category for upload"})}),e.jsx(Ae,{children:F.map(A=>{const w=A.icon;return e.jsx(W,{value:A.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:A.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:A.description})]})]})},A.value)})})]}),U&&e.jsx("div",{className:`p-3 rounded-lg border ${U.color}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U.icon,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm",children:["Uploading to ",U.label]}),e.jsx("div",{className:"text-xs opacity-75",children:U.description})]})]})})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(B,{type:"file",multiple:!0,accept:"image/*",onChange:A=>A.target.files&&q(A.target.files),disabled:c,className:"mb-4"}),c&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4 animate-spin"}),e.jsxs("span",{children:["Uploading to ",U==null?void 0:U.label,"..."]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${_}%`}})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to select files or drag and drop images here"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Images will be uploaded to: ",e.jsx("strong",{children:U==null?void 0:U.label})]})]}),e.jsxs(Se,{children:[e.jsx(lt,{className:"h-4 w-4"}),e.jsxs(Fe,{children:["Images will be uploaded to ",e.jsx("strong",{children:U==null?void 0:U.label})," in Supabase Storage with automatic compression and optimization. Supported formats: JPEG, PNG, WebP (max 5MB each)."]})]})]})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ao,{className:"w-5 h-5"}),"Supabase Storage Gallery (",Q.length," images)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>h(x==="grid"?"list":"grid"),children:x==="grid"?e.jsx(ro,{className:"w-4 h-4"}):e.jsx(Ma,{className:"w-4 h-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:L,disabled:n,children:n?e.jsx(Pe,{className:"w-4 h-4 animate-spin"}):e.jsx(js,{className:"w-4 h-4"})})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{htmlFor:"search",children:"Search Images"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(B,{id:"search",placeholder:"Search by filename...",value:b,onChange:A=>u(A.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"category",children:"Filter by Category"}),e.jsxs("select",{id:"category",value:j,onChange:A=>f(A.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"products",children:"Products"}),e.jsx("option",{value:"categories",children:"Categories"}),e.jsx("option",{value:"promotions",children:"Promotions"})]})]})]}),n?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Pe,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading images..."})]}):Q.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ds,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No images found"}),e.jsx("p",{className:"text-sm",children:b||j!=="all"?"Try adjusting your search or filter criteria":"Upload some images to get started"})]}):x==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:Q.map(A=>e.jsxs(k,{className:"overflow-hidden",children:[e.jsxs("div",{className:"aspect-square bg-gray-100 relative",children:[e.jsx("img",{src:A.publicUrl,alt:A.name,className:"w-full h-full object-cover",onError:w=>{w.target.style.display="none",w.target.parentElement.innerHTML='<div class="text-gray-400 w-full h-full flex items-center justify-center"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg></div>'}}),e.jsx(G,{variant:"secondary",className:"absolute top-2 left-2 text-xs",children:A.category})]}),e.jsx(T,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium truncate",title:A.name,children:A.name}),A.size&&e.jsx("p",{className:"text-xs text-gray-500",children:Ut(A.size)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>$(A.publicUrl),className:"flex-1 h-7 text-xs",children:[e.jsx(mr,{className:"w-3 h-3 mr-1"}),"Copy URL"]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>window.open(A.publicUrl,"_blank"),className:"h-7 px-2",children:e.jsx(Qs,{className:"w-3 h-3"})}),e.jsx(N,{variant:"destructive",size:"sm",onClick:()=>se(A),className:"h-7 px-2",children:e.jsx(ms,{className:"w-3 h-3"})})]})]})})]},A.id))}):e.jsx("div",{className:"space-y-2",children:Q.map(A=>e.jsx(k,{children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:A.publicUrl,alt:A.name,className:"w-full h-full object-cover",onError:w=>{w.target.style.display="none",w.target.parentElement.innerHTML='<div class="text-gray-400 w-full h-full flex items-center justify-center"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg></div>'}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:A.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(G,{variant:"outline",className:"text-xs",children:A.category}),A.size&&e.jsx("span",{className:"text-xs text-gray-500",children:Ut(A.size)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>$(A.publicUrl),children:[e.jsx(mr,{className:"w-4 h-4 mr-1"}),"Copy URL"]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>window.open(A.publicUrl,"_blank"),children:e.jsx(Qs,{className:"w-4 h-4"})}),e.jsx(N,{variant:"destructive",size:"sm",onClick:()=>se(A),children:e.jsx(ms,{className:"w-4 h-4"})})]})]})})},A.id))})]})]})]}),e.jsx(Le,{value:"health",className:"space-y-6",children:e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5"}),"System Health Check"]})}),e.jsxs(T,{className:"space-y-4",children:[a?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.totalProducts}),e.jsx("div",{className:"text-sm text-blue-600",children:"Total Products"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.productsWithImages}),e.jsx("div",{className:"text-sm text-green-600",children:"Products with Images"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.totalCategories}),e.jsx("div",{className:"text-sm text-purple-600",children:"Total Categories"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:a.categoriesWithImages}),e.jsx("div",{className:"text-sm text-orange-600",children:"Categories with Images"})]})]}):e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Pe,{className:"w-6 h-6 animate-spin mr-2"}),"Loading stats..."]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{onClick:P,disabled:n,variant:"outline",children:[n?e.jsx(Pe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(js,{className:"w-4 h-4 mr-2"}),"Refresh Stats"]}),e.jsxs(N,{onClick:K,disabled:i,variant:"secondary",children:[i?e.jsx(Pe,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"Fix Broken Images"]})]}),C&&e.jsxs(Se,{children:[e.jsx(lt,{className:"h-4 w-4"}),e.jsxs(Fe,{children:["Last cleanup: Found ",C.brokenCount," broken images, fixed ",C.fixedCount," automatically."]})]})]})]})})]})]})},Km=({products:s,categories:t,loading:a=!1})=>{const[r,n]=m.useState("7d"),[l,i]=m.useState("revenue"),{data:o=[],isLoading:c}=Yd(),d=m.useMemo(()=>{const u=new Date,j=new Date(u.getFullYear(),u.getMonth(),u.getDate()),f=new Date(j.getTime()-24*60*60*1e3),y=new Date(j.getTime()-j.getDay()*24*60*60*1e3),p=new Date(y.getTime()-7*24*60*60*1e3),_=new Date(u.getFullYear(),u.getMonth(),1),E=new Date(u.getFullYear(),u.getMonth()-1,1),C=new Date(u.getFullYear(),u.getMonth(),0),D=(P,L)=>o.filter(q=>{const se=new Date(q.created_at);return se>=P&&(!L||se<=L)}),F=P=>{const L=P.reduce(($,K)=>$+(K.final_amount||K.total_amount||0),0),q=P.length,se=q>0?L/q:0;return{revenue:L,orders:q,averageOrderValue:Math.round(se)}};return[{period:"Today",...F(D(j))},{period:"Yesterday",...F(D(f,j))},{period:"This Week",...F(D(y))},{period:"Last Week",...F(D(p,y))},{period:"This Month",...F(D(_))},{period:"Last Month",...F(D(E,C))}]},[o]),g=m.useMemo(()=>{const u=new Map;s.forEach(p=>{u.set(p.id,{id:p.id,name:p.name,category:p.type,revenue:0,orders:0,stock:p.is_available?25:0,rating:4,trend:"stable"})}),o.forEach(p=>{p.order_items&&p.order_items.forEach(_=>{const E=_.product_id;if(u.has(E)){const C=u.get(E);C.revenue+=_.total_price||_.unit_price*_.quantity,C.orders+=_.quantity}})});const j=new Date(Date.now()-7*24*60*60*1e3),f=o.filter(p=>new Date(p.created_at)>=j),y=o.filter(p=>new Date(p.created_at)<j);return u.forEach((p,_)=>{const E=f.reduce((D,F)=>{var P;return D+(((P=F.order_items)==null?void 0:P.reduce((L,q)=>q.product_id===_?L+(q.total_price||q.unit_price*q.quantity):L,0))||0)},0),C=y.reduce((D,F)=>{var P;return D+(((P=F.order_items)==null?void 0:P.reduce((L,q)=>q.product_id===_?L+(q.total_price||q.unit_price*q.quantity):L,0))||0)},0);if(C>0){const D=(E-C)/C;D>.1?p.trend="up":D<-.1?p.trend="down":p.trend="stable"}}),Array.from(u.values()).sort((p,_)=>_.revenue-p.revenue).slice(0,10)},[s,o]),v=m.useMemo(()=>{const j=new Set(o.map(F=>F.user_id)).size,f=new Date(Date.now()-7*24*60*60*1e3),y=new Set(o.filter(F=>new Date(F.created_at)>=f).map(F=>F.user_id)),p=new Map;o.forEach(F=>{const P=p.get(F.user_id)||0;p.set(F.user_id,P+1)});const _=Array.from(p.values()).filter(F=>F>1).length,E=j>0?o.length/j:0,C=o.reduce((F,P)=>F+(P.final_amount||P.total_amount||0),0),D=j>0?C/j:0;return{totalCustomers:j,newCustomers:y.size,returningCustomers:_,averageOrdersPerCustomer:Number(E.toFixed(1)),customerLifetimeValue:Math.round(D)}},[o]),x=m.useMemo(()=>{const u=d.find(p=>p.period==="This Week")||d[0],j=d.find(p=>p.period==="Last Week")||d[1],f=j&&j.revenue>0?(u.revenue-j.revenue)/j.revenue*100:0,y=j&&j.orders>0?(u.orders-j.orders)/j.orders*100:0;return{totalRevenue:u.revenue,revenueGrowth:f,totalOrders:u.orders,orderGrowth:y,averageOrderValue:u.averageOrderValue,totalProducts:s.length,activeProducts:s.filter(p=>p.is_available).length,lowStockProducts:s.filter(p=>!p.is_available).length,totalCategories:t.length}},[d,s,t]),h=u=>u>0?e.jsx(ys,{className:"h-4 w-4 text-green-600"}):u<0?e.jsx(xa,{className:"h-4 w-4 text-red-600"}):e.jsx(ys,{className:"h-4 w-4 text-gray-400"}),b=u=>u>0?"text-green-600":u<0?"text-red-600":"text-gray-600";return a||c?e.jsx(k,{children:e.jsxs(T,{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2",children:"Loading analytics..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Business insights and performance metrics"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Ie,{value:r,onValueChange:n,children:[e.jsx(De,{className:"w-32",children:e.jsx(Re,{placeholder:"Time Range"})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"1d",children:"Today"}),e.jsx(W,{value:"7d",children:"7 Days"}),e.jsx(W,{value:"30d",children:"30 Days"}),e.jsx(W,{value:"90d",children:"90 Days"})]})]}),e.jsxs(N,{variant:"outline",children:[e.jsx(js,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(N,{variant:"outline",children:[e.jsx(yn,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(k,{children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(zs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",x.totalRevenue.toLocaleString()]}),e.jsxs("div",{className:`text-xs flex items-center gap-1 ${b(x.revenueGrowth)}`,children:[h(x.revenueGrowth),Math.abs(x.revenueGrowth).toFixed(1),"% from last period"]})]})]}),e.jsxs(k,{children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Total Orders"}),e.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.totalOrders}),e.jsxs("div",{className:`text-xs flex items-center gap-1 ${b(x.orderGrowth)}`,children:[h(x.orderGrowth),Math.abs(x.orderGrowth).toFixed(1),"% from last period"]})]})]}),e.jsxs(k,{children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Avg Order Value"}),e.jsx($a,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",x.averageOrderValue]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Consistent performance"})]})]}),e.jsxs(k,{children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium",children:"Active Products"}),e.jsx(be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.activeProducts}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[x.totalProducts," total products"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"h-5 w-5"}),"Sales Trends"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:d.slice(0,4).map((u,j)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:u.period}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.orders," orders"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:["",u.revenue.toLocaleString()]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["",u.averageOrderValue," avg"]})]}),e.jsx(as,{value:u.revenue/Math.max(...d.map(f=>f.revenue))*100,className:"w-20"})]},u.period))})})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"h-5 w-5"}),"Customer Insights"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:v.totalCustomers}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Customers"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.newCustomers}),e.jsx("div",{className:"text-sm text-green-800",children:"New This Week"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Returning Customers"}),e.jsx("span",{className:"font-medium",children:v.returningCustomers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Avg Orders/Customer"}),e.jsx("span",{className:"font-medium",children:v.averageOrdersPerCustomer})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Customer LTV"}),e.jsxs("span",{className:"font-medium",children:["",v.customerLifetimeValue]})]})]})]})})]})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-5 w-5"}),"Product Performance"]}),e.jsxs(Ie,{value:l,onValueChange:i,children:[e.jsx(De,{className:"w-32",children:e.jsx(Re,{})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"revenue",children:"Revenue"}),e.jsx(W,{value:"orders",children:"Orders"}),e.jsx(W,{value:"rating",children:"Rating"})]})]})]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:g.slice(0,8).map((u,j)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-sm font-medium",children:j+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:u.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.category,"  ",u.orders," orders"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:["",u.revenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Be,{className:"h-3 w-3 text-yellow-500"}),u.rating]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.trend==="up"&&e.jsx(ys,{className:"h-4 w-4 text-green-600"}),u.trend==="down"&&e.jsx(xa,{className:"h-4 w-4 text-red-600"}),u.trend==="stable"&&e.jsx(ys,{className:"h-4 w-4 text-gray-400"}),u.stock<10&&e.jsx(G,{variant:"destructive",className:"text-xs",children:"Low Stock"})]})]})]},u.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Inventory Alerts"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-red-800",children:"Low Stock Items"}),e.jsxs("div",{className:"text-sm text-red-600",children:[x.lowStockProducts," products"]})]}),e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(cs,{className:"h-4 w-4 mr-1"}),"View"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-yellow-800",children:"Out of Stock"}),e.jsxs("div",{className:"text-sm text-yellow-600",children:[s.filter(u=>!u.is_available).length," products"]})]}),e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(cs,{className:"h-4 w-4 mr-1"}),"View"]})]})]})})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(bn,{className:"h-5 w-5"}),"Category Performance"]})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:t.slice(0,4).map(u=>{const j=s.filter(y=>y.category_id===u.id),f=j.length>0?j.length/s.length*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:u.type==="food"?"default":"secondary",children:u.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[j.length," products"]})]}),e.jsxs("span",{className:"text-sm font-medium",children:[f.toFixed(1),"%"]})]}),e.jsx(as,{value:f,className:"h-2"})]},u.id)})})})]})]})]})},mt=({value:s,maxStars:t=5,size:a="md",interactive:r=!1,onChange:n,className:l})=>{const i={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"},o=c=>{r&&n&&n(c)};return e.jsx("div",{className:z("flex items-center gap-0.5",l),children:Array.from({length:t},(c,d)=>{const g=d+1,v=g<=s,x=g>s&&g-1<s;return e.jsxs("button",{type:"button",onClick:()=>o(g),disabled:!r,className:z("relative transition-colors",r&&"hover:scale-110 cursor-pointer",!r&&"cursor-default"),"aria-label":`${g} star${g!==1?"s":""}`,children:[e.jsx(Be,{className:z(i[a],"transition-colors",v?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")}),x&&e.jsx(Be,{className:z(i[a],"absolute inset-0 fill-yellow-400 text-yellow-400"),style:{clipPath:`inset(0 ${100-(s-(g-1))*100}% 0 0)`}})]},d)})})},yl=(s={})=>rs({queryKey:["admin-reviews",s],queryFn:async()=>{let t=M.from("admin_reviews_overview").select("*");if(s.is_approved!==void 0&&(t=t.eq("is_approved",s.is_approved)),s.limit){const l=s.offset||0;t=t.range(l,l+s.limit-1)}t=t.order("created_at",{ascending:!1});const{data:a,error:r,count:n}=await t;if(r)throw console.error("Error fetching admin reviews:",r),r;return{data:a||[],total:n||0}},staleTime:2*60*1e3}),Wm=()=>{const s=Cs();m.useEffect(()=>{const t=M.channel("admin-reviews").on("postgres_changes",{event:"*",schema:"public",table:"reviews"},a=>{console.log("Admin review update received:",a),s.invalidateQueries({queryKey:["admin-reviews"]}),s.invalidateQueries({queryKey:["review-analytics"]})}).subscribe();return()=>{t.unsubscribe()}},[s])},Qm=()=>{const s=Cs();return xe({mutationFn:async t=>{const{data:a,error:r}=await M.from("reviews").update({is_approved:t.is_approved,updated_at:new Date().toISOString()}).eq("id",t.id).select().single();if(r)throw console.error("Error moderating review:",r),r;return a},onSuccess:(t,a)=>{const r=a.is_approved?"approved":"rejected";ge.success(`Review ${r} successfully!`),s.invalidateQueries({queryKey:["admin-reviews"]}),s.invalidateQueries({queryKey:["product-reviews",t.product_id]}),s.invalidateQueries({queryKey:["products"]})},onError:t=>{console.error("Moderate review error:",t),ge.error("Failed to moderate review. Please try again.")}})},Ym=()=>{const s=Cs();return xe({mutationFn:async t=>{const a=[],r=[];for(const n of t.review_ids)try{if(t.action==="delete"){const{error:l}=await M.from("reviews").delete().eq("id",n);l?r.push({reviewId:n,error:l}):a.push({reviewId:n,action:"delete"})}else{const l=t.action==="approve",{error:i}=await M.from("reviews").update({is_approved:l,updated_at:new Date().toISOString()}).eq("id",n);i?r.push({reviewId:n,error:i}):a.push({reviewId:n,action:t.action})}}catch(l){r.push({reviewId:n,error:l})}if(r.length>0)throw console.error("Bulk moderation errors:",r),new Error(`Failed to process ${r.length} of ${t.review_ids.length} reviews`);return{success:!0,processedCount:a.length,action:t.action,results:a}},onSuccess:t=>{ge.success(`Successfully ${t.action}d ${t.processedCount} review(s)!`),s.invalidateQueries({queryKey:["admin-reviews"]}),s.invalidateQueries({queryKey:["product-reviews"]}),s.invalidateQueries({queryKey:["products"]})},onError:t=>{console.error("Bulk moderate reviews error:",t),ge.error("Failed to process some reviews. Please try again.")}})};function Zm({reviews:s,className:t=""}){const a=m.useMemo(()=>{const r=s.length,n=s.filter(g=>g.is_approved===null||g.is_approved===!1).length,l=s.filter(g=>g.is_approved===!0).length,i=s.length>0?s.reduce((g,v)=>g+(v.rating||0),0)/s.length:0,o=[5,4,3,2,1].map(g=>{const v=s.filter(h=>h.rating===g).length,x=r>0?v/r*100:0;return{rating:g,count:v,percentage:x}}),c=new Date(Date.now()-7*24*60*60*1e3),d=s.filter(g=>g.created_at&&new Date(g.created_at)>=c).length;return{total:r,pending:n,approved:l,avgRating:Math.round(i*100)/100,ratingDistribution:o,recentReviews:d,approvalRate:r>0?Math.round(l/r*100):0}},[s]);return e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 ${t}`,children:[e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),e.jsx("p",{className:"text-2xl font-bold",children:a.total})]})]})})}),e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"h-4 w-4 text-yellow-600"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold",children:a.pending}),a.pending>0&&e.jsx(G,{variant:"destructive",className:"text-xs",children:"Needs Attention"})]})]})})}),e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold",children:a.avgRating}),e.jsx(mt,{value:a.avgRating,size:"sm"})]})]})]})})}),e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[a.approvalRate,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[a.approved," of ",a.total," approved"]})]})]})})})]})}function Jm({selectedReviews:s,onBulkModerate:t,onClearSelection:a,isLoading:r=!1}){return s.length===0?null:e.jsx(k,{className:"border-blue-200 bg-blue-50",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:[s.length," review",s.length===1?"":"s"," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{size:"sm",onClick:()=>t(s,!0),disabled:r,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Approve All"]}),e.jsxs(N,{size:"sm",variant:"destructive",onClick:()=>t(s,!1),disabled:r,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Reject All"]})]})]}),e.jsx(N,{size:"sm",variant:"outline",onClick:a,disabled:r,children:"Clear Selection"})]})})})}function Xm({review:s,onModerate:t,isLoading:a=!1}){const[r,n]=m.useState(!1),l=o=>o===null?e.jsxs(G,{variant:"secondary",className:"gap-1",children:[e.jsx(Te,{className:"h-3 w-3"}),"Pending"]}):o?e.jsxs(G,{variant:"default",className:"gap-1 bg-green-600",children:[e.jsx(Ne,{className:"h-3 w-3"}),"Approved"]}):e.jsxs(G,{variant:"destructive",className:"gap-1",children:[e.jsx(Ns,{className:"h-3 w-3"}),"Rejected"]}),i=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return e.jsx(k,{className:"hover:shadow-md transition-shadow",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mt,{value:s.rating||0,size:"sm"}),e.jsxs("span",{className:"font-medium",children:[s.rating,"/5"]}),l(s.is_approved)]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(As,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.first_name," ",s.last_name]}),e.jsx("span",{children:""}),e.jsx(Ht,{className:"h-4 w-4"}),e.jsx("span",{children:i(s.created_at)})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(dt,{open:r,onOpenChange:n,children:[e.jsx(Ga,{asChild:!0,children:e.jsxs(N,{size:"sm",variant:"outline",children:[e.jsx(cs,{className:"h-4 w-4 mr-1"}),"Details"]})}),e.jsxs(Zs,{className:"max-w-2xl",children:[e.jsx(Js,{children:e.jsx(Xs,{children:"Review Details"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Product"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.product_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Customer"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.first_name," ",s.last_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{value:s.rating||0,size:"sm"}),e.jsxs("span",{className:"text-sm",children:[s.rating,"/5"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Helpful Votes"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.helpful_count||0})]})]}),s.comment&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Comment"}),e.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-md",children:e.jsx("p",{className:"text-sm",children:s.comment})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsxs(N,{onClick:()=>{t(s.id,!1),n(!1)},variant:"destructive",disabled:a,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Reject"]}),e.jsxs(N,{onClick:()=>{t(s.id,!0),n(!1)},disabled:a,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Approve"]})]})]})]})]})})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:e.jsx("p",{className:"text-sm font-medium text-gray-700",children:s.product_name})}),s.comment&&e.jsx("div",{className:"border-l-4 border-gray-200 pl-4",children:e.jsxs("p",{className:"text-sm text-gray-700 italic",children:['"',s.comment,'"']})}),(s.is_approved===null||s.is_approved===!1)&&e.jsxs("div",{className:"flex justify-end gap-2 pt-2 border-t",children:[e.jsxs(N,{size:"sm",variant:"destructive",onClick:()=>t(s.id,!1),disabled:a,children:[e.jsx(Ns,{className:"h-4 w-4 mr-1"}),"Reject"]}),e.jsxs(N,{size:"sm",onClick:()=>t(s.id,!0),disabled:a,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ne,{className:"h-4 w-4 mr-1"}),"Approve"]})]})]})})})}function eu({className:s=""}){const[t,a]=m.useState({status:"all",search:""}),[r,n]=m.useState([]),{data:l,isLoading:i,refetch:o}=yl({is_approved:t.status==="pending"?!1:t.status==="approved"?!0:t.status==="rejected"?!1:void 0,limit:50}),c=Qm(),d=Ym();Wm();const g=m.useMemo(()=>{if(!(l!=null&&l.data))return[];let j=[...l.data];if(t.search.trim()){const f=t.search.toLowerCase();j=j.filter(y=>{var p,_,E,C,D;return((p=y.product_name)==null?void 0:p.toLowerCase().includes(f))||((_=y.comment)==null?void 0:_.toLowerCase().includes(f))||((E=y.first_name)==null?void 0:E.toLowerCase().includes(f))||((C=y.last_name)==null?void 0:C.toLowerCase().includes(f))||((D=y.email)==null?void 0:D.toLowerCase().includes(f))})}return j},[l==null?void 0:l.data,t.search]),v=async(j,f)=>{try{await c.mutateAsync({id:j,is_approved:f}),ge.success(`Review ${f?"approved":"rejected"} successfully`),n(y=>y.filter(p=>p!==j))}catch{ge.error(`Failed to ${f?"approve":"reject"} review`)}},x=async(j,f)=>{try{await d.mutateAsync({review_ids:j,action:f?"approve":"reject"}),ge.success(`${j.length} reviews ${f?"approved":"rejected"} successfully`),n([])}catch{ge.error(`Failed to ${f?"approve":"reject"} reviews`)}},h=j=>{n(f=>f.includes(j)?f.filter(y=>y!==j):[...f,j])},b=()=>{const j=g.filter(f=>f.is_approved===null||f.is_approved===!1).map(f=>f.id).filter(Boolean);n(j)},u=()=>{n([])};return e.jsxs("div",{className:`space-y-6 ${s}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review Moderation"}),e.jsx("p",{className:"text-gray-600",children:"Manage and moderate customer reviews"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(N,{variant:"outline",onClick:()=>o(),children:[e.jsx(js,{className:"h-4 w-4 mr-1"}),"Refresh"]})})]}),e.jsx(Zm,{reviews:g}),e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(B,{placeholder:"Search reviews, products, or customers...",value:t.search,onChange:j=>a(f=>({...f,search:j.target.value})),className:"pl-10"})]})}),e.jsxs(Ie,{value:t.status,onValueChange:j=>a(f=>({...f,status:j})),children:[e.jsx(De,{className:"w-[200px]",children:e.jsx(Re,{placeholder:"Filter by status"})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"all",children:"All Reviews"}),e.jsx(W,{value:"pending",children:"Pending"}),e.jsx(W,{value:"approved",children:"Approved"}),e.jsx(W,{value:"rejected",children:"Rejected"})]})]}),g.some(j=>j.is_approved===null||j.is_approved===!1)&&e.jsx(N,{variant:"outline",onClick:b,children:"Select All Pending"})]})})}),e.jsx(Jm,{selectedReviews:r,onBulkModerate:x,onClearSelection:u,isLoading:d.isPending}),i?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((j,f)=>e.jsx(k,{className:"animate-pulse",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})})},f))}):g.length===0?e.jsx(k,{children:e.jsxs(T,{className:"p-12 text-center",children:[e.jsx(Gt,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reviews found"}),e.jsx("p",{className:"text-gray-600",children:t.search.trim()?"Try adjusting your search or filter criteria":"No reviews match the current filters"})]})}):e.jsx("div",{className:"space-y-4",children:g.map(j=>e.jsxs("div",{className:"relative",children:[(j.is_approved===null||j.is_approved===!1)&&e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx("input",{type:"checkbox",checked:r.includes(j.id),onChange:()=>h(j.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsx("div",{className:r.includes(j.id)?"ml-8":"",children:e.jsx(Xm,{review:j,onModerate:v,isLoading:c.isPending})})]},j.id))})]})}function su(s){const t=new Date,a=new Date(t.getTime()-24*60*60*1e3),r=new Date(t.getTime()-7*24*60*60*1e3),n=new Date(t.getTime()-30*24*60*60*1e3),l=s.length,i=s.filter(f=>f.is_approved===null||f.is_approved===!1).length,o=s.filter(f=>f.is_approved===!0).length,c=s.filter(f=>f.is_approved===!1).length,d=s.length>0?s.reduce((f,y)=>f+(y.rating||0),0)/s.length:0,g=[5,4,3,2,1].map(f=>{const y=s.filter(_=>_.rating===f).length,p=l>0?y/l*100:0;return{rating:f,count:y,percentage:p}}),v={last24h:s.filter(f=>f.created_at&&new Date(f.created_at)>=a).length,last7d:s.filter(f=>f.created_at&&new Date(f.created_at)>=r).length,last30d:s.filter(f=>f.created_at&&new Date(f.created_at)>=n).length},x=l>0?Math.round(o/l*100):0,h=s.filter(f=>(f.rating||0)<=2&&f.comment&&f.comment.length>100).length,b=new Map;s.forEach(f=>{if(f.product_name&&f.rating){const y=b.get(f.product_name)||{total:0,count:0};b.set(f.product_name,{total:y.total+f.rating,count:y.count+1})}});const u=Array.from(b.entries()).map(([f,y])=>({product:f,rating:Math.round(y.total/y.count*100)/100,count:y.count})).filter(f=>f.count>=3).sort((f,y)=>y.rating-f.rating).slice(0,5),j={positive:s.filter(f=>(f.rating||0)>=4).length,neutral:s.filter(f=>(f.rating||0)===3).length,negative:s.filter(f=>(f.rating||0)<=2).length};return{totalReviews:l,pendingReviews:i,approvedReviews:o,rejectedReviews:c,averageRating:Math.round(d*100)/100,ratingDistribution:g,recentActivity:v,moderationStats:{approvalRate:x,avgProcessingTime:"2.3 hours",flaggedReviews:h},topRatedProducts:u,sentimentBreakdown:j}}function Fr({metrics:s}){return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Reviews"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalReviews}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.recentActivity.last7d," this week"]})]}),e.jsx(Gt,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.pendingReviews}),s.pendingReviews>0&&e.jsx(G,{variant:"destructive",className:"text-xs mt-1",children:"Needs Attention"})]}),e.jsx(Te,{className:"h-8 w-8 text-yellow-600"})]})})}),e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Rating"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.averageRating}),e.jsx(mt,{value:s.averageRating,size:"sm"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.sentimentBreakdown.positive,"% positive"]})]}),e.jsx(Be,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(k,{children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Approval Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[s.moderationStats.approvalRate,"%"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.approvedReviews," approved"]})]}),e.jsx(Ne,{className:"h-8 w-8 text-green-600"})]})})})]})}function tu({distribution:s}){return e.jsxs(k,{children:[e.jsx(V,{children:e.jsx(H,{className:"text-lg",children:"Rating Distribution"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:s.map(({rating:t,count:a,percentage:r})=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 w-20",children:[e.jsx("span",{className:"text-sm font-medium",children:t}),e.jsx(Be,{className:"h-4 w-4 text-yellow-400 fill-yellow-400"})]}),e.jsx("div",{className:"flex-1",children:e.jsx(as,{value:r,className:"h-2"})}),e.jsxs("div",{className:"text-right w-16",children:[e.jsx("span",{className:"text-sm font-medium",children:a}),e.jsxs("div",{className:"text-xs text-gray-500",children:[r.toFixed(1),"%"]})]})]},t))})})]})}function au({products:s}){return e.jsxs(k,{children:[e.jsx(V,{children:e.jsx(H,{className:"text-lg",children:"Top Rated Products"})}),e.jsx(T,{children:s.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Not enough reviews yet"}):e.jsx("div",{className:"space-y-3",children:s.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.product}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.count," review",t.count===1?"":"s"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{value:t.rating,size:"sm"}),e.jsx("span",{className:"text-sm font-medium",children:t.rating})]})]},t.product))})})]})}function ru({metrics:s}){return e.jsxs(k,{children:[e.jsx(V,{children:e.jsx(H,{className:"text-lg",children:"Moderation Insights"})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Approval Rate"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.moderationStats.approvalRate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Processing Time"}),e.jsx("span",{className:"text-sm font-medium",children:s.moderationStats.avgProcessingTime})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Flagged Reviews"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s.moderationStats.flaggedReviews}),s.moderationStats.flaggedReviews>0&&e.jsx(Oe,{className:"h-4 w-4 text-yellow-600"})]})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Positive"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[Math.round(s.sentimentBreakdown.positive/s.totalReviews*100)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Neutral"}),e.jsxs("p",{className:"text-lg font-bold text-gray-600",children:[Math.round(s.sentimentBreakdown.neutral/s.totalReviews*100)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Negative"}),e.jsxs("p",{className:"text-lg font-bold text-red-600",children:[Math.round(s.sentimentBreakdown.negative/s.totalReviews*100)||0,"%"]})]})]})})]})})]})}function nu({className:s="",showDetailedView:t=!1}){const{data:a,isLoading:r}=yl({limit:1e3}),n=m.useMemo(()=>a!=null&&a.data?su(a.data):null,[a]);return r?e.jsx("div",{className:`space-y-6 ${s}`,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[...Array(4)].map((l,i)=>e.jsx(k,{className:"animate-pulse",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})})},i))})}):n?t?e.jsxs("div",{className:`space-y-6 ${s}`,children:[e.jsx(Fr,{metrics:n}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(tu,{distribution:n.ratingDistribution}),e.jsx(ru,{metrics:n})]}),e.jsx(au,{products:n.topRatedProducts})]}):e.jsx("div",{className:s,children:e.jsx(Fr,{metrics:n})}):e.jsx(k,{className:s,children:e.jsxs(T,{className:"p-6 text-center",children:[e.jsx(Gt,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No review data available"}),e.jsx("p",{className:"text-gray-600",children:"Review analytics will appear once customers start leaving reviews."})]})})}const iu=({promotions:s,loading:t,onEdit:a,onDelete:r,onToggleStatus:n,onAddNew:l,onReorder:i})=>{const[o,c]=m.useState(""),[d,g]=m.useState("all"),v=s.filter(h=>{var j;const b=h.title.toLowerCase().includes(o.toLowerCase())||(((j=h.description)==null?void 0:j.toLowerCase().includes(o.toLowerCase()))??!1),u=d==="all"||d==="active"&&h.is_active||d==="inactive"&&!h.is_active;return b&&u}),x=h=>{const b=new Date,u=h.start_date?new Date(h.start_date):null,j=h.end_date?new Date(h.end_date):null;return h.is_active?u&&b<u?{status:"scheduled",label:"Scheduled",color:"outline"}:j&&b>j?{status:"expired",label:"Expired",color:"destructive"}:{status:"active",label:"Active",color:"default"}:{status:"inactive",label:"Inactive",color:"secondary"}};return t?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Pe,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading promotions..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Promotions"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage promotional banners and campaigns"})]}),e.jsxs(N,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Add Promotion"]})]}),e.jsx(k,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{htmlFor:"search",children:"Search Promotions"}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(B,{id:"search",placeholder:"Search by title or description...",value:o,onChange:h=>c(h.target.value),className:"pl-9"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"status-filter",children:"Status Filter"}),e.jsxs("select",{id:"status-filter",value:d,onChange:h=>g(h.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(k,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:s.length})]}),e.jsx(Be,{className:"w-8 h-8 text-blue-500"})]})})}),e.jsx(k,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.filter(h=>h.is_active).length})]}),e.jsx(Ne,{className:"w-8 h-8 text-green-500"})]})})}),e.jsx(k,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Inactive"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:s.filter(h=>!h.is_active).length})]}),e.jsx(Ns,{className:"w-8 h-8 text-gray-500"})]})})}),e.jsx(k,{children:e.jsx(T,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expired"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.filter(h=>{const b=new Date,u=h.end_date?new Date(h.end_date):null;return u&&b>u}).length})]}),e.jsx(Te,{className:"w-8 h-8 text-red-500"})]})})})]}),v.length===0?e.jsx(k,{children:e.jsx(T,{className:"py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Be,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No promotions found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:o||d!=="all"?"Try adjusting your search or filter criteria":"Get started by creating your first promotion"}),!o&&d==="all"&&e.jsxs(N,{onClick:l,className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Add Your First Promotion"]})]})})}):e.jsx("div",{className:"space-y-4",children:v.map((h,b)=>{const u=x(h),j=b>0,f=b<v.length-1;return e.jsx(k,{className:"overflow-hidden",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:h.image_url?e.jsx("img",{src:h.image_url,alt:h.title,className:"w-full h-full object-cover",onError:y=>{y.target.style.display="none",y.target.parentElement.innerHTML='<div class="w-full h-full flex items-center justify-center text-gray-400"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg></div>'}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(ds,{className:"w-8 h-8"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold truncate",children:h.title}),h.description&&e.jsx("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:h.description})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(G,{variant:u.color,children:u.label}),e.jsxs(G,{variant:"outline",children:["Order: ",h.sort_order||0]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-3",children:[h.start_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ht,{className:"w-4 h-4"}),e.jsxs("span",{children:["Starts: ",new Date(h.start_date).toLocaleDateString()]})]}),h.end_date&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsxs("span",{children:["Ends: ",new Date(h.end_date).toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{children:["Updated: ",xo(new Date(h.updated_at),new Date,{addSuffix:!0})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>a(h),className:"flex items-center gap-1",children:[e.jsx(Ws,{className:"w-3 h-3"}),"Edit"]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>n(h.id,!h.is_active),className:"flex items-center gap-1",children:h.is_active?e.jsxs(e.Fragment,{children:[e.jsx(et,{className:"w-3 h-3"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"w-3 h-3"}),"Activate"]})}),h.image_url&&e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>window.open(h.image_url,"_blank"),className:"flex items-center gap-1",children:[e.jsx(Qs,{className:"w-3 h-3"}),"View Image"]}),e.jsxs("div",{className:"flex items-center gap-1 border rounded",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>i(h.id,"up"),disabled:!j,className:"px-2",children:e.jsx(fn,{className:"w-3 h-3"})}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>i(h.id,"down"),disabled:!f,className:"px-2",children:e.jsx(vn,{className:"w-3 h-3"})})]}),e.jsxs(N,{variant:"destructive",size:"sm",onClick:()=>{confirm(`Are you sure you want to delete "${h.title}"? This action cannot be undone.`)&&r(h.id)},className:"flex items-center gap-1",children:[e.jsx(ms,{className:"w-3 h-3"}),"Delete"]})]})]})]})})},h.id)})})]})};var cr="Checkbox",[lu,Ku]=ut(cr),[ou,cu]=lu(cr),bl=m.forwardRef((s,t)=>{const{__scopeCheckbox:a,name:r,checked:n,defaultChecked:l,required:i,disabled:o,value:c="on",onCheckedChange:d,form:g,...v}=s,[x,h]=m.useState(null),b=ze(t,_=>h(_)),u=m.useRef(!1),j=x?g||!!x.closest("form"):!0,[f=!1,y]=Et({prop:n,defaultProp:l,onChange:d}),p=m.useRef(f);return m.useEffect(()=>{const _=x==null?void 0:x.form;if(_){const E=()=>y(p.current);return _.addEventListener("reset",E),()=>_.removeEventListener("reset",E)}},[x,y]),e.jsxs(ou,{scope:a,state:f,disabled:o,children:[e.jsx(_e.button,{type:"button",role:"checkbox","aria-checked":Es(f)?"mixed":f,"aria-required":i,"data-state":_l(f),"data-disabled":o?"":void 0,disabled:o,value:c,...v,ref:b,onKeyDown:me(s.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:me(s.onClick,_=>{y(E=>Es(E)?!0:!E),j&&(u.current=_.isPropagationStopped(),u.current||_.stopPropagation())})}),j&&e.jsx(du,{control:x,bubbles:!u.current,name:r,value:c,checked:f,required:i,disabled:o,form:g,style:{transform:"translateX(-100%)"},defaultChecked:Es(l)?!1:l})]})});bl.displayName=cr;var Nl="CheckboxIndicator",wl=m.forwardRef((s,t)=>{const{__scopeCheckbox:a,forceMount:r,...n}=s,l=cu(Nl,a);return e.jsx(Rr,{present:r||Es(l.state)||l.state===!0,children:e.jsx(_e.span,{"data-state":_l(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...s.style}})})});wl.displayName=Nl;var du=s=>{const{control:t,checked:a,bubbles:r=!0,defaultChecked:n,...l}=s,i=m.useRef(null),o=qa(a),c=zr(t);m.useEffect(()=>{const g=i.current,v=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(v,"checked").set;if(o!==a&&h){const b=new Event("click",{bubbles:r});g.indeterminate=Es(a),h.call(g,Es(a)?!1:a),g.dispatchEvent(b)}},[o,a,r]);const d=m.useRef(Es(a)?!1:a);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??d.current,...l,tabIndex:-1,ref:i,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Es(s){return s==="indeterminate"}function _l(s){return Es(s)?"indeterminate":s?"checked":"unchecked"}var Cl=bl,mu=wl;const Sl=m.forwardRef(({className:s,...t},a)=>e.jsx(Cl,{ref:a,className:z("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(mu,{className:z("flex items-center justify-center text-current"),children:e.jsx(Vt,{className:"h-4 w-4"})})}));Sl.displayName=Cl.displayName;const uu=[{value:"percentage_discount",label:"Percentage Discount",description:"e.g., 25% off"},{value:"fixed_discount",label:"Fixed Amount Off",description:"e.g., 100 off"},{value:"buy_one_get_one",label:"Buy X Get Y",description:"e.g., Buy 2 Get 1 Free"},{value:"seasonal_offer",label:"Seasonal Offer",description:"Holiday/seasonal promotions"},{value:"flash_sale",label:"Flash Sale",description:"Limited time urgent offers"},{value:"welcome_offer",label:"Welcome Offer",description:"New customer promotions"},{value:"loyalty_reward",label:"Loyalty Reward",description:"Returning customer rewards"},{value:"free_delivery",label:"Free Delivery",description:"Free shipping promotions"}],xu=[{value:"percentage",label:"Percentage (%)"},{value:"fixed_amount",label:"Fixed Amount ()"},{value:"buy_x_get_y",label:"Buy X Get Y"},{value:"free_shipping",label:"Free Shipping"}],hu=[{name:"Orange",bg:"#FF6B35",text:"#FFFFFF"},{name:"Red",bg:"#FF3B30",text:"#FFFFFF"},{name:"Green",bg:"#34C759",text:"#FFFFFF"},{name:"Blue",bg:"#007AFF",text:"#FFFFFF"},{name:"Purple",bg:"#AF52DE",text:"#FFFFFF"},{name:"Pink",bg:"#FF2D92",text:"#FFFFFF"},{name:"Teal",bg:"#5AC8FA",text:"#000000"},{name:"Gold",bg:"#FFD700",text:"#000000"}],gu=({promotion:s,products:t,onSubmit:a,onCancel:r})=>{const{toast:n}=Qe();m.useState(!1);const[l,i]=m.useState(!1),[o,c]=m.useState(!1),[d,g]=m.useState(""),[v,x]=m.useState(!1),[h,b]=m.useState(!1),[u,j]=m.useState(null),[f,y]=m.useState(null),[p,_]=m.useState({title:"",subtitle:"",description:"",promotion_type:"percentage_discount",discount_type:"percentage",discount_value:0,minimum_order_amount:0,maximum_discount_amount:0,buy_quantity:1,get_quantity:1,button_text:"Order Now",background_color:"#FF6B35",text_color:"#FFFFFF",terms_conditions:"",usage_limit:null,start_date:"",end_date:"",is_active:!0,sort_order:0,image_url:"",applicable_products:[]}),[E,C]=m.useState([]);m.useEffect(()=>{s&&(_({title:s.title||"",subtitle:s.subtitle||"",description:s.description||"",promotion_type:s.promotion_type||"percentage_discount",discount_type:s.discount_type||"percentage",discount_value:s.discount_value||0,minimum_order_amount:s.minimum_order_amount||0,maximum_discount_amount:s.maximum_discount_amount||0,buy_quantity:s.buy_quantity||1,get_quantity:s.get_quantity||1,button_text:s.button_text||"Order Now",background_color:s.background_color||"#FF6B35",text_color:s.text_color||"#FFFFFF",terms_conditions:s.terms_conditions||"",usage_limit:s.usage_limit,start_date:s.start_date?s.start_date.split("T")[0]:"",end_date:s.end_date?s.end_date.split("T")[0]:"",is_active:s.is_active,sort_order:s.sort_order||0,image_url:s.image_url||"",applicable_products:s.applicable_products||[]}),y(s.image_url||null))},[s]);const D=(w,S)=>{_(J=>({...J,[w]:S}))},F=async w=>{var S;try{if(w.size>5*1024*1024)throw new Error("File size must be less than 5MB");if(!["image/jpeg","image/jpg","image/png","image/webp","image/gif"].includes(w.type))throw new Error("Only JPEG, PNG, WebP, and GIF images are allowed");const Y=(S=w.name.split(".").pop())==null?void 0:S.toLowerCase(),re=`promotion_${Date.now()}.${Y}`,{data:ne,error:fe}=await M.storage.from("promotions").upload(re,w,{cacheControl:"3600",upsert:!1});if(fe)throw console.error("Storage upload error:",fe),new Error(`Upload failed: ${fe.message}`);const{data:ve}=M.storage.from("promotions").getPublicUrl(re);if(!(ve!=null&&ve.publicUrl))throw new Error("Failed to get public URL for uploaded image");return ve.publicUrl}catch(J){throw console.error("Image upload error:",J),n({title:"Image Upload Failed",description:J instanceof Error?J.message:"Failed to upload image. Please try again.",variant:"destructive"}),J}},P=w=>{var J;const S=(J=w.target.files)==null?void 0:J[0];if(S){j(S);const Y=new FileReader;Y.onload=re=>{var ne;return y((ne=re.target)==null?void 0:ne.result)},Y.readAsDataURL(S)}},L=w=>{_(S=>({...S,image_url:w})),c(!1),n({title:"Success",description:"Image selected successfully"})},q=w=>{if(E.some(Y=>Y.id===w.id)){n({title:"Already Added",description:"This product is already linked to this promotion",variant:"destructive"});return}const J={id:w.id,name:w.name,price:w.price,image_url:w.image_url};C(Y=>[...Y,J]),x(!1),g(""),n({title:"Product Added",description:`${w.name} has been linked to this promotion`})},se=w=>{const S=E.find(J=>J.id===w);C(J=>J.filter(Y=>Y.id!==w)),S&&n({title:"Product Removed",description:`${S.name} has been unlinked from this promotion`})},$=t.filter(w=>w.name.toLowerCase().includes(d.toLowerCase())&&!E.some(S=>S.id===w.id)),K=()=>{if(!p.title.trim())return n({title:"Validation Error",description:"Title is required",variant:"destructive"}),!1;if(!p.image_url.trim()&&!u)return n({title:"Validation Error",description:"Please select an image or upload a new one",variant:"destructive"}),!1;if(p.start_date&&p.end_date){const w=new Date(p.start_date),S=new Date(p.end_date);if(w>=S)return n({title:"Validation Error",description:"End date must be after start date",variant:"destructive"}),!1}return!0},Q=async w=>{if(w.preventDefault(),!!K()){b(!0);try{let S=p.image_url;if(u){i(!0);try{S=await F(u)}catch{return}finally{i(!1)}}const J={...p,image_url:S,start_date:p.start_date?new Date(p.start_date).toISOString():null,end_date:p.end_date?new Date(p.end_date).toISOString():null,usage_limit:p.usage_limit||null};await a(J),E.length>0&&console.log("Linked products (for future implementation):",E)}catch(S){console.error("Form submission error:",S),n({title:"Error",description:S instanceof Error?S.message:"Failed to save promotion. Please try again.",variant:"destructive"})}finally{b(!1)}}},U=w=>{_(S=>({...S,background_color:w.bg,text_color:w.text}))},A=!!s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(mn,{className:"h-5 w-5"}),A?"Edit Promotion":"Create New Promotion"]})}),e.jsx(T,{children:e.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"title",children:"Title *"}),e.jsx(B,{id:"title",value:p.title,onChange:w=>D("title",w.target.value),placeholder:"e.g., Weekend Special",required:!0})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"subtitle",children:"Subtitle"}),e.jsx(B,{id:"subtitle",value:p.subtitle,onChange:w=>D("subtitle",w.target.value),placeholder:"e.g., Delicious Savings"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"description",children:"Description"}),e.jsx(yt,{id:"description",value:p.description,onChange:w=>D("description",w.target.value),placeholder:"Describe your promotion...",rows:3})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"sort-order",children:"Display Order"}),e.jsx(B,{id:"sort-order",type:"number",value:p.sort_order||0,onChange:w=>D("sort_order",parseInt(w.target.value)||0),placeholder:"0",min:"0"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Lower numbers appear first"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Sl,{id:"is-active",checked:p.is_active,onCheckedChange:w=>D("is_active",w)}),e.jsx(I,{htmlFor:"is-active",children:"Active"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"start-date",children:"Start Date"}),e.jsx(B,{id:"start-date",type:"date",value:p.start_date,onChange:w=>D("start_date",w.target.value)})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"end-date",children:"End Date"}),e.jsx(B,{id:"end-date",type:"date",value:p.end_date,onChange:w=>D("end_date",w.target.value)})]}),p.start_date&&p.end_date&&e.jsxs(Se,{children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsxs(Fe,{children:["This promotion will run from ",new Date(p.start_date).toLocaleDateString(),"to ",new Date(p.end_date).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(I,{children:"Promotion Image *"}),f?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative w-full max-w-md",children:[e.jsx("img",{src:f,alt:"Promotion preview",className:"w-full h-48 object-cover rounded-lg border"}),e.jsx(N,{type:"button",variant:"destructive",size:"sm",onClick:()=>{y(null),j(null),D("image_url","")},className:"absolute top-2 right-2",disabled:l,children:e.jsx(os,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:()=>{var w;return(w=document.getElementById("image-upload"))==null?void 0:w.click()},className:"flex items-center gap-2",disabled:l,children:[l?e.jsx(Pe,{className:"w-4 h-4 animate-spin"}):e.jsx(ot,{className:"w-4 h-4"}),l?"Uploading...":"Change Image"]}),e.jsxs(N,{type:"button",variant:"outline",onClick:()=>c(!0),className:"flex items-center gap-2",disabled:l,children:[e.jsx(Qs,{className:"w-4 h-4"}),"Select Existing"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(ds,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a new image or select from existing images"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:()=>{var w;return(w=document.getElementById("image-upload"))==null?void 0:w.click()},className:"flex items-center gap-2",disabled:l,children:[l?e.jsx(Pe,{className:"w-4 h-4 animate-spin"}):e.jsx(ot,{className:"w-4 h-4"}),l?"Uploading...":"Upload New Image"]}),e.jsxs(N,{type:"button",variant:"outline",onClick:()=>c(!0),className:"flex items-center gap-2",disabled:l,children:[e.jsx(Qs,{className:"w-4 h-4"}),"Select Existing"]})]})]}),e.jsx("input",{id:"image-upload",type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp,image/gif",onChange:P,className:"hidden",disabled:l}),e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:[e.jsx("p",{children:"Supported formats: JPEG, PNG, WebP, GIF"}),e.jsx("p",{children:"Maximum file size: 5MB"})]})]})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx($a,{className:"h-4 w-4"}),"Promotion Configuration"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"promotion_type",children:"Promotion Type"}),e.jsxs(Ie,{value:p.promotion_type,onValueChange:w=>D("promotion_type",w),children:[e.jsx(De,{children:e.jsx(Re,{})}),e.jsx(Ae,{children:uu.map(w=>e.jsx(W,{value:w.value,children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.label}),e.jsx("div",{className:"text-sm text-gray-500",children:w.description})]})},w.value))})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"discount_type",children:"Discount Type"}),e.jsxs(Ie,{value:p.discount_type,onValueChange:w=>D("discount_type",w),children:[e.jsx(De,{children:e.jsx(Re,{})}),e.jsx(Ae,{children:xu.map(w=>e.jsx(W,{value:w.value,children:w.label},w.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.discount_type!=="buy_x_get_y"?e.jsxs("div",{children:[e.jsxs(I,{htmlFor:"discount_value",children:["Discount Value ",p.discount_type==="percentage"?"(%)":"()"]}),e.jsx(B,{id:"discount_value",type:"number",value:p.discount_value,onChange:w=>D("discount_value",Number(w.target.value)),min:"0",max:p.discount_type==="percentage"?"100":void 0})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"buy_quantity",children:"Buy Quantity"}),e.jsx(B,{id:"buy_quantity",type:"number",value:p.buy_quantity,onChange:w=>D("buy_quantity",Number(w.target.value)),min:"1"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"get_quantity",children:"Get Quantity"}),e.jsx(B,{id:"get_quantity",type:"number",value:p.get_quantity,onChange:w=>D("get_quantity",Number(w.target.value)),min:"1"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"minimum_order",children:"Minimum Order ()"}),e.jsx(B,{id:"minimum_order",type:"number",value:p.minimum_order_amount,onChange:w=>D("minimum_order_amount",Number(w.target.value)),min:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"button_text",children:"Button Text"}),e.jsx(B,{id:"button_text",value:p.button_text,onChange:w=>D("button_text",w.target.value),placeholder:"Order Now"})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"usage_limit",children:"Usage Limit (optional)"}),e.jsx(B,{id:"usage_limit",type:"number",value:p.usage_limit||"",onChange:w=>D("usage_limit",w.target.value?Number(w.target.value):null),min:"1",placeholder:"Unlimited"})]})]})]})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(io,{className:"h-4 w-4"}),"Visual Customization"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Color Presets"}),e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2 mt-2",children:hu.map(w=>e.jsx("button",{type:"button",onClick:()=>U(w),className:"w-12 h-12 rounded-lg border-2 border-gray-200 hover:border-gray-400 transition-colors",style:{backgroundColor:w.bg},title:w.name},w.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"background_color",children:"Background Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{id:"background_color",type:"color",value:p.background_color,onChange:w=>D("background_color",w.target.value),className:"w-16 h-10 p-1"}),e.jsx(B,{value:p.background_color,onChange:w=>D("background_color",w.target.value),placeholder:"#FF6B35",className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(I,{htmlFor:"text_color",children:"Text Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{id:"text_color",type:"color",value:p.text_color,onChange:w=>D("text_color",w.target.value),className:"w-16 h-10 p-1"}),e.jsx(B,{value:p.text_color,onChange:w=>D("text_color",w.target.value),placeholder:"#FFFFFF",className:"flex-1"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Linked Products (Future Feature)"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Products that this promotion applies to or highlights"})]}),e.jsxs(N,{type:"button",variant:"outline",onClick:()=>x(!0),className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"}),"Link Product"]})]}),E.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(w=>e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[w.image_url&&e.jsx("img",{src:w.image_url,alt:w.name,className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:w.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["",w.price]})]}),e.jsx(N,{type:"button",variant:"destructive",size:"sm",onClick:()=>se(w.id),children:e.jsx(ms,{className:"w-4 h-4"})})]})},w.id))}),E.length===0&&e.jsxs(Se,{children:[e.jsx(lt,{className:"h-4 w-4"}),e.jsxs(Fe,{children:["No products linked yet. You can link products to specify which items this promotion applies to.",e.jsx("br",{}),e.jsx("em",{children:"Note: Product linking functionality will be fully implemented in a future update."})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 pt-6 border-t",children:[e.jsxs(N,{type:"submit",disabled:h||l,className:"flex items-center gap-2",children:[h||l?e.jsx(Pe,{className:"w-4 h-4 animate-spin"}):e.jsx(Kt,{className:"w-4 h-4"}),l?"Uploading Image...":h?A?"Updating...":"Creating...":A?"Update Promotion":"Create Promotion"]}),e.jsx(N,{type:"button",variant:"outline",onClick:r,disabled:h||l,children:"Cancel"}),(l||h)&&e.jsxs("div",{className:"text-sm text-gray-500",children:[l&&"Please wait while the image is being uploaded...",h&&!l&&"Saving promotion data..."]})]})]})})]}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Choose Promotion Image"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>c(!1),children:e.jsx(os,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:e.jsx(ir,{selectedImageUrl:p.image_url,onImageSelect:L,context:"all",buttonText:"Select Image"})})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Link Products to Promotion"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>{x(!1),g("")},children:e.jsx(os,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Is,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(B,{placeholder:"Search products...",value:d,onChange:w=>g(w.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"p-4 max-h-[60vh] overflow-y-auto",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$.map(w=>e.jsx(k,{className:"p-4 cursor-pointer hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-3",onClick:()=>q(w),children:[w.image_url&&e.jsx("img",{src:w.image_url,alt:w.name,className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:w.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["",w.price]}),e.jsx(G,{variant:w.is_available?"default":"secondary",children:w.is_available?"Available":"Unavailable"})]}),e.jsx(N,{type:"button",variant:"outline",size:"sm",children:e.jsx(Ce,{className:"w-4 h-4"})})]})},w.id))}),$.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(be,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No products found"}),d&&e.jsx("p",{className:"text-sm",children:"Try adjusting your search terms"})]})]})]})})]})},pu=R.object({default_delivery_fee:R.number().min(0,"Delivery fee must be non-negative"),free_delivery_threshold:R.number().min(0,"Threshold must be non-negative"),max_delivery_distance_km:R.number().min(1,"Distance must be at least 1km").max(100,"Distance cannot exceed 100km"),default_delivery_time_minutes:R.number().min(15,"Minimum delivery time is 15 minutes").max(180,"Maximum delivery time is 3 hours"),is_delivery_enabled:R.boolean(),emergency_shutdown:R.boolean(),surge_pricing_enabled:R.boolean()});function fu(){const{settings:s,isLoading:t,error:a,updateSettings:r,isUpdating:n,updateError:l,emergencyShutdown:i,isShuttingDown:o}=Qa(),{register:c,handleSubmit:d,formState:{errors:g,isDirty:v},reset:x,watch:h,setValue:b}=gt({resolver:jt(pu),defaultValues:{default_delivery_fee:49,free_delivery_threshold:299,max_delivery_distance_km:25,default_delivery_time_minutes:30,is_delivery_enabled:!0,emergency_shutdown:!1,surge_pricing_enabled:!1}});O.useEffect(()=>{s&&x(s)},[s,x]);const u=p=>{r(p)},j=()=>{const p=!h("emergency_shutdown");b("emergency_shutdown",p),i(p)},f=h("emergency_shutdown"),y=h("is_delivery_enabled");return t?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Delivery Settings"]})}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})})})]}):a?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Error Loading Settings"]})}),e.jsx(T,{children:e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Failed to load delivery settings. Please refresh the page or contact support."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[f&&e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsxs(Fe,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Emergency shutdown is active - All deliveries are suspended"}),e.jsx(N,{variant:"outline",size:"sm",onClick:j,disabled:o,children:o?"Activating...":"Restore Service"})]})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Delivery Settings"]}),e.jsx(We,{children:"Configure global delivery parameters and operational settings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:y?"default":"destructive",children:y?"Active":"Inactive"}),f&&e.jsxs(G,{variant:"destructive",children:[e.jsx(It,{className:"w-3 h-3 mr-1"}),"Emergency"]})]})]})}),e.jsx(T,{children:e.jsxs("form",{onSubmit:d(u),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(_s,{className:"w-4 h-4"}),"Service Status"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"is_delivery_enabled",className:"text-sm font-medium",children:"Delivery Service"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable or disable delivery service"})]}),e.jsx(ts,{id:"is_delivery_enabled",...c("is_delivery_enabled"),checked:h("is_delivery_enabled"),onCheckedChange:p=>b("is_delivery_enabled",p)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg border-red-200",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-sm font-medium text-red-600",children:"Emergency Shutdown"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Immediately suspend all deliveries"})]}),e.jsxs(N,{type:"button",variant:f?"destructive":"outline",size:"sm",onClick:j,disabled:o,children:[e.jsx(It,{className:"w-3 h-3 mr-1"}),f?"Active":"Activate"]})]})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(zs,{className:"w-4 h-4"}),"Pricing Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"default_delivery_fee",children:"Default Delivery Fee ()"}),e.jsx(B,{id:"default_delivery_fee",type:"number",step:"0.01",...c("default_delivery_fee",{valueAsNumber:!0})}),g.default_delivery_fee&&e.jsx("p",{className:"text-sm text-red-600",children:g.default_delivery_fee.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Base delivery charge for all orders"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"free_delivery_threshold",children:"Free Delivery Threshold ()"}),e.jsx(B,{id:"free_delivery_threshold",type:"number",step:"0.01",...c("free_delivery_threshold",{valueAsNumber:!0})}),g.free_delivery_threshold&&e.jsx("p",{className:"text-sm text-red-600",children:g.free_delivery_threshold.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum order value for free delivery"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"surge_pricing_enabled",className:"text-sm font-medium",children:"Surge Pricing"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable dynamic pricing during peak hours"})]}),e.jsx(ts,{id:"surge_pricing_enabled",...c("surge_pricing_enabled"),checked:h("surge_pricing_enabled"),onCheckedChange:p=>b("surge_pricing_enabled",p)})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Operational Limits"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"max_delivery_distance_km",children:"Max Delivery Distance (km)"}),e.jsx(B,{id:"max_delivery_distance_km",type:"number",...c("max_delivery_distance_km",{valueAsNumber:!0})}),g.max_delivery_distance_km&&e.jsx("p",{className:"text-sm text-red-600",children:g.max_delivery_distance_km.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum delivery radius from restaurant"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"default_delivery_time_minutes",children:"Default Delivery Time (minutes)"}),e.jsx(B,{id:"default_delivery_time_minutes",type:"number",...c("default_delivery_time_minutes",{valueAsNumber:!0})}),g.default_delivery_time_minutes&&e.jsx("p",{className:"text-sm text-red-600",children:g.default_delivery_time_minutes.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Estimated delivery time for customers"})]})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:v?"You have unsaved changes":"All changes saved"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:()=>x(),disabled:!v||n,children:[e.jsx(hn,{className:"w-4 h-4 mr-2"}),"Reset"]}),e.jsx(N,{type:"submit",disabled:!v||n||f,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]}),l&&e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsxs(Fe,{children:["Failed to update settings: ",l.message]})]})]})})]}),e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5"}),"Current Configuration Summary"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["",h("default_delivery_fee")]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Base Fee"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",h("free_delivery_threshold")]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Free Delivery"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[h("max_delivery_distance_km"),"km"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Max Distance"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[h("default_delivery_time_minutes"),"min"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Delivery Time"})]})]})})]})]})}const vu=R.object({name:R.string().min(1,"Zone name is required").max(100,"Name too long"),description:R.string().optional(),service_type:R.enum(["standard","express","premium"]),base_delivery_fee:R.number().min(0,"Fee must be non-negative"),free_delivery_threshold:R.number().min(0,"Threshold must be non-negative"),max_delivery_time_minutes:R.number().min(15,"Minimum time is 15 minutes").max(180,"Maximum time is 3 hours"),priority_level:R.number().min(1,"Priority must be at least 1").max(10,"Priority cannot exceed 10"),is_active:R.boolean()});function ju({zone:s,onSubmit:t,onCancel:a,isLoading:r}){const{register:n,handleSubmit:l,formState:{errors:i},setValue:o,watch:c}=gt({resolver:jt(vu),defaultValues:s||{name:"",description:"",service_type:"standard",base_delivery_fee:49,free_delivery_threshold:299,max_delivery_time_minutes:30,priority_level:1,is_active:!0}});return e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(lo,{className:"w-5 h-5"}),s?"Edit Delivery Zone":"Create New Delivery Zone"]}),e.jsx(We,{children:s?"Update delivery zone settings":"Configure a new delivery zone with geographic boundaries"})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:l(t),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Zone Name"}),e.jsx(B,{id:"name",...n("name"),placeholder:"e.g., Central Bangalore"}),i.name&&e.jsx("p",{className:"text-sm text-red-600",children:i.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"service_type",children:"Service Type"}),e.jsxs(Ie,{value:c("service_type"),onValueChange:d=>o("service_type",d),children:[e.jsx(De,{children:e.jsx(Re,{placeholder:"Select service type"})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"standard",children:"Standard"}),e.jsx(W,{value:"express",children:"Express"}),e.jsx(W,{value:"premium",children:"Premium"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(yt,{id:"description",...n("description"),placeholder:"Describe the zone coverage area",rows:3})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(zs,{className:"w-4 h-4"}),"Pricing Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"base_delivery_fee",children:"Base Delivery Fee ()"}),e.jsx(B,{id:"base_delivery_fee",type:"number",step:"0.01",...n("base_delivery_fee",{valueAsNumber:!0})}),i.base_delivery_fee&&e.jsx("p",{className:"text-sm text-red-600",children:i.base_delivery_fee.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"free_delivery_threshold",children:"Free Delivery Threshold ()"}),e.jsx(B,{id:"free_delivery_threshold",type:"number",step:"0.01",...n("free_delivery_threshold",{valueAsNumber:!0})}),i.free_delivery_threshold&&e.jsx("p",{className:"text-sm text-red-600",children:i.free_delivery_threshold.message})]})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"Operational Settings"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"max_delivery_time_minutes",children:"Max Delivery Time (minutes)"}),e.jsx(B,{id:"max_delivery_time_minutes",type:"number",...n("max_delivery_time_minutes",{valueAsNumber:!0})}),i.max_delivery_time_minutes&&e.jsx("p",{className:"text-sm text-red-600",children:i.max_delivery_time_minutes.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"priority_level",children:"Priority Level (1-10)"}),e.jsx(B,{id:"priority_level",type:"number",min:"1",max:"10",...n("priority_level",{valueAsNumber:!0})}),i.priority_level&&e.jsx("p",{className:"text-sm text-red-600",children:i.priority_level.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Higher numbers = higher priority for overlapping zones"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"is_active",className:"text-sm font-medium",children:"Zone Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable or disable this delivery zone"})]}),e.jsx(ts,{id:"is_active",...n("is_active"),checked:c("is_active"),onCheckedChange:d=>o("is_active",d)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Geographic Boundaries"]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(Ee,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-600 mb-2",children:"Map Integration Coming Soon"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Interactive map for defining zone boundaries will be available in the next phase. For now, zones will use default geographic areas."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:a,disabled:r,children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx(N,{type:"submit",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),s?"Update Zone":"Create Zone"]})})]})]})})]})}function yu(){const{zones:s,isLoading:t,error:a,createZone:r,isCreating:n,createError:l,updateZone:i,isUpdating:o,updateError:c,deleteZone:d,isDeleting:g,toggleZoneStatus:v,isToggling:x}=ea(),[h,b]=m.useState(!1),[u,j]=m.useState(null),f=C=>{const D={...C,boundary:null,center_point:null};r(D),b(!1)},y=C=>{u&&(i({id:u.id,...C}),j(null))},p=C=>{window.confirm("Are you sure you want to delete this delivery zone? This action cannot be undone.")&&d(C)},_=C=>{v({id:C.id,is_active:!C.is_active})},E=C=>{const D={standard:"default",express:"secondary",premium:"destructive"};return e.jsx(G,{variant:D[C]||"default",children:C.charAt(0).toUpperCase()+C.slice(1)})};return t?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Delivery Zones"]})}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})})})]}):a?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Error Loading Zones"]})}),e.jsx(T,{children:e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Failed to load delivery zones. Please refresh the page or contact support."})]})})]}):h||u?e.jsx(ju,{zone:u||void 0,onSubmit:u?y:f,onCancel:()=>{b(!1),j(null)},isLoading:n||o}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{children:e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Delivery Zones Management"]}),e.jsx(We,{children:"Manage geographic delivery zones and their settings"})]}),e.jsxs(N,{onClick:()=>b(!0),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Add Zone"]})]})})}),(l||c)&&e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:(l==null?void 0:l.message)||(c==null?void 0:c.message)||"An error occurred"})]}),s&&s.length>0?e.jsx("div",{className:"grid gap-6",children:s.map(C=>e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-lg",children:C.name}),C.description&&e.jsx(We,{children:C.description})]}),E(C.service_type),e.jsx(G,{variant:C.is_active?"default":"destructive",children:C.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(C),disabled:o,children:[e.jsx(Ws,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>_(C),disabled:x,children:[e.jsx(ct,{className:"w-3 h-3 mr-1"}),C.is_active?"Disable":"Enable"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>p(C.id),disabled:g,children:[e.jsx(ms,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:["",C.base_delivery_fee]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Base Fee"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["",C.free_delivery_threshold]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Free Delivery"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[C.max_delivery_time_minutes,"min"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Max Time"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-purple-600",children:C.priority_level}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Priority"})]})]})})]},C.id))}):e.jsx(k,{children:e.jsx(T,{className:"py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ee,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Delivery Zones"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Create your first delivery zone to start managing geographic coverage"}),e.jsxs(N,{onClick:()=>b(!0),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Create First Zone"]})]})})})]})}const bu=R.object({name:R.string().min(1,"Tax name is required").max(100,"Name too long"),tax_category:R.enum(["food","beverage","packaged_food","service","delivery"]),tax_rate:R.number().min(0,"Tax rate must be non-negative").max(100,"Tax rate cannot exceed 100%"),delivery_zone_id:R.string().optional().nullable(),is_inclusive:R.boolean(),is_active:R.boolean(),description:R.string().optional()});function Nu({tax:s,onSubmit:t,onCancel:a,isLoading:r}){var b;const{zones:n}=ea(),{register:l,handleSubmit:i,formState:{errors:o},setValue:c,watch:d}=gt({resolver:jt(bu),defaultValues:s||{name:"",tax_category:"food",tax_rate:5,delivery_zone_id:null,is_inclusive:!0,is_active:!0,description:""}}),g=d("tax_category"),v=d("is_inclusive"),x=u=>({food:{rate:5,description:"GST on food items"},beverage:{rate:12,description:"GST on beverages"},packaged_food:{rate:12,description:"GST on packaged food items"},service:{rate:18,description:"GST on services"},delivery:{rate:18,description:"GST on delivery service"}})[u]||{rate:0,description:""},h=u=>{c("tax_category",u);const j=x(u);c("tax_rate",j.rate),c("description",j.description)};return e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"w-5 h-5"}),s?"Edit Tax Setting":"Create New Tax Setting"]}),e.jsx(We,{children:s?"Update tax configuration":"Configure tax rates for different product categories and zones"})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:i(t),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Tax Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",children:"Tax Name"}),e.jsx(B,{id:"name",...l("name"),placeholder:"e.g., GST - Food Items"}),o.name&&e.jsx("p",{className:"text-sm text-red-600",children:o.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"tax_category",children:"Tax Category"}),e.jsxs(Ie,{value:d("tax_category"),onValueChange:h,children:[e.jsx(De,{children:e.jsx(Re,{placeholder:"Select tax category"})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"food",children:"Food Items"}),e.jsx(W,{value:"beverage",children:"Beverages"}),e.jsx(W,{value:"packaged_food",children:"Packaged Food"}),e.jsx(W,{value:"service",children:"Service"}),e.jsx(W,{value:"delivery",children:"Delivery Service"})]})]}),o.tax_category&&e.jsx("p",{className:"text-sm text-red-600",children:o.tax_category.message})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(yt,{id:"description",...l("description"),placeholder:"Describe this tax setting",rows:2})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(bn,{className:"w-4 h-4"}),"Tax Rate & Application"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"tax_rate",children:"Tax Rate (%)"}),e.jsx(B,{id:"tax_rate",type:"number",step:"0.01",min:"0",max:"100",...l("tax_rate",{valueAsNumber:!0})}),o.tax_rate&&e.jsx("p",{className:"text-sm text-red-600",children:o.tax_rate.message}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Standard GST rate for ",g,": ",x(g).rate,"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"delivery_zone_id",children:"Delivery Zone (Optional)"}),e.jsxs(Ie,{value:d("delivery_zone_id")||"all",onValueChange:u=>c("delivery_zone_id",u==="all"?null:u),children:[e.jsx(De,{children:e.jsx(Re,{placeholder:"Select zone or all zones"})}),e.jsxs(Ae,{children:[e.jsx(W,{value:"all",children:"All Zones"}),n==null?void 0:n.map(u=>e.jsx(W,{value:u.id,children:u.name},u.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Leave as "All Zones" for global tax settings'})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"is_inclusive",className:"text-sm font-medium",children:"Tax Inclusive Pricing"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tax included in displayed prices"})]}),e.jsx(ts,{id:"is_inclusive",...l("is_inclusive"),checked:d("is_inclusive"),onCheckedChange:u=>c("is_inclusive",u)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx(I,{htmlFor:"is_active",className:"text-sm font-medium",children:"Tax Setting Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable or disable this tax setting"})]}),e.jsx(ts,{id:"is_active",...l("is_active"),checked:d("is_active"),onCheckedChange:u=>c("is_active",u)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(oo,{className:"w-4 h-4"}),"Tax Calculation Preview"]}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Example: 100 item"}),e.jsx("div",{className:"mt-2 space-y-1",children:v?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Item Price: 100"}),e.jsxs("div",{children:["Tax (",d("tax_rate"),"%): ",(100*d("tax_rate")/(100+d("tax_rate"))).toFixed(2)]}),e.jsxs("div",{children:["Net Price: ",(100-100*d("tax_rate")/(100+d("tax_rate"))).toFixed(2)]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"Item Price: 100"}),e.jsxs("div",{children:["Tax (",d("tax_rate"),"%): ",(100*d("tax_rate")/100).toFixed(2)]}),e.jsxs("div",{children:["Total Price: ",(100+100*d("tax_rate")/100).toFixed(2)]})]})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Tax Type"}),e.jsx("div",{className:"mt-2",children:e.jsx(G,{variant:v?"default":"secondary",children:v?"Inclusive":"Exclusive"})})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Applies To"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs",children:g.replace("_"," ").toUpperCase()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:d("delivery_zone_id")?(b=n==null?void 0:n.find(u=>u.id===d("delivery_zone_id")))==null?void 0:b.name:"All Zones"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4",children:[e.jsxs(N,{type:"button",variant:"outline",onClick:a,disabled:r,children:[e.jsx(os,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx(N,{type:"submit",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Kt,{className:"w-4 h-4 mr-2"}),s?"Update Tax Setting":"Create Tax Setting"]})})]})]})})]})}function wu(){const{taxSettings:s,isLoading:t,error:a,createTaxSetting:r,isCreating:n,createError:l,updateTaxSetting:i,isUpdating:o,updateError:c,deleteTaxSetting:d,isDeleting:g,toggleTaxSettingStatus:v,isToggling:x}=Ya(),[h,b]=m.useState(!1),[u,j]=m.useState(null),f=C=>{r(C),b(!1)},y=C=>{u&&(i({id:u.id,...C}),j(null))},p=C=>{window.confirm("Are you sure you want to delete this tax setting? This action cannot be undone.")&&d(C)},_=C=>{v({id:C.id,is_active:!C.is_active})},E=C=>{const D={food:"default",beverage:"secondary",packaged_food:"secondary",service:"destructive",delivery:"destructive"};return e.jsx(G,{variant:D[C]||"default",children:C.replace("_"," ").toUpperCase()})};return t?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"w-5 h-5"}),"Tax Settings"]})}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})})})]}):a?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Error Loading Tax Settings"]})}),e.jsx(T,{children:e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Failed to load tax settings. Please refresh the page or contact support."})]})})]}):h||u?e.jsx(Nu,{tax:u||void 0,onSubmit:u?y:f,onCancel:()=>{b(!1),j(null)},isLoading:n||o}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{children:e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(kt,{className:"w-5 h-5"}),"Tax Settings Management"]}),e.jsx(We,{children:"Configure tax rates for different product categories and delivery zones"})]}),e.jsxs(N,{onClick:()=>b(!0),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Add Tax Setting"]})]})})}),(l||c)&&e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:(l==null?void 0:l.message)||(c==null?void 0:c.message)||"An error occurred"})]}),s&&s.length>0?e.jsx("div",{className:"grid gap-6",children:s.map(C=>e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-lg",children:C.name}),C.description&&e.jsx(We,{children:C.description})]}),E(C.tax_category),e.jsx(G,{variant:C.is_active?"default":"destructive",children:C.is_active?"Active":"Inactive"}),e.jsx(G,{variant:C.is_inclusive?"secondary":"outline",children:C.is_inclusive?"Inclusive":"Exclusive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>j(C),disabled:o,children:[e.jsx(Ws,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>_(C),disabled:x,children:[e.jsx(ct,{className:"w-3 h-3 mr-1"}),C.is_active?"Disable":"Enable"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>p(C.id),disabled:g,children:[e.jsx(ms,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[C.tax_rate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Tax Rate"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium",children:C.tax_category.replace("_"," ")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Category"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium",children:C.is_inclusive?"Inclusive":"Exclusive"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Application"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium",children:C.delivery_zone_id?"Zone Specific":"All Zones"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Coverage"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(lt,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Example: 100 item"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:C.is_inclusive?e.jsxs(e.Fragment,{children:["Tax included: ",(100*C.tax_rate/(100+C.tax_rate)).toFixed(2),"  Net price: ",(100-100*C.tax_rate/(100+C.tax_rate)).toFixed(2)]}):e.jsxs(e.Fragment,{children:["Tax added: ",(100*C.tax_rate/100).toFixed(2),"  Total price: ",(100+100*C.tax_rate/100).toFixed(2)]})})]})]})]},C.id))}):e.jsx(k,{children:e.jsx(T,{className:"py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(kt,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No Tax Settings"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Create your first tax setting to configure tax rates for products and services"}),e.jsxs(N,{onClick:()=>b(!0),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Create First Tax Setting"]})]})})})]})}function Ft({title:s,value:t,description:a,icon:r,trend:n,color:l="blue"}){const i={blue:"text-blue-600 bg-blue-50 border-blue-200",green:"text-green-600 bg-green-50 border-green-200",orange:"text-orange-600 bg-orange-50 border-orange-200",purple:"text-purple-600 bg-purple-50 border-purple-200",red:"text-red-600 bg-red-50 border-red-200"};return e.jsx(k,{children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${i[l]}`,children:r}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s}),e.jsx("p",{className:"text-2xl font-bold",children:t})]})]}),n&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${n.isPositive?"text-green-600":"text-red-600"}`,children:[n.isPositive?e.jsx(ys,{className:"w-4 h-4"}):e.jsx(xa,{className:"w-4 h-4"}),Math.abs(n.value),"%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:a})]})})}function _u(){const{settings:s,isLoading:t,error:a}=Qa(),{zones:r,isLoading:n}=ea(),{taxSettings:l,isLoading:i}=Ya();if(t||n||i)return e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-5 h-5"}),"System Status"]})}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-orange-500"})})})]});if(a)return e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Oe,{className:"w-5 h-5"}),"System Status Error"]})}),e.jsx(T,{children:e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Unable to load system status information."})]})})]});const o=(r==null?void 0:r.filter(x=>x.is_active))||[],c=(l==null?void 0:l.filter(x=>x.is_active))||[],d={delivery:(s==null?void 0:s.is_delivery_enabled)&&!(s!=null&&s.emergency_shutdown),zones:o.length>0,taxes:c.length>0,emergency:s==null?void 0:s.emergency_shutdown},v=(Object.values(d).filter(Boolean).length-(d.emergency?1:0))/3*100;return e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-5 h-5"}),"System Status"]}),e.jsx(We,{children:"Overall delivery system health and configuration status"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"System Health"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[v.toFixed(0),"%"]})]}),e.jsx(as,{value:v,className:"h-2"})]}),e.jsx(qe,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Delivery Service"}),e.jsx(G,{variant:d.delivery?"default":"destructive",children:d.delivery?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Active Zones"}),e.jsx(G,{variant:d.zones?"default":"secondary",children:o.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Tax Configuration"}),e.jsxs(G,{variant:d.taxes?"default":"secondary",children:[c.length," Rules"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Emergency Mode"}),e.jsx(G,{variant:d.emergency?"destructive":"default",children:d.emergency?"Active":"Normal"})]})]}),d.emergency&&e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Emergency shutdown is active. All deliveries are suspended."})]})]})]})}function Cu(){var n,l;const{settings:s}=Qa(),{zones:t}=ea(),{taxSettings:a}=Ya(),r={defaultFee:(s==null?void 0:s.default_delivery_fee)||0,freeThreshold:(s==null?void 0:s.free_delivery_threshold)||0,maxDistance:(s==null?void 0:s.max_delivery_distance_km)||0,totalZones:(t==null?void 0:t.length)||0,activeZones:((n=t==null?void 0:t.filter(i=>i.is_active))==null?void 0:n.length)||0,totalTaxRules:(a==null?void 0:a.length)||0,activeTaxRules:((l=a==null?void 0:a.filter(i=>i.is_active))==null?void 0:l.length)||0};return e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx($a,{className:"w-5 h-5"}),"Configuration Overview"]}),e.jsx(We,{children:"Current delivery system configuration summary"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-orange-600",children:["",r.defaultFee]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Default Fee"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["",r.freeThreshold]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Free Delivery"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[r.maxDistance,"km"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Max Distance"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[r.activeZones,"/",r.totalZones]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Active Zones"})]})]}),e.jsx(qe,{className:"my-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Zone Coverage"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Active Zones"}),e.jsx("span",{children:r.activeZones})]}),e.jsx(as,{value:r.activeZones/Math.max(r.totalZones,1)*100,className:"h-2"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Tax Configuration"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Active Rules"}),e.jsxs("span",{children:[r.activeTaxRules,"/",r.totalTaxRules]})]}),e.jsx(as,{value:r.activeTaxRules/Math.max(r.totalTaxRules,1)*100,className:"h-2"})]})]})]})]})]})}function Su(){const{metrics:s,isLoading:t,error:a}=Hd();return t?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5"}),"Delivery Analytics"]})}),e.jsx(T,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"})})})]}):a?e.jsxs(k,{children:[e.jsx(V,{children:e.jsxs(H,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Analytics Error"]})}),e.jsx(T,{children:e.jsxs(Se,{variant:"destructive",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx(Fe,{children:"Failed to load delivery analytics. Please refresh the page or contact support."})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{children:e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Rt,{className:"w-5 h-5"}),"Delivery Analytics Dashboard"]}),e.jsx(We,{children:"Comprehensive metrics and insights for the delivery management system"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Ft,{title:"Total Zones",value:(s==null?void 0:s.total_zones)||0,description:"Configured delivery zones",icon:e.jsx(Ee,{className:"w-5 h-5"}),color:"blue"}),e.jsx(Ft,{title:"Active Zones",value:(s==null?void 0:s.active_zones)||0,description:"Currently operational zones",icon:e.jsx(Ne,{className:"w-5 h-5"}),color:"green"}),e.jsx(Ft,{title:"Calculations Today",value:(s==null?void 0:s.total_calculations_today)||0,description:"Fee calculations performed",icon:e.jsx(un,{className:"w-5 h-5"}),color:"orange"}),e.jsx(Ft,{title:"Average Fee",value:`${((s==null?void 0:s.average_delivery_fee)||0).toFixed(0)}`,description:"Average delivery charge",icon:e.jsx(zs,{className:"w-5 h-5"}),color:"purple"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5"}),"Performance Metrics"]}),e.jsx(We,{children:"System performance and efficiency indicators"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Free Delivery Rate"}),e.jsxs("span",{children:[((s==null?void 0:s.free_delivery_rate)||0).toFixed(1),"%"]})]}),e.jsx(as,{value:(s==null?void 0:s.free_delivery_rate)||0,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Percentage of orders qualifying for free delivery"})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Cache Hit Rate"}),e.jsxs("span",{children:[((s==null?void 0:s.cache_hit_rate)||0).toFixed(1),"%"]})]}),e.jsx(as,{value:(s==null?void 0:s.cache_hit_rate)||0,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery calculation cache efficiency"})]}),e.jsx(qe,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[(((s==null?void 0:s.active_zones)||0)/Math.max((s==null?void 0:s.total_zones)||1,1)*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Zone Coverage"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(s==null?void 0:s.total_calculations_today)||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Daily Requests"})]})]})]})]}),e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-5 h-5"}),"Usage Insights"]}),e.jsx(We,{children:"Delivery system usage patterns and trends"})]}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:["",((s==null?void 0:s.average_delivery_fee)||0).toFixed(0)]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg. Fee"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[((s==null?void 0:s.free_delivery_rate)||0).toFixed(0),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Free Orders"})]})]}),e.jsx(qe,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Today's Activity"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Calculations"}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.total_calculations_today)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Free Deliveries"}),e.jsx("span",{className:"font-medium",children:Math.round(((s==null?void 0:s.total_calculations_today)||0)*((s==null?void 0:s.free_delivery_rate)||0)/100)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Paid Deliveries"}),e.jsx("span",{className:"font-medium",children:((s==null?void 0:s.total_calculations_today)||0)-Math.round(((s==null?void 0:s.total_calculations_today)||0)*((s==null?void 0:s.free_delivery_rate)||0)/100)})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(_u,{}),e.jsx(Cu,{})]}),e.jsxs(k,{children:[e.jsxs(V,{children:[e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"System Insights"]}),e.jsx(We,{children:"Key insights and recommendations for system optimization"})]}),e.jsx(T,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Zone Coverage"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:((s==null?void 0:s.active_zones)||0)>0?`${s==null?void 0:s.active_zones} zones active and serving customers`:"No active zones configured for delivery"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(zs,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Revenue Impact"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:((s==null?void 0:s.free_delivery_rate)||0)>50?"High free delivery rate - consider adjusting thresholds":"Balanced delivery fee structure"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ct,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium",children:"Performance"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:((s==null?void 0:s.total_calculations_today)||0)>100?"High calculation volume - system performing well":"Low activity - consider marketing initiatives"})]})]})})]})]})}const Fu=({children:s})=>{const{user:t,loading:a,isAdmin:r}=Ve();return a?e.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):t?r?e.jsx(e.Fragment,{children:s}):e.jsx(bs,{to:"/admin/login",replace:!0}):e.jsx(bs,{to:"/admin/login",replace:!0})},ku=()=>{const{user:s,signOut:t}=Ve(),{toast:a}=Qe(),[r,n]=m.useState("dashboard"),[l,i]=m.useState("list"),[o,c]=m.useState("list"),[d,g]=m.useState("list"),[v,x]=m.useState("list"),[h,b]=m.useState(null),[u,j]=m.useState(null),[f,y]=m.useState(null),[p,_]=m.useState(null),[E,C]=m.useState([]),[D,F]=m.useState([]),[P,L]=m.useState([]),[q,se]=m.useState([]),[$,K]=m.useState({totalProducts:0,totalCategories:0,totalOrders:0,totalRevenue:0}),[Q,U]=m.useState(!1),[A,w]=m.useState(!1),[S,J]=m.useState(!1),[Y,re]=m.useState(!1),ne=async()=>{U(!0);try{const{data:X,error:ae}=await M.from("products").select(`
          *,
          categories (
            name
          )
        `).order("created_at",{ascending:!1});if(ae)throw ae;C(X||[])}catch(X){console.error("Error fetching products:",X),a({title:"Error",description:"Failed to fetch products",variant:"destructive"})}finally{U(!1)}},fe=async()=>{w(!0);try{const{data:X,error:ae}=await M.from("categories").select("*").order("sort_order",{ascending:!0});if(ae)throw ae;F(X||[])}catch(X){console.error("Error fetching categories:",X),a({title:"Error",description:"Failed to fetch categories",variant:"destructive"})}finally{w(!1)}},ve=async()=>{re(!0);try{const{data:X,error:ae}=await M.from("promotions").select("*").order("sort_order",{ascending:!0});if(ae)throw ae;se(X||[])}catch(X){console.error("Error fetching promotions:",X),a({title:"Error",description:"Failed to fetch promotions",variant:"destructive"})}finally{re(!1)}};m.useEffect(()=>{ne(),fe(),ve()},[]);const de=()=>e.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-800 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Dashboard"}),e.jsxs("p",{className:"text-slate-400",children:["Welcome back, ",s==null?void 0:s.email]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"text-slate-300 border-slate-600 hover:bg-slate-700",children:[e.jsx(At,{className:"h-4 w-4 mr-2"}),"Settings"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>t(),className:"text-slate-300 border-slate-600 hover:bg-slate-700",children:[e.jsx(gn,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]}),Z=()=>e.jsx("div",{className:"border-b border-slate-700 bg-slate-800",children:e.jsxs(at,{className:"grid w-full grid-cols-8 bg-transparent",children:[e.jsxs(ke,{value:"dashboard",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Dashboard"]}),e.jsxs(ke,{value:"products",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Products"]}),e.jsxs(ke,{value:"categories",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Categories"]}),e.jsxs(ke,{value:"orders",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Orders"]}),e.jsxs(ke,{value:"promotions",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Promotions"]}),e.jsxs(ke,{value:"images",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Images"]}),e.jsxs(ke,{value:"reviews",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Reviews"]}),e.jsxs(ke,{value:"delivery",className:"data-[state=active]:bg-slate-700 data-[state=active]:text-white text-slate-400",children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),"Delivery"]})]})}),ie=()=>{b(null),i("add")},we=X=>{b(X),i("edit")},le=async X=>{},ce=async(X,ae)=>{},oe=async X=>{try{await ne(),i("list"),b(null)}catch(ae){console.error("Error submitting form:",ae)}},ns=()=>{i("list"),b(null)},Ye=()=>{j(null),c("add")},Fs=X=>{j(X),c("edit")},Xe=async X=>{try{if(u){const{error:ae}=await M.from("categories").update(X).eq("id",u.id);if(ae)throw ae;a({title:"Success",description:"Category updated successfully"})}else{const{error:ae}=await M.from("categories").insert(X);if(ae)throw ae;a({title:"Success",description:"Category created successfully"})}await fe(),c("list"),j(null)}catch(ae){console.error("Error submitting category form:",ae),a({title:"Error",description:"Failed to save category",variant:"destructive"})}},Ls=()=>{c("list"),j(null)},na=X=>{y(X),g("details")},He=()=>{g("list"),y(null)},ps=()=>{_(null),x("add")},ia=X=>{_(X),x("edit")},la=async X=>{try{const{error:ae}=await M.from("promotions").delete().eq("id",X);if(ae)throw ae;await ve(),a({title:"Success",description:"Promotion deleted successfully"})}catch(ae){console.error("Error deleting promotion:",ae),a({title:"Error",description:"Failed to delete promotion",variant:"destructive"})}},Bs=async(X,ae)=>{try{const{error:$e}=await M.from("promotions").update({is_active:ae}).eq("id",X);if($e)throw $e;await ve(),a({title:"Success",description:`Promotion ${ae?"activated":"deactivated"} successfully`})}catch($e){console.error("Error toggling promotion status:",$e),a({title:"Error",description:"Failed to update promotion status",variant:"destructive"})}},oa=async(X,ae)=>{try{const $e=q.find(fs=>fs.id===X);if(!$e)return;const Hs=$e.sort_order||0,Nt=ae==="up"?Hs-1:Hs+1,rt=q.find(fs=>fs.sort_order===Nt);if(rt){const{error:fs}=await M.from("promotions").update({sort_order:Nt}).eq("id",X),{error:wt}=await M.from("promotions").update({sort_order:Hs}).eq("id",rt.id);if(fs||wt)throw fs||wt;await ve(),a({title:"Success",description:"Promotion order updated successfully"})}}catch($e){console.error("Error reordering promotion:",$e),a({title:"Error",description:"Failed to reorder promotion",variant:"destructive"})}},bt=async X=>{try{if(p){const{error:ae}=await M.from("promotions").update(X).eq("id",p.id);if(ae)throw ae;a({title:"Success",description:"Promotion updated successfully"})}else{const{error:ae}=await M.from("promotions").insert(X);if(ae)throw ae;a({title:"Success",description:"Promotion created successfully"})}await ve(),x("list"),_(null)}catch(ae){console.error("Error submitting promotion form:",ae),a({title:"Error",description:"Failed to save promotion",variant:"destructive"})}},Vs=()=>{x("list"),_(null)};return e.jsx(Fu,{children:e.jsxs("div",{className:"min-h-screen bg-slate-900",children:[e.jsx(de,{}),e.jsx("div",{className:"p-6",children:e.jsxs(vt,{value:r,onValueChange:X=>n(X),children:[e.jsx(Z,{}),e.jsxs(Le,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(k,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-slate-400",children:"Total Products"}),e.jsx(be,{className:"h-4 w-4 text-slate-400"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:E.length}),e.jsx("p",{className:"text-xs text-slate-400",children:"Active products"})]})]}),e.jsxs(k,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-slate-400",children:"Categories"}),e.jsx(Ts,{className:"h-4 w-4 text-slate-400"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:D.length}),e.jsx("p",{className:"text-xs text-slate-400",children:"Total categories"})]})]}),e.jsxs(k,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-slate-400",children:"Total Orders"}),e.jsx(Mt,{className:"h-4 w-4 text-slate-400"})]}),e.jsxs(T,{children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:$.totalOrders}),e.jsx("p",{className:"text-xs text-slate-400",children:"All time orders"})]})]}),e.jsxs(k,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-slate-400",children:"Revenue"}),e.jsx(ys,{className:"h-4 w-4 text-slate-400"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",$.totalRevenue.toFixed(2)]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Total earnings"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(nu,{}),e.jsxs(k,{className:"bg-slate-800 border-slate-700",children:[e.jsx(V,{children:e.jsx(H,{className:"text-white",children:"Recent Activity"})}),e.jsx(T,{children:e.jsx("p",{className:"text-slate-400",children:"Activity feed would go here..."})})]})]})]}),e.jsx(Le,{value:"reviews",className:"space-y-6",children:e.jsx(eu,{})}),e.jsx(Le,{value:"products",className:"space-y-6",children:l==="list"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Products Management"}),e.jsxs(N,{onClick:ie,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Product"]})]}),e.jsx(ym,{products:E,onEdit:we,onDelete:le,onToggleAvailability:ce,onAddNew:ie,loading:Q})]}):e.jsx("div",{children:A?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-2 text-white",children:"Loading categories..."})]}):e.jsx(Tm,{product:h,onSubmit:oe,onCancel:ns,categories:D,loading:Q})})}),e.jsx(Le,{value:"categories",className:"space-y-6",children:o==="list"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Categories Management"}),e.jsxs(N,{onClick:Ye,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Category"]})]}),e.jsx(Mm,{categories:D,onEdit:Fs,onDelete:()=>{},onToggleVisibility:()=>{},onAddNew:Ye,loading:A})]}):e.jsx(Lm,{category:u,onSubmit:Xe,onCancel:Ls})}),e.jsx(Le,{value:"orders",className:"space-y-6",children:d==="list"?e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Orders Management"}),e.jsx($m,{orders:P,onViewDetails:na,onUpdateStatus:()=>{},onRefresh:()=>{},loading:S})]}):e.jsx(zm,{order:f,onClose:He,onStatusUpdate:()=>{}})}),e.jsx(Le,{value:"images",className:"space-y-6",children:e.jsx(Gm,{})}),e.jsx(Le,{value:"promotions",className:"space-y-6",children:v==="list"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Promotions Management"}),e.jsxs(N,{onClick:ps,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Add Promotion"]})]}),e.jsx(iu,{promotions:q,loading:Y,onEdit:ia,onDelete:la,onToggleStatus:Bs,onReorder:oa,onAddNew:ps})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{variant:"outline",onClick:Vs,className:"flex items-center gap-2 text-slate-300 border-slate-600 hover:bg-slate-700",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Back to Promotions"]}),e.jsx(gu,{promotion:p,products:E,onSubmit:bt,onCancel:Vs})]})}),e.jsxs(Le,{value:"delivery",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Delivery Management"}),e.jsx(fu,{}),e.jsx(yu,{}),e.jsx(wu,{}),e.jsx(Su,{})]}),e.jsxs(Le,{value:"analytics",className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Analytics Dashboard"}),e.jsx(Km,{products:E,categories:D,loading:Q||A})]})]})})]})})},Pu=new co,Tu=()=>e.jsx(mo,{client:Pu,children:e.jsx(wc,{children:e.jsx(Sc,{children:e.jsx(Fc,{children:e.jsxs(jc,{children:[e.jsx(Fo,{}),e.jsx(tc,{}),e.jsx(Yl,{children:e.jsxs(rn,{children:[e.jsx(Me,{path:"/admin/login",element:e.jsx(fm,{})}),e.jsx(Me,{path:"/admin/dashboard",element:e.jsx(ku,{})}),e.jsx(Me,{path:"/*",element:e.jsx(pm,{})}),e.jsx(Me,{path:"*",element:e.jsx(dl,{})})]})})]})})})})});Nn(document.getElementById("root")).render(e.jsx(Tu,{}));
